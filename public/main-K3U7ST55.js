import{$ as Zd,$a as V,$b as cn,$c as bh,A as mc,Aa as Fe,Ab as D,Ac as Rc,B as Kd,Ba as gc,Bb as x,Bc as T0,C as jb,Ca as hs,Cb as K,Cc as Wi,D as xn,Da as $e,Db as vc,Dc as E0,E as Jd,Ea as ae,Eb as yc,Ec as C0,F as Gb,Fa as nh,Fb as Pe,Fc as be,G as mt,Ga as Me,Gb as d0,Gc as A0,H as $b,Ha as Xb,Hb as wc,Hc as bs,I as cs,Ia as fs,Ib as h0,Ic as S0,J as Mr,Ja as Zb,Jb as f0,Jc as D0,K as oi,Ka as Rt,Kb as X,Kc as vs,L as Qd,La as on,Lb as W,Lc as R0,M as Yd,Ma as ps,Mb as Hi,Mc as xc,N as St,Na as Pr,Nb as sn,Nc as ui,O as zb,Oa as Nr,Ob as p0,Oc as bt,P as ls,Pa as e0,Pb as m0,Pc as x0,Q as Hb,Qa as t0,Qb as gs,Qc as O0,R as si,Ra as n0,Rb as _s,Rc as M0,S as ai,Sa as i0,Sb as Pn,Sc as P0,T as Xd,Ta as r0,Tb as Nn,Tc as Oc,U as qb,Ua as o0,Ub as dh,Uc as Mc,V as Wb,Va as s0,Vb as N,Vc as N0,W as us,Wa as On,Wb as kn,Wc as Pc,X as $i,Xa as ih,Xb as xe,Xc as k0,Y as lt,Ya as Mn,Yb as Ic,Yc as _h,Z as Ge,Za as a0,Zb as g0,Zc as Nc,_ as Ue,_a as ms,_b as an,_c as kc,a as F,aa as Ee,ab as G,ac as ln,b as de,ba as ci,bb as kr,bc as _t,c as ri,ca as Dt,cb as rh,cc as Tt,d as g,da as U,db as c0,dc as hh,e as jd,ea as ee,eb as l0,ec as _0,f as Fb,fa as Kb,fb as Fr,fc as fh,fd as F0,g as Ft,ga as Y,gb as li,gc as Br,gd as ys,h as Gd,ha as eh,hb as oh,hc as b0,hd as Fc,i as $d,ia as j,ib as _c,ic as Tc,j as ye,ja as S,jb as Lt,jc as v0,k as Be,ka as gt,kb as Ye,kc as Ec,l as Vb,la as Jb,lb as Vr,lc as Cc,m as Lb,ma as ds,mb as u0,mc as ph,md as V0,n as tn,na as ue,nb as sh,nc as Ac,nd as Vc,o as zd,oa as te,ob as fe,oc as mh,p as Hd,pa as _e,pb as bc,pc as gh,pd as L0,q as qd,qa as It,qb as Lr,qc as un,r as nt,ra as Qb,rb as We,rc as Sc,s as Q,sa as nn,sb as $,sc as Dc,t as as,ta as Vt,tb as zi,tc as y0,u as Bb,ua as Yb,ub as it,uc as Fn,ud as B0,v as Ub,va as rn,vb as Ke,vc as w0,w as oe,wa as De,wb as ah,wc as I0,x as Rn,xa as Re,xb as ch,xc as Et,y as wt,ya as Wt,yb as lh,yc as qi,z as Wd,za as th,zb as uh,zc as dn}from"./chunk-BRI2UMMG.js";var Is=class{},Bc=class{},Vn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var yh=class{encodeKey(e){return U0(e)}encodeValue(e){return U0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function WE(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,c]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(c),t.set(s,l)}),t}var KE=/%(\d[a-f0-9])/gi,JE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function U0(n){return encodeURIComponent(n).replace(KE,(e,t)=>JE[t]??e)}function Lc(n){return`${n}`}var hi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new yh,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=WE(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Lc):[Lc(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Lc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Lc(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var wh=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function QE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function j0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function G0(n){return typeof Blob<"u"&&n instanceof Blob}function $0(n){return typeof FormData<"u"&&n instanceof FormData}function YE(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ws=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(QE(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Vn,this.context??=new wh,!this.params)this.params=new hi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||j0(this.body)||G0(this.body)||$0(this.body)||YE(this.body)?this.body:this.body instanceof hi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||$0(this.body)?null:G0(this.body)?this.body.type||null:j0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof hi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((y,A)=>y.set(A,e.setHeaders[A]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((y,A)=>y.set(A,e.setParams[A]),f)),new n(t,i,s,{params:f,headers:d,context:m,reportProgress:l,responseType:r,withCredentials:c,transferCache:o})}},fi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(fi||{}),Ts=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Vn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Uc=class n extends Ts{constructor(e={}){super(e),this.type=fi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Es=class n extends Ts{constructor(e={}){super(e),this.type=fi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},di=class extends Ts{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},K0=200,XE=204;function vh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Cs=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof ws)o=t;else{let l;r.headers instanceof Vn?l=r.headers:l=new Vn(r.headers);let d;r.params&&(r.params instanceof hi?d=r.params:d=new hi({fromObject:r.params})),o=new ws(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Q(o).pipe(oi(l=>this.handler.handle(l)));if(t instanceof ws||r.observe==="events")return s;let c=s.pipe(mt(l=>l instanceof Es));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(oe(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(oe(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(oe(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(oe(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new hi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,vh(r,i))}post(t,i,r={}){return this.request("POST",t,vh(r,i))}put(t,i,r={}){return this.request("PUT",t,vh(r,i))}static{this.\u0275fac=function(i){return new(i||n)(j(Is))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),ZE=/^\)\]\}',?\n/,eC="X-Request-URL";function z0(n){if(n.url)return n.url;let e=eC.toLocaleLowerCase();return n.headers.get(e)}var tC=(()=>{class n{constructor(){this.fetchImpl=S(Ih,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=S(ae)}handle(t){return new Ft(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(Th,o=>i.error(new di({error:o}))),()=>r.abort()})}doRequest(t,i,r){return g(this,null,function*(){let o=this.createRequestInit(t),s;try{let A=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,F({signal:i},o)));nC(A),r.next({type:fi.Sent}),s=yield A}catch(A){r.error(new di({error:A,status:A.status??0,statusText:A.statusText,url:t.urlWithParams,headers:A.headers}));return}let c=new Vn(s.headers),l=s.statusText,d=z0(s)??t.urlWithParams,f=s.status,m=null;if(t.reportProgress&&r.next(new Uc({headers:c,status:f,statusText:l,url:d})),s.body){let A=s.headers.get("content-length"),k=[],P=s.body.getReader(),O=0,J,ne,q=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>g(this,null,function*(){for(;;){let{done:ke,value:ge}=yield P.read();if(ke)break;if(k.push(ge),O+=ge.length,t.reportProgress){ne=t.responseType==="text"?(ne??"")+(J??=new TextDecoder).decode(ge,{stream:!0}):void 0;let I=()=>r.next({type:fi.DownloadProgress,total:A?+A:void 0,loaded:O,partialText:ne});q?q.run(I):I()}}}));let Te=this.concatChunks(k,O);try{let ke=s.headers.get("Content-Type")??"";m=this.parseBody(t,Te,ke)}catch(ke){r.error(new di({error:ke,headers:new Vn(s.headers),status:s.status,statusText:s.statusText,url:z0(s)??t.urlWithParams}));return}}f===0&&(f=m?K0:0),f>=200&&f<300?(r.next(new Es({body:m,headers:c,status:f,statusText:l,url:d})),r.complete()):r.error(new di({error:m,headers:c,status:f,statusText:l,url:d}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(ZE,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>i[o]=s.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let s of t)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Ih=class{};function Th(){}function nC(n){n.then(Th,Th)}function J0(n,e){return e(n)}function iC(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function rC(n,e,t){return(i,r)=>Vt(t,()=>e(i,o=>n(o,r)))}var oC=new Y(""),Eh=new Y(""),sC=new Y(""),Q0=new Y("",{providedIn:"root",factory:()=>!0});function aC(){let n=null;return(e,t)=>{n===null&&(n=(S(oC,{optional:!0})??[]).reduceRight(iC,J0));let i=S(hs);if(S(Q0)){let o=i.add();return n(e,t).pipe(si(()=>i.remove(o)))}else return n(e,t)}}var H0=(()=>{class n extends Is{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=S(hs),this.contributeToStability=S(Q0)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Eh),...this.injector.get(sC,[])]));this.chain=i.reduceRight((r,o)=>rC(r,o,this.injector),J0)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(si(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(j(Bc),j(nn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();var cC=/^\)\]\}',?\n/;function lC(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var q0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?nt(i.\u0275loadImpl()):Q(null)).pipe(lt(()=>new Ft(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((P,O)=>s.setRequestHeader(P,O.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let P=t.detectContentTypeHeader();P!==null&&s.setRequestHeader("Content-Type",P)}if(t.responseType){let P=t.responseType.toLowerCase();s.responseType=P!=="json"?P:"text"}let c=t.serializeBody(),l=null,d=()=>{if(l!==null)return l;let P=s.statusText||"OK",O=new Vn(s.getAllResponseHeaders()),J=lC(s)||t.url;return l=new Uc({headers:O,status:s.status,statusText:P,url:J}),l},f=()=>{let{headers:P,status:O,statusText:J,url:ne}=d(),q=null;O!==XE&&(q=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=q?K0:0);let Te=O>=200&&O<300;if(t.responseType==="json"&&typeof q=="string"){let ke=q;q=q.replace(cC,"");try{q=q!==""?JSON.parse(q):null}catch(ge){q=ke,Te&&(Te=!1,q={error:ge,text:q})}}Te?(o.next(new Es({body:q,headers:P,status:O,statusText:J,url:ne||void 0})),o.complete()):o.error(new di({error:q,headers:P,status:O,statusText:J,url:ne||void 0}))},m=P=>{let{url:O}=d(),J=new di({error:P,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(J)},y=!1,A=P=>{y||(o.next(d()),y=!0);let O={type:fi.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(O.total=P.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},k=P=>{let O={type:fi.UploadProgress,loaded:P.loaded};P.lengthComputable&&(O.total=P.total),o.next(O)};return s.addEventListener("load",f),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),t.reportProgress&&(s.addEventListener("progress",A),c!==null&&s.upload&&s.upload.addEventListener("progress",k)),s.send(c),o.next({type:fi.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",f),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",A),c!==null&&s.upload&&s.upload.removeEventListener("progress",k)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(j(Pc))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Y0=new Y(""),uC="XSRF-TOKEN",dC=new Y("",{providedIn:"root",factory:()=>uC}),hC="X-XSRF-TOKEN",fC=new Y("",{providedIn:"root",factory:()=>hC}),jc=class{},pC=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(j(be),j(Rt),j(dC))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function mC(n,e){let t=n.url.toLowerCase();if(!S(Y0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=S(jc).getToken(),r=S(fC);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var X0=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(X0||{});function gC(n,e){return{\u0275kind:n,\u0275providers:e}}function _C(...n){let e=[Cs,q0,H0,{provide:Is,useExisting:H0},{provide:Bc,useFactory:()=>S(tC,{optional:!0})??S(q0)},{provide:Eh,useValue:mC,multi:!0},{provide:Y0,useValue:!0},{provide:jc,useClass:pC}];for(let t of n)e.push(...t.\u0275providers);return It(e)}var W0=new Y("");function bC(){return gC(X0.LegacyInterceptors,[{provide:W0,useFactory:aC},{provide:Eh,useExisting:W0,multi:!0}])}var Z0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[_C(bC())]})}}return n})();var Sh=class extends C0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dh=class n extends Sh{static makeCurrent(){E0(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yC();return t==null?null:wC(t)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xc(document.cookie,e)}},As=null;function yC(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}function wC(n){return new URL(n,document.baseURI).pathname}var Rh=class{addToWindow(e){ci.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new Ee(5103,!1);return o},ci.getAllAngularTestabilities=()=>e.getAllTestabilities(),ci.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=ci.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(c=>{c.whenStable(s)})};ci.frameworkStabilizers||(ci.frameworkStabilizers=[]),ci.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?Wi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},IC=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),xh=new Y(""),nv=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ee(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(j(xh),j(ae))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Gc=class{constructor(e){this._doc=e}},Ch="ng-app-id",iv=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mc(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ch}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Ch),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Ch,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(j(be),j(fs),j(ps,8),j(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Ah={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mh=/%COMP%/g,rv="%COMP%",TC=`_nghost-${rv}`,EC=`_ngcontent-${rv}`,CC=!0,AC=new Y("",{providedIn:"root",factory:()=>CC});function SC(n){return EC.replace(Mh,n)}function DC(n){return TC.replace(Mh,n)}function ov(n,e){return e.map(t=>t.replace(Mh,n))}var Ur=(()=>{class n{constructor(t,i,r,o,s,c,l,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Mc(c),this.defaultRenderer=new Ss(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ds.ShadowDom&&(i=de(F({},i),{encapsulation:ds.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof $c?r.applyToHost(t):r instanceof Ds&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ds.Emulated:o=new $c(l,d,i,this.appId,f,s,c,m);break;case ds.ShadowDom:return new Oh(l,d,t,i,s,c,this.nonce,m);default:o=new Ds(l,d,i,f,s,c,m);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(j(nv),j(iv),j(fs),j(AC),j(be),j(Rt),j(ae),j(ps))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Ss=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ah[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ev(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ev(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ee(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Ah[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Ah[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ms.DashCase|ms.Important)?e.style.setProperty(t,i,r&ms.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ms.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Wi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ev(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Oh=class extends Ss{constructor(e,t,i,r,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=ov(r.id,r.styles);for(let f of d){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ds=class extends Ss{constructor(e,t,i,r,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?ov(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$c=class extends Ds{constructor(e,t,i,r,o,s,c,l){let d=r+"-"+i.id;super(e,t,i,o,s,c,l,d),this.contentAttr=SC(d),this.hostAttr=DC(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},RC=(()=>{class n extends Gc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(j(be))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),tv=["alt","control","meta","shift"],xC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OC={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},MC=(()=>{class n extends Gc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),tv.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),s+=d+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=xC[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),tv.forEach(s=>{if(s!==r){let c=OC[s];c(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(j(be))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function PC(){Dh.makeCurrent()}function NC(){return new nh}function kC(){return Xb(document),document}var FC=[{provide:Rt,useValue:P0},{provide:Zb,useValue:PC,multi:!0},{provide:be,useFactory:kC,deps:[]}],sv=y0(w0,"browser",FC),VC=new Y(""),LC=[{provide:Ec,useClass:Rh,deps:[]},{provide:v0,useClass:Cc,deps:[ae,ph,Ec]},{provide:Cc,useClass:Cc,deps:[ae,ph,Ec]}],BC=[{provide:Qb,useValue:"root"},{provide:nh,useFactory:NC,deps:[]},{provide:xh,useClass:RC,multi:!0,deps:[be,ae,Rt]},{provide:xh,useClass:MC,multi:!0,deps:[be]},Ur,iv,nv,{provide:Fr,useExisting:Ur},{provide:Pc,useClass:IC,deps:[]},[]],zc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:fs,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(j(VC,12))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[...BC,...LC],imports:[M0,I0]})}}return n})();var av=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(j(be))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ph=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=j(UC),r},providedIn:"root"})}}return n})(),UC=(()=>{class n extends Ph{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case On.NONE:return i;case On.HTML:return Nr(i,"HTML")?Pr(i):s0(this._doc,String(i)).toString();case On.STYLE:return Nr(i,"Style")?Pr(i):i;case On.SCRIPT:if(Nr(i,"Script"))return Pr(i);throw new Ee(5200,!1);case On.URL:return Nr(i,"URL")?Pr(i):o0(String(i));case On.RESOURCE_URL:if(Nr(i,"ResourceURL"))return Pr(i);throw new Ee(5201,!1);default:throw new Ee(5202,!1)}}bypassSecurityTrustHtml(t){return e0(t)}bypassSecurityTrustStyle(t){return t0(t)}bypassSecurityTrustScript(t){return n0(t)}bypassSecurityTrustUrl(t){return i0(t)}bypassSecurityTrustResourceUrl(t){return r0(t)}static{this.\u0275fac=function(i){return new(i||n)(j(be))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var le="primary",Gs=Symbol("RouteTitle"),Bh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qr(n){return new Bh(n)}function jC(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],c=n[o];if(s[0]===":")r[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function GC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hn(n[t],e[t]))return!1;return!0}function hn(n,e){let t=n?Uh(n):void 0,i=e?Uh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!bv(n[r],e[r]))return!1;return!0}function Uh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function vv(n){return n.length>0?n[n.length-1]:null}function gi(n){return Bb(n)?n:Ac(n)?nt(Promise.resolve(n)):Q(n)}var $C={exact:wv,subset:Iv},yv={exact:zC,subset:HC,ignored:()=>!0};function cv(n,e,t){return $C[t.paths](n.root,e.root,t.matrixParams)&&yv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function zC(n,e){return hn(n,e)}function wv(n,e,t){if(!Ji(n.segments,e.segments)||!Wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!wv(n.children[i],e.children[i],t))return!1;return!0}function HC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bv(n[t],e[t]))}function Iv(n,e,t){return Tv(n,e,e.segments,t)}function Tv(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ji(r,t)||e.hasChildren()||!Wc(r,t,i))}else if(n.segments.length===t.length){if(!Ji(n.segments,t)||!Wc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Iv(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ji(n.segments,r)||!Wc(n.segments,r,i)||!n.children[le]?!1:Tv(n.children[le],e,o,i)}}function Wc(n,e,t){return e.every((i,r)=>yv[t](n[r].parameters,i.parameters))}var Bn=class{constructor(e=new Ce([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){return KC.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kc(this)}},Ki=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=qr(this.parameters),this._parameterMap}toString(){return Cv(this)}};function qC(n,e){return Ji(n,e)&&n.every((t,i)=>hn(t.parameters,e[i].parameters))}function Ji(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function WC(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===le&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==le&&(t=t.concat(e(r,i)))}),t}var $s=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:()=>new Wr,providedIn:"root"})}}return n})(),Wr=class{parse(e){let t=new Gh(e);return new Bn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Rs(e.root,!0)}`,i=YC(e.queryParams),r=typeof e.fragment=="string"?`#${JC(e.fragment)}`:"";return`${t}${i}${r}`}},KC=new Wr;function Kc(n){return n.segments.map(e=>Cv(e)).join("/")}function Rs(n,e){if(!n.hasChildren())return Kc(n);if(e){let t=n.children[le]?Rs(n.children[le],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==le&&i.push(`${r}:${Rs(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=WC(n,(i,r)=>r===le?[Rs(n.children[le],!1)]:[`${r}:${Rs(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${Kc(n)}/${t[0]}`:`${Kc(n)}/(${t.join("//")})`}}function Ev(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hc(n){return Ev(n).replace(/%3B/gi,";")}function JC(n){return encodeURI(n)}function jh(n){return Ev(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jc(n){return decodeURIComponent(n)}function lv(n){return Jc(n.replace(/\+/g,"%20"))}function Cv(n){return`${jh(n.path)}${QC(n.parameters)}`}function QC(n){return Object.entries(n).map(([e,t])=>`;${jh(e)}=${jh(t)}`).join("")}function YC(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Hc(t)}=${Hc(r)}`).join("&"):`${Hc(t)}=${Hc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var XC=/^[^\/()?;#]+/;function kh(n){let e=n.match(XC);return e?e[0]:""}var ZC=/^[^\/()?;=#]+/;function eA(n){let e=n.match(ZC);return e?e[0]:""}var tA=/^[^=?&#]+/;function nA(n){let e=n.match(tA);return e?e[0]:""}var iA=/^[^&#]+/;function rA(n){let e=n.match(iA);return e?e[0]:""}var Gh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[le]=new Ce(e,t)),i}parseSegment(){let e=kh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(e),new Ki(Jc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=eA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=kh(this.remaining);r&&(i=r,this.capture(i))}e[Jc(t)]=Jc(i)}parseQueryParam(e){let t=nA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=rA(this.remaining);s&&(i=s,this.capture(i))}let r=lv(t),o=lv(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=kh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ee(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ee(4011,!1)}};function Av(n){return n.segments.length>0?new Ce([],{[le]:n}):n}function Sv(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=Sv(r);if(i===le&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Ce(n.segments,e);return oA(t)}function oA(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Qi(n){return n instanceof Bn}function sA(n,e,t=null,i=null){let r=Dv(n);return Rv(r,e,t,i)}function Dv(n){let e;function t(o){let s={};for(let l of o.children){let d=t(l);s[l.outlet]=d}let c=new Ce(o.url,s);return o===n&&(e=c),c}let i=t(n.root),r=Av(i);return e??r}function Rv(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Fh(r,r,r,t,i);let o=aA(e);if(o.toRoot())return Fh(r,r,new Ce([],{}),t,i);let s=cA(o,r,n),c=s.processChildren?Ms(s.segmentGroup,s.index,o.commands):Ov(s.segmentGroup,s.index,o.commands);return Fh(r,s.segmentGroup,c,t,i)}function Qc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ks(n){return typeof n=="object"&&n!=null&&n.outlets}function Fh(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let s;n===e?s=t:s=xv(n,e,t);let c=Av(Sv(s));return new Bn(c,o,r)}function xv(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=xv(o,e,t)}),new Ce(n.segments,i)}var Yc=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Qc(i[0]))throw new Ee(4003,!1);let r=i.find(ks);if(r&&r!==vv(i))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function aA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Yc(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Yc(t,e,i)}var $r=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function cA(n,e,t){if(n.isAbsolute)return new $r(e,!0,0);if(!t)return new $r(e,!1,NaN);if(t.parent===null)return new $r(t,!0,0);let i=Qc(n.commands[0])?0:1,r=t.segments.length-1+i;return lA(t,r,n.numberOfDoubleDots)}function lA(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ee(4005,!1);r=i.segments.length}return new $r(i,!1,r-o)}function uA(n){return ks(n[0])?n[0].outlets:{[le]:n}}function Ov(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Ms(n,e,t);let i=dA(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,i.pathIndex),{});return o.children[le]=new Ce(n.segments.slice(i.pathIndex),n.children),Ms(o,0,r)}else return i.match&&r.length===0?new Ce(n.segments,{}):i.match&&!n.hasChildren()?$h(n,e,t):i.match?Ms(n,0,r):$h(n,e,t)}function Ms(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let i=uA(t),r={};if(Object.keys(i).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Ms(n.children[le],e,t);return new Ce(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ov(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Ce(n.segments,r)}}function dA(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],c=t[i];if(ks(c))break;let l=`${c}`,d=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!dv(l,d,s))return o;i+=2}else{if(!dv(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function $h(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(ks(o)){let l=hA(o.outlets);return new Ce(i,l)}if(r===0&&Qc(t[0])){let l=n.segments[e];i.push(new Ki(l.path,uv(t[0]))),r++;continue}let s=ks(o)?o.outlets[le]:`${o}`,c=r<t.length-1?t[r+1]:null;s&&c&&Qc(c)?(i.push(new Ki(s,uv(c))),r+=2):(i.push(new Ki(s,{})),r++)}return new Ce(i,{})}function hA(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=$h(new Ce([],{}),0,i))}),e}function uv(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function dv(n,e,t){return n==t.path&&hn(e,t.parameters)}var Ps="imperative",Xe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Xe||{}),Bt=class{constructor(e,t){this.id=e,this.url=t}},Kr=class extends Bt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Xe.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fn=class extends Bt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ot||{}),Xc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Xc||{}),Ln=class extends Bt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mi=class extends Bt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Xe.NavigationSkipped}},Fs=class extends Bt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zc=class extends Bt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zh=class extends Bt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class extends Bt{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qh=class extends Bt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wh=class extends Bt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kh=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jh=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qh=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yh=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xh=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zh=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},el=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=Xe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Vs=class{},Jr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function fA(n,e){return n.providers&&!n._injector&&(n._injector=sh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kt(n){return n.outlet||le}function pA(n,e){let t=n.filter(i=>Kt(i)===e);return t.push(...n.filter(i=>Kt(i)!==e)),t}function zs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ef=class{get injector(){return zs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Hs(this.rootInjector),this.attachRef=null}},Hs=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new ef(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(j(nn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=tf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return nf(e,this._root).map(t=>t.value)}};function tf(n,e){if(n===e.value)return e;for(let t of e.children){let i=tf(n,t);if(i)return i}return null}function nf(n,e){if(n===e.value)return[e];for(let t of e.children){let i=nf(n,t);if(i.length)return i.unshift(e),i}return[]}var xt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Gr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var nl=class extends tl{constructor(e,t){super(e),this.snapshot=t,hf(this,e)}toString(){return this.snapshot.toString()}};function Mv(n){let e=mA(n),t=new Be([new Ki("",{})]),i=new Be({}),r=new Be({}),o=new Be({}),s=new Be(""),c=new Yi(t,i,o,s,r,le,n,e.root);return c.snapshot=e.root,new nl(new xt(c,[]),e)}function mA(n){let e={},t={},i={},r="",o=new zr([],e,i,r,t,le,n,null,{});return new rl("",new xt(o,[]))}var Yi=class{constructor(e,t,i,r,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(d=>d[Gs]))??Q(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>qr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>qr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function il(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),r?.data),n._resolvedData)}:i={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},r&&Nv(r)&&(i.resolve[Gs]=r.title),i}var zr=class{get title(){return this.data?.[Gs]}constructor(e,t,i,r,o,s,c,l,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rl=class extends tl{constructor(e,t){super(t),this.url=e,hf(this,t)}toString(){return Pv(this._root)}};function hf(n,e){e.value._routerState=n,e.children.forEach(t=>hf(n,t))}function Pv(n){let e=n.children.length>0?` { ${n.children.map(Pv).join(", ")} } `:"";return`${n.value}${e}`}function Vh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),hn(e.params,t.params)||n.paramsSubject.next(t.params),GC(e.url,t.url)||n.urlSubject.next(t.url),hn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rf(n,e){let t=hn(n.params,e.params)&&qC(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||rf(n.parent,e.parent))}function Nv(n){return typeof n.title=="string"||n.title===null}var qs=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=S(Hs),this.location=S(oh),this.changeDetector=S(Fn),this.inputBinder=S(ll,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new of(t,c,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_e({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rn]})}}return n})(),of=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Yi?this.route:e===Hs?this.childContexts:this.parent.get(e,t)}},ll=new Y(""),hv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Rn([i.queryParams,i.params,i.data]).pipe(lt(([o,s,c],l)=>(c=F(F(F({},o),s),c),l===0?Q(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=T0(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of s.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function gA(n,e,t){let i=Ls(n,e._root,t?t._root:void 0);return new nl(i,e)}function Ls(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=_A(n,e,t);return new xt(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ls(n,c)),s}}let i=bA(e.value),r=e.children.map(o=>Ls(n,o));return new xt(i,r)}}function _A(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ls(n,i,r);return Ls(n,i)})}function bA(n){return new Yi(new Be(n.url),new Be(n.params),new Be(n.queryParams),new Be(n.fragment),new Be(n.data),n.outlet,n.component,n)}var Bs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},kv="ngNavigationCancelingError";function ol(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Fv(!1,Ot.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Fv(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[kv]=!0,t.cancellationCode=e,t}function vA(n){return Vv(n)&&Qi(n.url)}function Vv(n){return!!n&&n[kv]}var yA=(n,e,t,i)=>oe(r=>(new sf(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),sf=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Vh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Gr(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Gr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Gr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Gr(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Zh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Yh(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Vh(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Vh(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},sl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hr=class{constructor(e,t){this.component=e,this.route=t}};function wA(n,e,t){let i=n._root,r=e?e._root:null;return xs(i,r,t,[i.value])}function IA(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Kb(n)?n:e.get(n):i}function xs(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gr(e);return n.children.forEach(s=>{TA(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ns(c,t.getContext(s),r)),r}function TA(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=EA(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new sl(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xs(n,e,c?c.children:null,i,r):xs(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Hr(c.outlet.component,s))}else s&&Ns(e,c,r),r.canActivateChecks.push(new sl(i)),o.component?xs(n,null,c?c.children:null,i,r):xs(n,null,t,i,r);return r}function EA(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ji(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ji(n.url,e.url)||!hn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rf(n,e)||!hn(n.queryParams,e.queryParams);case"paramsChange":default:return!rf(n,e)}}function Ns(n,e,t){let i=Gr(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Ns(s,e.children.getContext(o),t):Ns(s,null,t):Ns(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hr(e.outlet.component,r)):t.canDeactivateChecks.push(new Hr(null,r)):t.canDeactivateChecks.push(new Hr(null,r))}function Ws(n){return typeof n=="function"}function CA(n){return typeof n=="boolean"}function AA(n){return n&&Ws(n.canLoad)}function SA(n){return n&&Ws(n.canActivate)}function DA(n){return n&&Ws(n.canActivateChild)}function RA(n){return n&&Ws(n.canDeactivate)}function xA(n){return n&&Ws(n.canMatch)}function Lv(n){return n instanceof Ub||n?.name==="EmptyError"}var qc=Symbol("INITIAL_VALUE");function Qr(){return lt(n=>Rn(n.map(e=>e.pipe(St(1),$i(qc)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===qc)return qc;if(t===!1||OA(t))return t}return!0}),mt(e=>e!==qc),St(1)))}function OA(n){return Qi(n)||n instanceof Bs}function MA(n,e){return wt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Q(de(F({},t),{guardsResult:!0})):PA(s,i,r,n).pipe(wt(c=>c&&CA(c)?NA(i,o,n,e):Q(c)),oe(c=>de(F({},t),{guardsResult:c})))})}function PA(n,e,t,i){return nt(n).pipe(wt(r=>BA(r.component,r.route,t,e,i)),ai(r=>r!==!0,!0))}function NA(n,e,t,i){return nt(e).pipe(oi(r=>mc(FA(r.route.parent,i),kA(r.route,i),LA(n,r.path,t),VA(n,r.route,t))),ai(r=>r!==!0,!0))}function kA(n,e){return n!==null&&e&&e(new Xh(n)),Q(!0)}function FA(n,e){return n!==null&&e&&e(new Qh(n)),Q(!0)}function VA(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Q(!0);let r=i.map(o=>Kd(()=>{let s=zs(e)??t,c=Yr(o,s),l=SA(c)?c.canActivate(e,n):Vt(s,()=>c(e,n));return gi(l).pipe(ai())}));return Q(r).pipe(Qr())}function LA(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>IA(s)).filter(s=>s!==null).map(s=>Kd(()=>{let c=s.guards.map(l=>{let d=zs(s.node)??t,f=Yr(l,d),m=DA(f)?f.canActivateChild(i,n):Vt(d,()=>f(i,n));return gi(m).pipe(ai())});return Q(c).pipe(Qr())}));return Q(o).pipe(Qr())}function BA(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(c=>{let l=zs(e)??r,d=Yr(c,l),f=RA(d)?d.canDeactivate(n,e,t,i):Vt(l,()=>d(n,e,t,i));return gi(f).pipe(ai())});return Q(s).pipe(Qr())}function UA(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Q(!0);let o=r.map(s=>{let c=Yr(s,n),l=AA(c)?c.canLoad(e,t):Vt(n,()=>c(e,t));return gi(l)});return Q(o).pipe(Qr(),Bv(i))}function Bv(n){return Fb(Ue(e=>{if(typeof e!="boolean")throw ol(n,e)}),oe(e=>e===!0))}function jA(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Q(!0);let o=r.map(s=>{let c=Yr(s,n),l=xA(c)?c.canMatch(e,t):Vt(n,()=>c(e,t));return gi(l)});return Q(o).pipe(Qr(),Bv(i))}var Us=class{constructor(e){this.segmentGroup=e||null}},js=class extends Error{constructor(e){super(),this.urlTree=e}};function jr(n){return as(new Us(n))}function GA(n){return as(new Ee(4e3,!1))}function $A(n){return as(Fv(!1,Ot.GuardRejected))}var af=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Q(i);if(r.numberOfChildren>1||!r.children[le])return GA(`${e.redirectTo}`);r=r.children[le]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let c=t,{queryParams:l,fragment:d,routeConfig:f,url:m,outlet:y,params:A,data:k,title:P}=r,O=Vt(o,()=>c({params:A,data:k,queryParams:l,fragment:d,routeConfig:f,url:m,outlet:y,title:P}));if(O instanceof Bn)throw new js(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new js(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Bn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);i[r]=t[c]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,i,r)}),new Ce(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ee(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},cf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zA(n,e,t,i,r){let o=Uv(n,e,t);return o.matched?(i=fA(e,i),jA(i,e,t,r).pipe(oe(s=>s===!0?o:F({},cf)))):Q(o)}function Uv(n,e,t){if(e.path==="**")return HA(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},cf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||jC)(t,n,e);if(!r)return F({},cf);let o={};Object.entries(r.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=r.consumed.length>0?F(F({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function HA(n){return{matched:!0,parameters:n.length>0?vv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function fv(n,e,t,i){return t.length>0&&KA(n,t,i)?{segmentGroup:new Ce(e,WA(i,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&JA(n,t,i)?{segmentGroup:new Ce(n.segments,qA(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function qA(n,e,t,i){let r={};for(let o of t)if(ul(n,e,o)&&!i[Kt(o)]){let s=new Ce([],{});r[Kt(o)]=s}return F(F({},i),r)}function WA(n,e){let t={};t[le]=e;for(let i of n)if(i.path===""&&Kt(i)!==le){let r=new Ce([],{});t[Kt(i)]=r}return t}function KA(n,e,t){return t.some(i=>ul(n,e,i)&&Kt(i)!==le)}function JA(n,e,t){return t.some(i=>ul(n,e,i))}function ul(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function QA(n,e,t){return e.length===0&&!n.children[t]}var lf=class{};function YA(n,e,t,i,r,o,s="emptyOnly"){return new uf(n,e,t,i,r,s,o).recognize()}var XA=31,uf=class{constructor(e,t,i,r,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new af(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=fv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:i})=>{let r=new xt(i,t),o=new rl("",r),s=sA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new zr([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(oe(i=>({children:i,rootSnapshot:t})),Mr(i=>{if(i instanceof js)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Us?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(oe(s=>s instanceof xt?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return nt(o).pipe(oi(s=>{let c=i.children[s],l=pA(t,s);return this.processSegmentGroup(e,l,c,s,r)}),Wb((s,c)=>(s.push(...c),s)),Yd(null),qb(),wt(s=>{if(s===null)return jr(i);let c=jv(s);return ZA(c),Q(c)}))}processSegment(e,t,i,r,o,s,c){return nt(t).pipe(oi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,c).pipe(Mr(d=>{if(d instanceof Us)return Q(null);throw d}))),ai(l=>!!l),Mr(l=>{if(Lv(l))return QA(i,r,o)?Q(new lf):jr(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,c,l){return Kt(i)!==s&&(s===le||!ul(r,o,i))?jr(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):jr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,c){let{matched:l,parameters:d,consumedSegments:f,positionalParamSegments:m,remainingSegments:y}=Uv(t,r,o);if(!l)return jr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>XA&&(this.allowRedirects=!1));let A=new zr(o,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,pv(r),Kt(r),r.component??r._loadedComponent??null,r,mv(r)),k=il(A,c,this.paramsInheritanceStrategy);A.params=Object.freeze(k.params),A.data=Object.freeze(k.data);let P=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,m,A,e);return this.applyRedirects.lineralizeSegments(r,P).pipe(wt(O=>this.processSegment(e,i,t,O.concat(y),s,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let c=zA(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(lt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(lt(({routes:d})=>{let f=i._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:A}=l,k=new zr(y,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,pv(i),Kt(i),i.component??i._loadedComponent??null,i,mv(i)),P=il(k,s,this.paramsInheritanceStrategy);k.params=Object.freeze(P.params),k.data=Object.freeze(P.data);let{segmentGroup:O,slicedSegments:J}=fv(t,y,A,d);if(J.length===0&&O.hasChildren())return this.processChildren(f,d,O,k).pipe(oe(q=>new xt(k,q)));if(d.length===0&&J.length===0)return Q(new xt(k,[]));let ne=Kt(i)===o;return this.processSegment(f,d,O,J,ne?le:o,!0,k).pipe(oe(q=>new xt(k,q instanceof xt?[q]:[])))}))):jr(t)))}getChildConfig(e,t,i){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):UA(e,t,i,this.urlSerializer).pipe(wt(r=>r?this.configLoader.loadChildren(e,t).pipe(Ue(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):$A(t))):Q({routes:[],injector:e})}};function ZA(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function eS(n){let e=n.value.routeConfig;return e&&e.path===""}function jv(n){let e=[],t=new Set;for(let i of n){if(!eS(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=jv(i.children);e.push(new xt(i.value,r))}return e.filter(i=>!t.has(i))}function pv(n){return n.data||{}}function mv(n){return n.resolve||{}}function tS(n,e,t,i,r,o){return wt(s=>YA(n,e,t,i,s.extractedUrl,r,o).pipe(oe(({state:c,tree:l})=>de(F({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function nS(n,e){return wt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Q(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let d of Gv(l))s.add(d);let c=0;return nt(s).pipe(oi(l=>o.has(l)?iS(l,i,n,e):(l.data=il(l,l.parent,n).resolve,Q(void 0))),Ue(()=>c++),Xd(1),wt(l=>c===s.size?Q(t):tn))})}function Gv(n){let e=n.children.map(t=>Gv(t)).flat();return[n,...e]}function iS(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!Nv(r)&&(o[Gs]=r.title),rS(o,n,e,i).pipe(oe(s=>(n._resolvedData=s,n.data=il(n,n.parent,t).resolve,null)))}function rS(n,e,t,i){let r=Uh(n);if(r.length===0)return Q({});let o={};return nt(r).pipe(wt(s=>oS(n[s],e,t,i).pipe(ai(),Ue(c=>{if(c instanceof Bs)throw ol(new Wr,c);o[s]=c}))),Xd(1),zb(o),Mr(s=>Lv(s)?tn:as(s)))}function oS(n,e,t,i){let r=zs(e)??i,o=Yr(n,r),s=o.resolve?o.resolve(e,t):Vt(r,()=>o(e,t));return gi(s)}function Lh(n){return lt(e=>{let t=n(e);return t?nt(t).pipe(oe(()=>e)):Q(e)})}var $v=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===le);return i}getResolvedTitleForRoute(t){return t.data[Gs]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:()=>S(sS),providedIn:"root"})}}return n})(),sS=(()=>{class n extends $v{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(j(av))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ks=new Y("",{providedIn:"root",factory:()=>({})}),aS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ue({type:n,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,r){i&1&&K(0,"router-outlet")},dependencies:[qs],encapsulation:2})}}return n})();function ff(n){let e=n.children&&n.children.map(ff),t=e?de(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=aS),t}var al=new Y(""),pf=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=S(Sc)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=gi(t.loadComponent()).pipe(oe(zv),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),si(()=>{this.componentLoaders.delete(t)})),r=new $d(i,()=>new ye).pipe(Gd());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=cS(i,this.compiler,t,this.onLoadEndListener).pipe(si(()=>{this.childrenLoaders.delete(i)})),s=new $d(o,()=>new ye).pipe(Gd());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cS(n,e,t,i){return gi(n.loadChildren()).pipe(oe(zv),wt(r=>r instanceof u0||Array.isArray(r)?Q(r):nt(e.compileModuleAsync(r))),oe(r=>{i&&i(n);let o,s,c=!1;return Array.isArray(r)?(s=r,c=!0):(o=r.create(t).injector,s=o.get(al,[],{optional:!0,self:!0}).flat()),{routes:s.map(ff),injector:o}}))}function lS(n){return n&&typeof n=="object"&&"default"in n}function zv(n){return lS(n)?n.default:n}var mf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:()=>S(uS),providedIn:"root"})}}return n})(),uS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hv=new Y(""),qv=new Y("");function dS(n,e,t){let i=n.get(qv),r=n.get(be);return n.get(ae).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),c=r.startViewTransition(()=>(o(),hS(n))),{onViewTransitionCreated:l}=i;return l&&Vt(n,()=>l({transition:c,from:e,to:t})),s})}function hS(n){return new Promise(e=>{Lr({read:()=>setTimeout(e)},{injector:n})})}var fS=new Y(""),gf=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ye,this.transitionAbortSubject=new ye,this.configLoader=S(pf),this.environmentInjector=S(nn),this.urlSerializer=S($s),this.rootContexts=S(Hs),this.location=S(vs),this.inputBindingEnabled=S(ll,{optional:!0})!==null,this.titleStrategy=S($v),this.options=S(Ks,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=S(mf),this.createViewTransition=S(Hv,{optional:!0}),this.navigationErrorHandler=S(fS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Kh(r)),i=r=>this.events.next(new Jh(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(de(F(F({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Be({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ps,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),oe(o=>de(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lt(o=>{let s=!1,c=!1;return Q(o).pipe(lt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),tn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?de(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new mi(l.id,this.urlSerializer.serialize(l.rawUrl),m,Xc.IgnoredSameUrlNavigation)),l.resolve(!1),tn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Q(l).pipe(lt(m=>{let y=this.transitions?.getValue();return this.events.next(new Kr(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?tn:Promise.resolve(m)}),tS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=de(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Zc(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:A,restoredState:k,extras:P}=l,O=new Kr(m,this.urlSerializer.serialize(y),A,k);this.events.next(O);let J=Mv(this.rootComponentType).snapshot;return this.currentTransition=o=de(F({},l),{targetSnapshot:J,urlAfterRedirects:y,extras:de(F({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Q(o)}else{let m="";return this.events.next(new mi(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Xc.IgnoredByUrlHandlingStrategy)),l.resolve(!1),tn}}),Ue(l=>{let d=new zh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),oe(l=>(this.currentTransition=o=de(F({},l),{guards:wA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),MA(this.environmentInjector,l=>this.events.next(l)),Ue(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ol(this.urlSerializer,l.guardsResult);let d=new Hh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),mt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ot.GuardRejected),!1)),Lh(l=>{if(l.guards.canActivateChecks.length)return Q(l).pipe(Ue(d=>{let f=new qh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),lt(d=>{let f=!1;return Q(d).pipe(nS(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Ot.NoDataFromResolver)}}))}),Ue(d=>{let f=new Wh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Lh(l=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ue(y=>{f.component=y}),oe(()=>{})));for(let y of f.children)m.push(...d(y));return m};return Rn(d(l.targetSnapshot.root)).pipe(Yd(null),St(1))}),Lh(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?nt(f).pipe(oe(()=>o)):Q(o)}),oe(l=>{let d=gA(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=de(F({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Ue(()=>{this.events.next(new Vs)}),yA(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),St(1),Ue({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Ge(this.transitionAbortSubject.pipe(Ue(l=>{throw l}))),si(()=>{!s&&!c&&this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Mr(l=>{if(c=!0,Vv(l))this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),vA(l)?this.events.next(new Jr(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Fs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=Vt(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Bs){let{message:m,cancellationCode:y}=ol(this.urlSerializer,f);this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new Jr(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let m=t.errorHandler(l);o.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return tn}))}))}cancelNavigationTransition(t,i,r){let o=new Ln(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pS(n){return n!==Ps}var mS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:()=>S(gS),providedIn:"root"})}}return n})(),df=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gS=(()=>{class n extends df{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:()=>S(_S),providedIn:"root"})}}return n})(),_S=(()=>{class n extends Wv{constructor(){super(...arguments),this.location=S(vs),this.urlSerializer=S($s),this.options=S(Ks,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=S(mf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Mv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Kr)this.stateMemento=this.createStateMemento();else if(t instanceof mi)this.rawUrlTree=i.initialUrl;else if(t instanceof Zc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Vs?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Ln&&(t.code===Ot.GuardRejected||t.code===Ot.NoDataFromResolver)?this.restoreHistory(i):t instanceof Fs?this.restoreHistory(i,!0):t instanceof fn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Bn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Os=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Os||{});function Kv(n,e){n.events.pipe(mt(t=>t instanceof fn||t instanceof Ln||t instanceof Fs||t instanceof mi),oe(t=>t instanceof fn||t instanceof mi?Os.COMPLETE:(t instanceof Ln?t.code===Ot.Redirect||t.code===Ot.SupersededByNewNavigation:!1)?Os.REDIRECTING:Os.FAILED),mt(t=>t!==Os.REDIRECTING),St(1)).subscribe(()=>{e()})}function bS(n){throw n}var vS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ct=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=S(Tc),this.stateManager=S(Wv),this.options=S(Ks,{optional:!0})||{},this.pendingTasks=S(hs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=S(gf),this.urlSerializer=S($s),this.location=S(vs),this.urlHandlingStrategy=S(mf),this._events=new ye,this.errorHandler=this.options.errorHandler||bS,this.navigated=!1,this.routeReuseStrategy=S(mS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=S(al,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!S(ll,{optional:!0}),this.eventsSubscription=new jd,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ln&&i.code!==Ot.Redirect&&i.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fn)this.navigated=!0;else if(i instanceof Jr){let s=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=F({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||pS(r.source)},s);this.scheduleNavigation(c,Ps,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}IS(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ps,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=F({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ff),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let y=r?r.snapshot:this.routerState.snapshot.root;m=Dv(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return Rv(m,t,f,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Qi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ps,null,i)}navigate(t,i={skipLocationChange:!1}){return wS(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=F({},vS):i===!1?r=F({},yS):r=i,Qi(t))return cv(this.currentUrlTree,t,r);let o=this.parseUrl(t);return cv(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,d;s?(c=s.resolve,l=s.reject,d=s.promise):d=new Promise((m,y)=>{c=m,l=y});let f=this.pendingTasks.add();return Kv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ee(4008,!1)}function IS(n){return!(n instanceof Vs)&&!(n instanceof Jr)}var Jv=(()=>{class n{constructor(t,i,r,o,s,c){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=c,this.href=null,this.onChanges=new ye,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:a0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(G(Ct),G(Yi),th("tabindex"),G(li),G(Me),G(bs))}}static{this.\u0275dir=_e({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&X("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&We("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Et],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Et],replaceUrl:[2,"replaceUrl","replaceUrl",Et],routerLink:"routerLink"},standalone:!0,features:[Vr,rn]})}}return n})();var cl=class{};var TS=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(mt(t=>t instanceof fn),oi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=sh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,c=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(c,o.children??o._loadedRoutes))}return nt(r).pipe(Wd())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Q(null);let o=r.pipe(wt(s=>s===null?Q(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return nt([o,s]).pipe(Wd())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(j(Ct),j(Sc),j(nn),j(cl),j(pf))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qv=new Y(""),ES=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof mi&&t.code===Xc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof el&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new el(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){kr()}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function CS(n){return n.routerState.root}function Js(n,e){return{\u0275kind:n,\u0275providers:e}}function AS(){let n=S(Fe);return e=>{let t=n.get(un);if(e!==t.components[0])return;let i=n.get(Ct),r=n.get(Yv);n.get(_f)===1&&i.initialNavigation(),n.get(Xv,null,eh.Optional)?.setUpPreloading(),n.get(Qv,null,eh.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Yv=new Y("",{factory:()=>new ye}),_f=new Y("",{providedIn:"root",factory:()=>1});function SS(){return Js(2,[{provide:_f,useValue:0},{provide:mh,multi:!0,deps:[Fe],useFactory:e=>{let t=e.get(A0,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Ct),o=e.get(Yv);Kv(r,()=>{i(!0)}),e.get(gf).afterPreactivation=()=>(i(!0),o.closed?Q(void 0):o),r.initialNavigation()}))}}])}function DS(){return Js(3,[{provide:mh,multi:!0,useFactory:()=>{let e=S(Ct);return()=>{e.setUpLocationChangeListener()}}},{provide:_f,useValue:2}])}var Xv=new Y("");function RS(n){return Js(0,[{provide:Xv,useExisting:TS},{provide:cl,useExisting:n}])}function xS(){return Js(8,[hv,{provide:ll,useExisting:hv}])}function OS(n){let e=[{provide:Hv,useValue:dS},{provide:qv,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return Js(9,e)}var gv=new Y("ROUTER_FORROOT_GUARD"),MS=[vs,{provide:$s,useClass:Wr},Ct,Hs,{provide:Yi,useFactory:CS,deps:[Ct]},pf,[]],bf=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[MS,[],{provide:al,multi:!0,useValue:t},{provide:gv,useFactory:FS,deps:[[Ct,new gt,new Jb]]},{provide:Ks,useValue:i||{}},i?.useHash?NS():kS(),PS(),i?.preloadingStrategy?RS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?VS(i):[],i?.bindToComponentInputs?xS().\u0275providers:[],i?.enableViewTransitions?OS().\u0275providers:[],LS()]}}static forChild(t){return{ngModule:n,providers:[{provide:al,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(j(gv,8))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function PS(){return{provide:Qv,useFactory:()=>{let n=S(N0),e=S(ae),t=S(Ks),i=S(gf),r=S($s);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ES(r,i,n,e,t)}}}function NS(){return{provide:bs,useClass:D0}}function kS(){return{provide:bs,useClass:S0}}function FS(n){return"guarded"}function VS(n){return[n.initialNavigation==="disabled"?DS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?SS().\u0275providers:[]]}var _v=new Y("");function LS(){return[{provide:_v,useFactory:AS},{provide:gh,multi:!0,useExisting:_v}]}var ey=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},BS=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],s=n[t++],c=n[t++],l=((r&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],s=r+1<n.length,c=s?n[r+1]:0,l=r+2<n.length,d=l?n[r+2]:0,f=o>>2,m=(o&3)<<4|c>>4,y=(c&15)<<2|d>>6,A=d&63;l||(A=64,s||(y=64)),i.push(t[f],t[m],t[y],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ey(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let d=r<n.length?t[n.charAt(r)]:64;++r;let m=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||d==null||m==null)throw new wf;let y=o<<2|c>>4;if(i.push(y),d!==64){let A=c<<4&240|d>>2;if(i.push(A),m!==64){let k=d<<6&192|m;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},US=function(n){let e=ey(n);return ty.encodeByteArray(e,!0)},Qs=function(n){return US(n).replace(/\./g,"")},Tf=function(n){try{return ty.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GS=()=>jS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Tf(n[1]);return e&&JSON.parse(e)},hl=()=>{try{return GS()||$S()||zS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ef=n=>{var e,t;return(t=(e=hl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ny=n=>{let e=Ef(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Cf=()=>{var n;return(n=hl())===null||n===void 0?void 0:n.config},Af=n=>{var e;return(e=hl())===null||e===void 0?void 0:e[`_${n}`]};var dl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function iy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qs(JSON.stringify(t)),Qs(JSON.stringify(s)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ry(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function HS(){var n;let e=(n=hl())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ay(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cy(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ly(){return!HS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sf(){try{return typeof indexedDB=="object"}catch{return!1}}function uy(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var qS="FirebaseError",Mt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=qS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?WS(o,i):"Error",c=`${this.serviceName}: ${s} (${r}).`;return new Mt(r,c,i)}};function WS(n,e){return n.replace(KS,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var KS=/\{\$([^}]+)}/g;function dy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xi(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],s=e[r];if(Zv(o)&&Zv(s)){if(!Xi(o,s))return!1}else if(o!==s)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Zv(n){return n!==null&&typeof n=="object"}function Ys(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Zr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hy(n,e){let t=new If(n,e);return t.subscribe.bind(t)}var If=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");JS(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=yf),r.error===void 0&&(r.error=yf),r.complete===void 0&&(r.complete=yf);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function JS(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yf(){}var DV=4*60*60*1e3;function Je(n){return n&&n._delegate?n._delegate:n}var Ut=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zi="[DEFAULT]";var Df=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new dl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YS(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);i===c&&s.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function QS(n){return n===Zi?void 0:n}function YS(n){return n.instantiationMode==="EAGER"}var fl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Df(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var XS=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),ZS={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},eD=pe.INFO,tD={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},nD=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=tD[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_i=class{constructor(e){this.name=e,this._logLevel=eD,this._logHandler=nD,this._userLogHandler=null,XS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var iD=(n,e)=>e.some(t=>n instanceof t),fy,py;function rD(){return fy||(fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oD(){return py||(py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var my=new WeakMap,xf=new WeakMap,gy=new WeakMap,Rf=new WeakMap,Mf=new WeakMap;function sD(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(pn(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&my.set(t,n)}).catch(()=>{}),Mf.set(e,n),e}function aD(n){if(xf.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});xf.set(n,e)}var Of={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _y(n){Of=n(Of)}function cD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(pl(this),e,...t);return gy.set(i,e.sort?e.sort():[e]),pn(i)}:oD().includes(n)?function(...e){return n.apply(pl(this),e),pn(my.get(this))}:function(...e){return pn(n.apply(pl(this),e))}}function lD(n){return typeof n=="function"?cD(n):(n instanceof IDBTransaction&&aD(n),iD(n,rD())?new Proxy(n,Of):n)}function pn(n){if(n instanceof IDBRequest)return sD(n);if(Rf.has(n))return Rf.get(n);let e=lD(n);return e!==n&&(Rf.set(n,e),Mf.set(e,n)),e}var pl=n=>Mf.get(n);function vy(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let s=indexedDB.open(n,e),c=pn(s);return i&&s.addEventListener("upgradeneeded",l=>{i(pn(s.result),l.oldVersion,l.newVersion,pn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),r&&l.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var uD=["get","getKey","getAll","getAllKeys","count"],dD=["put","add","delete","clear"],Pf=new Map;function by(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pf.get(e))return Pf.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=dD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||uD.includes(t)))return;let o=function(s,...c){return g(this,null,function*(){let l=this.transaction(s,r?"readwrite":"readonly"),d=l.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),r&&l.done]))[0]})};return Pf.set(e,o),o}_y(n=>de(F({},n),{get:(e,t,i)=>by(e,t)||n.get(e,t,i),has:(e,t)=>!!by(e,t)||n.has(e,t)}));var kf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hD(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function hD(n){let e=n.getComponent();return e?.type==="VERSION"}var Ff="@firebase/app",yy="0.10.13";var jn=new _i("@firebase/app"),fD="@firebase/app-compat",pD="@firebase/analytics-compat",mD="@firebase/analytics",gD="@firebase/app-check-compat",_D="@firebase/app-check",bD="@firebase/auth",vD="@firebase/auth-compat",yD="@firebase/database",wD="@firebase/data-connect",ID="@firebase/database-compat",TD="@firebase/functions",ED="@firebase/functions-compat",CD="@firebase/installations",AD="@firebase/installations-compat",SD="@firebase/messaging",DD="@firebase/messaging-compat",RD="@firebase/performance",xD="@firebase/performance-compat",OD="@firebase/remote-config",MD="@firebase/remote-config-compat",PD="@firebase/storage",ND="@firebase/storage-compat",kD="@firebase/firestore",FD="@firebase/vertexai-preview",VD="@firebase/firestore-compat",LD="firebase",BD="10.14.1";var Vf="[DEFAULT]",UD={[Ff]:"fire-core",[fD]:"fire-core-compat",[mD]:"fire-analytics",[pD]:"fire-analytics-compat",[_D]:"fire-app-check",[gD]:"fire-app-check-compat",[bD]:"fire-auth",[vD]:"fire-auth-compat",[yD]:"fire-rtdb",[wD]:"fire-data-connect",[ID]:"fire-rtdb-compat",[TD]:"fire-fn",[ED]:"fire-fn-compat",[CD]:"fire-iid",[AD]:"fire-iid-compat",[SD]:"fire-fcm",[DD]:"fire-fcm-compat",[RD]:"fire-perf",[xD]:"fire-perf-compat",[OD]:"fire-rc",[MD]:"fire-rc-compat",[PD]:"fire-gcs",[ND]:"fire-gcs-compat",[kD]:"fire-fst",[VD]:"fire-fst-compat",[FD]:"fire-vertex","fire-js":"fire-js",[LD]:"fire-js-all"};var Xs=new Map,jD=new Map,Lf=new Map;function wy(n,e){try{n.container.addComponent(e)}catch(t){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vi(n){let e=n.name;if(Lf.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;Lf.set(e,n);for(let t of Xs.values())wy(t,n);for(let t of jD.values())wy(t,n);return!0}function ea(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jt(n){return n.settings!==void 0}var GD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Un("app","Firebase",GD);var Bf=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}};var yi=BD;function Gf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Vf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw bi.create("bad-app-name",{appName:String(r)});if(t||(t=Cf()),!t)throw bi.create("no-options");let o=Xs.get(r);if(o){if(Xi(t,o.options)&&Xi(i,o.config))return o;throw bi.create("duplicate-app",{appName:r})}let s=new fl(r);for(let l of Lf.values())s.addComponent(l);let c=new Bf(t,i,s);return Xs.set(r,c),c}function eo(n=Vf){let e=Xs.get(n);if(!e&&n===Vf&&Cf())return Gf();if(!e)throw bi.create("no-app",{appName:n});return e}function ml(){return Array.from(Xs.values())}function Qe(n,e,t){var i;let r=(i=UD[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(c.join(" "));return}vi(new Ut(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var $D="firebase-heartbeat-database",zD=1,Zs="firebase-heartbeat-store",Nf=null;function Cy(){return Nf||(Nf=vy($D,zD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zs)}catch(t){console.warn(t)}}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),Nf}function HD(n){return g(this,null,function*(){try{let t=(yield Cy()).transaction(Zs),i=yield t.objectStore(Zs).get(Ay(n));return yield t.done,i}catch(e){if(e instanceof Mt)jn.warn(e.message);else{let t=bi.create("idb-get",{originalErrorMessage:e?.message});jn.warn(t.message)}}})}function Iy(n,e){return g(this,null,function*(){try{let i=(yield Cy()).transaction(Zs,"readwrite");yield i.objectStore(Zs).put(e,Ay(n)),yield i.done}catch(t){if(t instanceof Mt)jn.warn(t.message);else{let i=bi.create("idb-set",{originalErrorMessage:t?.message});jn.warn(i.message)}}})}function Ay(n){return`${n.name}!${n.options.appId}`}var qD=1024,WD=30*24*60*60*1e3,Uf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jf(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return g(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ty();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=WD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){jn.warn(i)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ty(),{heartbeatsToSend:i,unsentEntries:r}=KD(this._heartbeatsCache.heartbeats),o=Qs(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return jn.warn(t),""}})}};function Ty(){return new Date().toISOString().substring(0,10)}function KD(n,e=qD){let t=[],i=n.slice();for(let r of n){let o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),Ey(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ey(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var jf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Sf()?uy().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Ey(n){return Qs(JSON.stringify({version:2,heartbeats:n})).length}function JD(n){vi(new Ut("platform-logger",e=>new kf(e),"PRIVATE")),vi(new Ut("heartbeat",e=>new Uf(e),"PRIVATE")),Qe(Ff,yy,n),Qe(Ff,yy,"esm2017"),Qe("fire-js","")}JD("");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dy={};var wi,$f;(function(){var n;function e(I,_){function v(){}v.prototype=_.prototype,I.D=_.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(w,T,C){for(var b=Array(arguments.length-2),An=2;An<arguments.length;An++)b[An-2]=arguments[An];return _.prototype[T].apply(w,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,v){v||(v=0);var w=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)w[T]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(T=0;16>T;++T)w[T]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=I.g[0],v=I.g[1],T=I.g[2];var C=I.g[3],b=_+(C^v&(T^C))+w[0]+3614090360&4294967295;_=v+(b<<7&4294967295|b>>>25),b=C+(T^_&(v^T))+w[1]+3905402710&4294967295,C=_+(b<<12&4294967295|b>>>20),b=T+(v^C&(_^v))+w[2]+606105819&4294967295,T=C+(b<<17&4294967295|b>>>15),b=v+(_^T&(C^_))+w[3]+3250441966&4294967295,v=T+(b<<22&4294967295|b>>>10),b=_+(C^v&(T^C))+w[4]+4118548399&4294967295,_=v+(b<<7&4294967295|b>>>25),b=C+(T^_&(v^T))+w[5]+1200080426&4294967295,C=_+(b<<12&4294967295|b>>>20),b=T+(v^C&(_^v))+w[6]+2821735955&4294967295,T=C+(b<<17&4294967295|b>>>15),b=v+(_^T&(C^_))+w[7]+4249261313&4294967295,v=T+(b<<22&4294967295|b>>>10),b=_+(C^v&(T^C))+w[8]+1770035416&4294967295,_=v+(b<<7&4294967295|b>>>25),b=C+(T^_&(v^T))+w[9]+2336552879&4294967295,C=_+(b<<12&4294967295|b>>>20),b=T+(v^C&(_^v))+w[10]+4294925233&4294967295,T=C+(b<<17&4294967295|b>>>15),b=v+(_^T&(C^_))+w[11]+2304563134&4294967295,v=T+(b<<22&4294967295|b>>>10),b=_+(C^v&(T^C))+w[12]+1804603682&4294967295,_=v+(b<<7&4294967295|b>>>25),b=C+(T^_&(v^T))+w[13]+4254626195&4294967295,C=_+(b<<12&4294967295|b>>>20),b=T+(v^C&(_^v))+w[14]+2792965006&4294967295,T=C+(b<<17&4294967295|b>>>15),b=v+(_^T&(C^_))+w[15]+1236535329&4294967295,v=T+(b<<22&4294967295|b>>>10),b=_+(T^C&(v^T))+w[1]+4129170786&4294967295,_=v+(b<<5&4294967295|b>>>27),b=C+(v^T&(_^v))+w[6]+3225465664&4294967295,C=_+(b<<9&4294967295|b>>>23),b=T+(_^v&(C^_))+w[11]+643717713&4294967295,T=C+(b<<14&4294967295|b>>>18),b=v+(C^_&(T^C))+w[0]+3921069994&4294967295,v=T+(b<<20&4294967295|b>>>12),b=_+(T^C&(v^T))+w[5]+3593408605&4294967295,_=v+(b<<5&4294967295|b>>>27),b=C+(v^T&(_^v))+w[10]+38016083&4294967295,C=_+(b<<9&4294967295|b>>>23),b=T+(_^v&(C^_))+w[15]+3634488961&4294967295,T=C+(b<<14&4294967295|b>>>18),b=v+(C^_&(T^C))+w[4]+3889429448&4294967295,v=T+(b<<20&4294967295|b>>>12),b=_+(T^C&(v^T))+w[9]+568446438&4294967295,_=v+(b<<5&4294967295|b>>>27),b=C+(v^T&(_^v))+w[14]+3275163606&4294967295,C=_+(b<<9&4294967295|b>>>23),b=T+(_^v&(C^_))+w[3]+4107603335&4294967295,T=C+(b<<14&4294967295|b>>>18),b=v+(C^_&(T^C))+w[8]+1163531501&4294967295,v=T+(b<<20&4294967295|b>>>12),b=_+(T^C&(v^T))+w[13]+2850285829&4294967295,_=v+(b<<5&4294967295|b>>>27),b=C+(v^T&(_^v))+w[2]+4243563512&4294967295,C=_+(b<<9&4294967295|b>>>23),b=T+(_^v&(C^_))+w[7]+1735328473&4294967295,T=C+(b<<14&4294967295|b>>>18),b=v+(C^_&(T^C))+w[12]+2368359562&4294967295,v=T+(b<<20&4294967295|b>>>12),b=_+(v^T^C)+w[5]+4294588738&4294967295,_=v+(b<<4&4294967295|b>>>28),b=C+(_^v^T)+w[8]+2272392833&4294967295,C=_+(b<<11&4294967295|b>>>21),b=T+(C^_^v)+w[11]+1839030562&4294967295,T=C+(b<<16&4294967295|b>>>16),b=v+(T^C^_)+w[14]+4259657740&4294967295,v=T+(b<<23&4294967295|b>>>9),b=_+(v^T^C)+w[1]+2763975236&4294967295,_=v+(b<<4&4294967295|b>>>28),b=C+(_^v^T)+w[4]+1272893353&4294967295,C=_+(b<<11&4294967295|b>>>21),b=T+(C^_^v)+w[7]+4139469664&4294967295,T=C+(b<<16&4294967295|b>>>16),b=v+(T^C^_)+w[10]+3200236656&4294967295,v=T+(b<<23&4294967295|b>>>9),b=_+(v^T^C)+w[13]+681279174&4294967295,_=v+(b<<4&4294967295|b>>>28),b=C+(_^v^T)+w[0]+3936430074&4294967295,C=_+(b<<11&4294967295|b>>>21),b=T+(C^_^v)+w[3]+3572445317&4294967295,T=C+(b<<16&4294967295|b>>>16),b=v+(T^C^_)+w[6]+76029189&4294967295,v=T+(b<<23&4294967295|b>>>9),b=_+(v^T^C)+w[9]+3654602809&4294967295,_=v+(b<<4&4294967295|b>>>28),b=C+(_^v^T)+w[12]+3873151461&4294967295,C=_+(b<<11&4294967295|b>>>21),b=T+(C^_^v)+w[15]+530742520&4294967295,T=C+(b<<16&4294967295|b>>>16),b=v+(T^C^_)+w[2]+3299628645&4294967295,v=T+(b<<23&4294967295|b>>>9),b=_+(T^(v|~C))+w[0]+4096336452&4294967295,_=v+(b<<6&4294967295|b>>>26),b=C+(v^(_|~T))+w[7]+1126891415&4294967295,C=_+(b<<10&4294967295|b>>>22),b=T+(_^(C|~v))+w[14]+2878612391&4294967295,T=C+(b<<15&4294967295|b>>>17),b=v+(C^(T|~_))+w[5]+4237533241&4294967295,v=T+(b<<21&4294967295|b>>>11),b=_+(T^(v|~C))+w[12]+1700485571&4294967295,_=v+(b<<6&4294967295|b>>>26),b=C+(v^(_|~T))+w[3]+2399980690&4294967295,C=_+(b<<10&4294967295|b>>>22),b=T+(_^(C|~v))+w[10]+4293915773&4294967295,T=C+(b<<15&4294967295|b>>>17),b=v+(C^(T|~_))+w[1]+2240044497&4294967295,v=T+(b<<21&4294967295|b>>>11),b=_+(T^(v|~C))+w[8]+1873313359&4294967295,_=v+(b<<6&4294967295|b>>>26),b=C+(v^(_|~T))+w[15]+4264355552&4294967295,C=_+(b<<10&4294967295|b>>>22),b=T+(_^(C|~v))+w[6]+2734768916&4294967295,T=C+(b<<15&4294967295|b>>>17),b=v+(C^(T|~_))+w[13]+1309151649&4294967295,v=T+(b<<21&4294967295|b>>>11),b=_+(T^(v|~C))+w[4]+4149444226&4294967295,_=v+(b<<6&4294967295|b>>>26),b=C+(v^(_|~T))+w[11]+3174756917&4294967295,C=_+(b<<10&4294967295|b>>>22),b=T+(_^(C|~v))+w[2]+718787259&4294967295,T=C+(b<<15&4294967295|b>>>17),b=v+(C^(T|~_))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+C&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var v=_-this.blockSize,w=this.B,T=this.h,C=0;C<_;){if(T==0)for(;C<=v;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<_;)if(w[T++]=I.charCodeAt(C++),T==this.blockSize){r(this,w),T=0;break}}else for(;C<_;)if(w[T++]=I[C++],T==this.blockSize){r(this,w),T=0;break}}this.h=T,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var v=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=v&255,v/=256;for(this.u(I),I=Array(16),_=v=0;4>_;++_)for(var w=0;32>w;w+=8)I[v++]=this.g[_]>>>w&255;return I};function o(I,_){var v=c;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=_(I)}function s(I,_){this.h=_;for(var v=[],w=!0,T=I.length-1;0<=T;T--){var C=I[T]|0;w&&C==_||(v[T]=C,w=!1)}this.g=v}var c={};function l(I){return-128<=I&&128>I?o(I,function(_){return new s([_|0],0>_?-1:0)}):new s([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return O(d(-I));for(var _=[],v=1,w=0;I>=v;w++)_[w]=I/v|0,v*=4294967296;return new s(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return O(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(_,8)),w=m,T=0;T<I.length;T+=8){var C=Math.min(8,I.length-T),b=parseInt(I.substring(T,T+C),_);8>C?(C=d(Math.pow(_,C)),w=w.j(C).add(d(b))):(w=w.j(v),w=w.add(d(b)))}return w}var m=l(0),y=l(1),A=l(16777216);n=s.prototype,n.m=function(){if(P(this))return-O(this).m();for(var I=0,_=1,v=0;v<this.g.length;v++){var w=this.i(v);I+=(0<=w?w:4294967296+w)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(P(this))return"-"+O(this).toString(I);for(var _=d(Math.pow(I,6)),v=this,w="";;){var T=Te(v,_).g;v=J(v,T.j(_));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=T,k(v))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=J(this,I),P(I)?-1:k(I)?0:1};function O(I){for(var _=I.g.length,v=[],w=0;w<_;w++)v[w]=~I.g[w];return new s(v,~I.h).add(y)}n.abs=function(){return P(this)?O(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),v=[],w=0,T=0;T<=_;T++){var C=w+(this.i(T)&65535)+(I.i(T)&65535),b=(C>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);w=b>>>16,C&=65535,b&=65535,v[T]=b<<16|C}return new s(v,v[v.length-1]&-2147483648?-1:0)};function J(I,_){return I.add(O(_))}n.j=function(I){if(k(this)||k(I))return m;if(P(this))return P(I)?O(this).j(O(I)):O(O(this).j(I));if(P(I))return O(this.j(O(I)));if(0>this.l(A)&&0>I.l(A))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,v=[],w=0;w<2*_;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<I.g.length;T++){var C=this.i(w)>>>16,b=this.i(w)&65535,An=I.i(T)>>>16,Go=I.i(T)&65535;v[2*w+2*T]+=b*Go,ne(v,2*w+2*T),v[2*w+2*T+1]+=C*Go,ne(v,2*w+2*T+1),v[2*w+2*T+1]+=b*An,ne(v,2*w+2*T+1),v[2*w+2*T+2]+=C*An,ne(v,2*w+2*T+2)}for(w=0;w<_;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=_;w<2*_;w++)v[w]=0;return new s(v,0)};function ne(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function q(I,_){this.g=I,this.h=_}function Te(I,_){if(k(_))throw Error("division by zero");if(k(I))return new q(m,m);if(P(I))return _=Te(O(I),_),new q(O(_.g),O(_.h));if(P(_))return _=Te(I,O(_)),new q(O(_.g),_.h);if(30<I.g.length){if(P(I)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var v=y,w=_;0>=w.l(I);)v=ke(v),w=ke(w);var T=ge(v,1),C=ge(w,1);for(w=ge(w,2),v=ge(v,2);!k(w);){var b=C.add(w);0>=b.l(I)&&(T=T.add(v),C=b),w=ge(w,1),v=ge(v,1)}return _=J(I,T.j(_)),new q(T,_)}for(T=m;0<=I.l(_);){for(v=Math.max(1,Math.floor(I.m()/_.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=d(v),b=C.j(_);P(b)||0<b.l(I);)v-=w,C=d(v),b=C.j(_);k(C)&&(C=y),T=T.add(C),I=J(I,b)}return new q(T,I)}n.A=function(I){return Te(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)&I.i(w);return new s(v,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)|I.i(w);return new s(v,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)^I.i(w);return new s(v,this.h^I.h)};function ke(I){for(var _=I.g.length+1,v=[],w=0;w<_;w++)v[w]=I.i(w)<<1|I.i(w-1)>>>31;return new s(v,I.h)}function ge(I,_){var v=_>>5;_%=32;for(var w=I.g.length-v,T=[],C=0;C<w;C++)T[C]=0<_?I.i(C+v)>>>_|I.i(C+v+1)<<32-_:I.i(C+v);return new s(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$f=Dy.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,wi=Dy.Integer=s}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};var zf,QD,to,Hf,ta,_l,qf,Wf,Kf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof gl=="object"&&gl];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(a,u){if(u)e:{var h=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var E=a[p];if(!(E in h))break e;h=h[E]}a=a[a.length-1],p=h[a],u=u(p),u!=p&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function o(a,u){a instanceof String&&(a+="");var h=0,p=!1,E={next:function(){if(!p&&h<a.length){var R=h++;return{value:u(R,a[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}r("Array.prototype.values",function(a){return a||function(){return o(this,function(u,h){return h})}});var s=s||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function m(a,u,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,p),a.apply(u,E)}}return function(){return a.apply(u,arguments)}}function y(a,u,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function A(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function k(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,E,R){for(var B=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)B[Se-2]=arguments[Se];return u.prototype[E].apply(p,B)}}function P(a){let u=a.length;if(0<u){let h=Array(u);for(let p=0;p<u;p++)h[p]=a[p];return h}return[]}function O(a,u){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(l(p)){let E=a.length||0,R=p.length||0;a.length=E+R;for(let B=0;B<R;B++)a[E+B]=p[B]}else a.push(p)}}class J{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ne(a){return/^[\s\xa0]*$/.test(a)}function q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Te(a){return Te[" "](a),a}Te[" "]=function(){};var ke=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ge(a,u,h){for(let p in a)u.call(h,a[p],p,a)}function I(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function _(a){let u={};for(let h in a)u[h]=a[h];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let h,p;for(let E=1;E<arguments.length;E++){p=arguments[E];for(h in p)a[h]=p[h];for(let R=0;R<v.length;R++)h=v[R],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function T(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function b(){var a=gd;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class An{constructor(){this.h=this.g=null}add(u,h){let p=Go.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Go=new J(()=>new hE,a=>a.reset());class hE{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let $o,zo=!1,gd=new An,k_=()=>{let a=c.Promise.resolve(void 0);$o=()=>{a.then(fE)}};var fE=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(h){C(h)}var u=Go;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}zo=!1};function ei(){this.s=this.s,this.C=this.C}ei.prototype.s=!1,ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var pE=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Ho(a,u){if(ot.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(ke){e:{try{Te(u.nodeName);var E=!0;break e}catch{}E=!1}E||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:mE[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ho.aa.h.call(this)}}k(Ho,ot);var mE={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var qo="closure_listenable_"+(1e6*Math.random()|0),gE=0;function _E(a,u,h,p,E){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=E,this.key=++gE,this.da=this.fa=!1}function Xa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Za(a){this.src=a,this.g={},this.h=0}Za.prototype.add=function(a,u,h,p,E){var R=a.toString();a=this.g[R],a||(a=this.g[R]=[],this.h++);var B=bd(a,u,p,E);return-1<B?(u=a[B],h||(u.fa=!1)):(u=new _E(u,this.src,R,!!p,E),u.fa=h,a.push(u)),u};function _d(a,u){var h=u.type;if(h in a.g){var p=a.g[h],E=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=E)&&Array.prototype.splice.call(p,E,1),R&&(Xa(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function bd(a,u,h,p){for(var E=0;E<a.length;++E){var R=a[E];if(!R.da&&R.listener==u&&R.capture==!!h&&R.ha==p)return E}return-1}var vd="closure_lm_"+(1e6*Math.random()|0),yd={};function F_(a,u,h,p,E){if(p&&p.once)return L_(a,u,h,p,E);if(Array.isArray(u)){for(var R=0;R<u.length;R++)F_(a,u[R],h,p,E);return null}return h=Ed(h),a&&a[qo]?a.K(u,h,d(p)?!!p.capture:!!p,E):V_(a,u,h,!1,p,E)}function V_(a,u,h,p,E,R){if(!u)throw Error("Invalid event type");var B=d(E)?!!E.capture:!!E,Se=Id(a);if(Se||(a[vd]=Se=new Za(a)),h=Se.add(u,h,p,B,R),h.proxy)return h;if(p=bE(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)pE||(E=B),E===void 0&&(E=!1),a.addEventListener(u.toString(),p,E);else if(a.attachEvent)a.attachEvent(U_(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function bE(){function a(h){return u.call(a.src,a.listener,h)}let u=vE;return a}function L_(a,u,h,p,E){if(Array.isArray(u)){for(var R=0;R<u.length;R++)L_(a,u[R],h,p,E);return null}return h=Ed(h),a&&a[qo]?a.L(u,h,d(p)?!!p.capture:!!p,E):V_(a,u,h,!0,p,E)}function B_(a,u,h,p,E){if(Array.isArray(u))for(var R=0;R<u.length;R++)B_(a,u[R],h,p,E);else p=d(p)?!!p.capture:!!p,h=Ed(h),a&&a[qo]?(a=a.i,u=String(u).toString(),u in a.g&&(R=a.g[u],h=bd(R,h,p,E),-1<h&&(Xa(R[h]),Array.prototype.splice.call(R,h,1),R.length==0&&(delete a.g[u],a.h--)))):a&&(a=Id(a))&&(u=a.g[u.toString()],a=-1,u&&(a=bd(u,h,p,E)),(h=-1<a?u[a]:null)&&wd(h))}function wd(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[qo])_d(u.i,a);else{var h=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(h,p,a.capture):u.detachEvent?u.detachEvent(U_(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=Id(u))?(_d(h,a),h.h==0&&(h.src=null,u[vd]=null)):Xa(a)}}}function U_(a){return a in yd?yd[a]:yd[a]="on"+a}function vE(a,u){if(a.da)a=!0;else{u=new Ho(u,this);var h=a.listener,p=a.ha||a.src;a.fa&&wd(a),a=h.call(p,u)}return a}function Id(a){return a=a[vd],a instanceof Za?a:null}var Td="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ed(a){return typeof a=="function"?a:(a[Td]||(a[Td]=function(u){return a.handleEvent(u)}),a[Td])}function st(){ei.call(this),this.i=new Za(this),this.M=this,this.F=null}k(st,ei),st.prototype[qo]=!0,st.prototype.removeEventListener=function(a,u,h,p){B_(this,a,u,h,p)};function ft(a,u){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new ot(u,a);else if(u instanceof ot)u.target=u.target||a;else{var E=u;u=new ot(p,a),w(u,E)}if(E=!0,h)for(var R=h.length-1;0<=R;R--){var B=u.g=h[R];E=ec(B,p,!0,u)&&E}if(B=u.g=a,E=ec(B,p,!0,u)&&E,E=ec(B,p,!1,u)&&E,h)for(R=0;R<h.length;R++)B=u.g=h[R],E=ec(B,p,!1,u)&&E}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],p=0;p<h.length;p++)Xa(h[p]);delete a.g[u],a.h--}}this.F=null},st.prototype.K=function(a,u,h,p){return this.i.add(String(a),u,!1,h,p)},st.prototype.L=function(a,u,h,p){return this.i.add(String(a),u,!0,h,p)};function ec(a,u,h,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var E=!0,R=0;R<u.length;++R){var B=u[R];if(B&&!B.da&&B.capture==h){var Se=B.listener,tt=B.ha||B.src;B.fa&&_d(a.i,B),E=Se.call(tt,p)!==!1&&E}}return E&&!p.defaultPrevented}function j_(a,u,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function G_(a){a.g=j_(()=>{a.g=null,a.i&&(a.i=!1,G_(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class yE extends ei{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:G_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(a){ei.call(this),this.h=a,this.g={}}k(Wo,ei);var $_=[];function z_(a){ge(a.g,function(u,h){this.g.hasOwnProperty(h)&&wd(u)},a),a.g={}}Wo.prototype.N=function(){Wo.aa.N.call(this),z_(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cd=c.JSON.stringify,wE=c.JSON.parse,IE=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ad(){}Ad.prototype.h=null;function H_(a){return a.h||(a.h=a.i())}function q_(){}var Ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sd(){ot.call(this,"d")}k(Sd,ot);function Dd(){ot.call(this,"c")}k(Dd,ot);var Bi={},W_=null;function tc(){return W_=W_||new st}Bi.La="serverreachability";function K_(a){ot.call(this,Bi.La,a)}k(K_,ot);function Jo(a){let u=tc();ft(u,new K_(u))}Bi.STAT_EVENT="statevent";function J_(a,u){ot.call(this,Bi.STAT_EVENT,a),this.stat=u}k(J_,ot);function pt(a){let u=tc();ft(u,new J_(u,a))}Bi.Ma="timingevent";function Q_(a,u){ot.call(this,Bi.Ma,a),this.size=u}k(Q_,ot);function Qo(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Yo(){this.g=!0}Yo.prototype.xa=function(){this.g=!1};function TE(a,u,h,p,E,R){a.info(function(){if(a.g)if(R)for(var B="",Se=R.split("&"),tt=0;tt<Se.length;tt++){var we=Se[tt].split("=");if(1<we.length){var at=we[0];we=we[1];var ct=at.split("_");B=2<=ct.length&&ct[1]=="type"?B+(at+"="+we+"&"):B+(at+"=redacted&")}}else B=null;else B=R;return"XMLHTTP REQ ("+p+") [attempt "+E+"]: "+u+`
`+h+`
`+B})}function EE(a,u,h,p,E,R,B){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+E+"]: "+u+`
`+h+`
`+R+" "+B})}function Dr(a,u,h,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+AE(a,h)+(p?" "+p:"")})}function CE(a,u){a.info(function(){return"TIMEOUT: "+u})}Yo.prototype.info=function(){};function AE(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var E=p[1];if(Array.isArray(E)&&!(1>E.length)){var R=E[0];if(R!="noop"&&R!="stop"&&R!="close")for(var B=1;B<E.length;B++)E[B]=""}}}}return Cd(h)}catch{return u}}var nc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rd;function ic(){}k(ic,Ad),ic.prototype.g=function(){return new XMLHttpRequest},ic.prototype.i=function(){return{}},Rd=new ic;function ti(a,u,h,p){this.j=a,this.i=u,this.l=h,this.R=p||1,this.U=new Wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new X_}function X_(){this.i=null,this.g="",this.h=!1}var Z_={},xd={};function Od(a,u,h){a.L=1,a.v=ac(Sn(u)),a.m=h,a.P=!0,eb(a,null)}function eb(a,u){a.F=Date.now(),rc(a),a.A=Sn(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),pb(h.i,"t",p),a.C=0,h=a.j.J,a.h=new X_,a.g=Mb(a.j,h?u:null,!a.m),0<a.O&&(a.M=new yE(y(a.Y,a,a.g),a.O)),u=a.U,h=a.g,p=a.ca;var E="readystatechange";Array.isArray(E)||(E&&($_[0]=E.toString()),E=$_);for(var R=0;R<E.length;R++){var B=F_(h,E[R],p||u.handleEvent,!1,u.h||u);if(!B)break;u.g[B.key]=B}u=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Jo(),TE(a.i,a.u,a.A,a.l,a.R,a.m)}ti.prototype.ca=function(a){a=a.target;let u=this.M;u&&Dn(a)==3?u.j():this.Y(a)},ti.prototype.Y=function(a){try{if(a==this.g)e:{let ct=Dn(this.g);var u=this.g.Ba();let Or=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||wb(this.g)))){this.J||ct!=4||u==7||(u==8||0>=Or?Jo(3):Jo(2)),Md(this);var h=this.g.Z();this.X=h;t:if(tb(this)){var p=wb(this.g);a="";var E=p.length,R=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),Xo(this);var B="";break t}this.h.i=new c.TextDecoder}for(u=0;u<E;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(R&&u==E-1)});p.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=h==200,EE(this.i,this.u,this.A,this.l,this.R,ct,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,tt=this.g;if((Se=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Se)){var we=Se;break t}}we=null}if(h=we)Dr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pd(this,h);else{this.o=!1,this.s=3,pt(12),Ui(this),Xo(this);break e}}if(this.P){h=!0;let qt;for(;!this.J&&this.C<B.length;)if(qt=SE(this,B),qt==xd){ct==4&&(this.s=4,pt(14),h=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Z_){this.s=4,pt(15),Dr(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else Dr(this.i,this.l,qt,null),Pd(this,qt);if(tb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||B.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)Dr(this.i,this.l,B,"[Invalid Chunked Response]"),Ui(this),Xo(this);else if(0<B.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Bd(at),at.M=!0,pt(11))}}else Dr(this.i,this.l,B,null),Pd(this,B);ct==4&&Ui(this),this.o&&!this.J&&(ct==4?Db(this.j,this):(this.o=!1,rc(this)))}else zE(this.g),h==400&&0<B.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Ui(this),Xo(this)}}}catch{}finally{}};function tb(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function SE(a,u){var h=a.C,p=u.indexOf(`
`,h);return p==-1?xd:(h=Number(u.substring(h,p)),isNaN(h)?Z_:(p+=1,p+h>u.length?xd:(u=u.slice(p,p+h),a.C=p+h,u)))}ti.prototype.cancel=function(){this.J=!0,Ui(this)};function rc(a){a.S=Date.now()+a.I,nb(a,a.I)}function nb(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Qo(y(a.ba,a),u)}function Md(a){a.B&&(c.clearTimeout(a.B),a.B=null)}ti.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(CE(this.i,this.A),this.L!=2&&(Jo(),pt(17)),Ui(this),this.s=2,Xo(this)):nb(this,this.S-a)};function Xo(a){a.j.G==0||a.J||Db(a.j,a)}function Ui(a){Md(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,z_(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Pd(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||Nd(h.h,a))){if(!a.K&&Nd(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var E=p;if(E[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)hc(h),uc(h);else break e;Ld(h),pt(18)}}else h.za=E[1],0<h.za-h.T&&37500>E[2]&&h.F&&h.v==0&&!h.C&&(h.C=Qo(y(h.Za,h),6e3));if(1>=ob(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Gi(h,11)}else if((a.K||h.g==a)&&hc(h),!ne(u))for(E=h.Da.g.parse(u),u=0;u<E.length;u++){let we=E[u];if(h.T=we[0],we=we[1],h.G==2)if(we[0]=="c"){h.K=we[1],h.ia=we[2];let at=we[3];at!=null&&(h.la=at,h.j.info("VER="+h.la));let ct=we[4];ct!=null&&(h.Aa=ct,h.j.info("SVER="+h.Aa));let Or=we[5];Or!=null&&typeof Or=="number"&&0<Or&&(p=1.5*Or,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let qt=a.g;if(qt){let pc=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pc){var R=p.h;R.g||pc.indexOf("spdy")==-1&&pc.indexOf("quic")==-1&&pc.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(kd(R,R.h),R.h=null))}if(p.D){let Ud=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ud&&(p.ya=Ud,Oe(p.I,p.D,Ud))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var B=a;if(p.qa=Ob(p,p.J?p.ia:null,p.W),B.K){sb(p.h,B);var Se=B,tt=p.L;tt&&(Se.I=tt),Se.B&&(Md(Se),rc(Se)),p.g=B}else Ab(p);0<h.i.length&&dc(h)}else we[0]!="stop"&&we[0]!="close"||Gi(h,7);else h.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Gi(h,7):Vd(h):we[0]!="noop"&&h.l&&h.l.ta(we),h.v=0)}}Jo(4)}catch{}}var DE=class{constructor(a,u){this.g=a,this.map=u}};function ib(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rb(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ob(a){return a.h?1:a.g?a.g.size:0}function Nd(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function kd(a,u){a.g?a.g.add(u):a.h=u}function sb(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}ib.prototype.cancel=function(){if(this.i=ab(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function ab(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return P(a.i)}function RE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,p=0;p<h;p++)u.push(a[p]);return u}u=[],h=0;for(p in a)u[h++]=a[p];return u}function xE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let p in a)u[h++]=p;return u}}}function cb(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=xE(a),p=RE(a),E=p.length,R=0;R<E;R++)u.call(void 0,p[R],h&&h[R],a)}var lb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OE(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),E=null;if(0<=p){var R=a[h].substring(0,p);E=a[h].substring(p+1)}else R=a[h];u(R,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function ji(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ji){this.h=a.h,oc(this,a.j),this.o=a.o,this.g=a.g,sc(this,a.s),this.l=a.l;var u=a.i,h=new ts;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),ub(this,h),this.m=a.m}else a&&(u=String(a).match(lb))?(this.h=!1,oc(this,u[1]||"",!0),this.o=Zo(u[2]||""),this.g=Zo(u[3]||"",!0),sc(this,u[4]),this.l=Zo(u[5]||"",!0),ub(this,u[6]||"",!0),this.m=Zo(u[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}ji.prototype.toString=function(){var a=[],u=this.j;u&&a.push(es(u,db,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(es(u,db,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(es(h,h.charAt(0)=="/"?NE:PE,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",es(h,FE)),a.join("")};function Sn(a){return new ji(a)}function oc(a,u,h){a.j=h?Zo(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function sc(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function ub(a,u,h){u instanceof ts?(a.i=u,VE(a.i,a.h)):(h||(u=es(u,kE)),a.i=new ts(u,a.h))}function Oe(a,u,h){a.i.set(u,h)}function ac(a){return Oe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Zo(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function es(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,ME),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ME(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var db=/[#\/\?@]/g,PE=/[#\?:]/g,NE=/[#\?]/g,kE=/[#\?@]/g,FE=/#/g;function ts(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function ni(a){a.g||(a.g=new Map,a.h=0,a.i&&OE(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=ts.prototype,n.add=function(a,u){ni(this),this.i=null,a=Rr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function hb(a,u){ni(a),u=Rr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function fb(a,u){return ni(a),u=Rr(a,u),a.g.has(u)}n.forEach=function(a,u){ni(this),this.g.forEach(function(h,p){h.forEach(function(E){a.call(u,E,p,this)},this)},this)},n.na=function(){ni(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){let E=a[p];for(let R=0;R<E.length;R++)h.push(u[p])}return h},n.V=function(a){ni(this);let u=[];if(typeof a=="string")fb(this,a)&&(u=u.concat(this.g.get(Rr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return ni(this),this.i=null,a=Rr(this,a),fb(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function pb(a,u,h){hb(a,u),0<h.length&&(a.i=null,a.g.set(Rr(a,u),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];let R=encodeURIComponent(String(p)),B=this.V(p);for(p=0;p<B.length;p++){var E=R;B[p]!==""&&(E+="="+encodeURIComponent(String(B[p]))),a.push(E)}}return this.i=a.join("&")};function Rr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function VE(a,u){u&&!a.j&&(ni(a),a.i=null,a.g.forEach(function(h,p){var E=p.toLowerCase();p!=E&&(hb(this,p),pb(this,E,h))},a)),a.j=u}function LE(a,u){let h=new Yo;if(c.Image){let p=new Image;p.onload=A(ii,h,"TestLoadImage: loaded",!0,u,p),p.onerror=A(ii,h,"TestLoadImage: error",!1,u,p),p.onabort=A(ii,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=A(ii,h,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function BE(a,u){let h=new Yo,p=new AbortController,E=setTimeout(()=>{p.abort(),ii(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(R=>{clearTimeout(E),R.ok?ii(h,"TestPingServer: ok",!0,u):ii(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(E),ii(h,"TestPingServer: error",!1,u)})}function ii(a,u,h,p,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),p(h)}catch{}}function UE(){this.g=new IE}function jE(a,u,h){let p=h||"";try{cb(a,function(E,R){let B=E;d(E)&&(B=Cd(E)),u.push(p+R+"="+encodeURIComponent(B))})}catch(E){throw u.push(p+"type="+encodeURIComponent("_badmap")),E}}function ns(a){this.l=a.Ub||null,this.j=a.eb||!1}k(ns,Ad),ns.prototype.g=function(){return new cc(this.l,this.j)},ns.prototype.i=function(a){return function(){return a}}({});function cc(a,u){st.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(cc,st),n=cc.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,rs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mb(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mb(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?is(this):rs(this),this.readyState==3&&mb(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,is(this))},n.Qa=function(a){this.g&&(this.response=a,is(this))},n.ga=function(){this.g&&is(this)};function is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,rs(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function rs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gb(a){let u="";return ge(a,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Fd(a,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=gb(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Oe(a,u,h))}function Le(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Le,st);var GE=/^https?$/i,$E=["POST","PUT"];n=Le.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rd.g(),this.v=this.o?H_(this.o):H_(Rd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(R){_b(this,R);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var E in p)h.set(E,p[E]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let R of p.keys())h.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),E=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call($E,u,void 0))||p||E||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,B]of h)this.g.setRequestHeader(R,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yb(this),this.u=!0,this.g.send(a),this.u=!1}catch(R){_b(this,R)}};function _b(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,bb(a),lc(a)}function bb(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),lc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lc(this,!0)),Le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vb(this):this.bb())},n.bb=function(){vb(this)};function vb(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Dn(a)!=4||a.Z()!=2)){if(a.u&&Dn(a)==4)j_(a.Ea,0,a);else if(ft(a,"readystatechange"),Dn(a)==4){a.h=!1;try{let B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=B===0){var E=String(a.D).match(lb)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),p=!GE.test(E?E.toLowerCase():"")}h=p}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var R=2<Dn(a)?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.Z()+"]",bb(a)}}finally{lc(a)}}}}function lc(a,u){if(a.g){yb(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ft(a,"ready");try{h.onreadystatechange=p}catch{}}}function yb(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Dn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),wE(u)}};function wb(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function zE(a){let u={};a=(a.g&&2<=Dn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(ne(a[p]))continue;var h=T(a[p]);let E=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let R=u[E]||[];u[E]=R,R.push(h)}I(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function Ib(a){this.Aa=0,this.i=[],this.j=new Yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=os("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=os("baseRetryDelayMs",5e3,a),this.cb=os("retryDelaySeedMs",1e4,a),this.Wa=os("forwardChannelMaxRetries",2,a),this.wa=os("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ib(a&&a.concurrentRequestLimit),this.Da=new UE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ib.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,p){pt(0),this.W=a,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Ob(this,null,this.W),dc(this)};function Vd(a){if(Tb(a),a.G==3){var u=a.U++,h=Sn(a.I);if(Oe(h,"SID",a.K),Oe(h,"RID",u),Oe(h,"TYPE","terminate"),ss(a,h),u=new ti(a,a.j,u),u.L=2,u.v=ac(Sn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=Mb(u.j,null),u.g.ea(u.v)),u.F=Date.now(),rc(u)}xb(a)}function uc(a){a.g&&(Bd(a),a.g.cancel(),a.g=null)}function Tb(a){uc(a),a.u&&(c.clearTimeout(a.u),a.u=null),hc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function dc(a){if(!rb(a.h)&&!a.s){a.s=!0;var u=a.Ga;$o||k_(),zo||($o(),zo=!0),gd.add(u,a),a.B=0}}function HE(a,u){return ob(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Qo(y(a.Ga,a,u),Rb(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let E=new ti(this,this.j,a),R=this.o;if(this.S&&(R?(R=_(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(E.H=R,R=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Cb(this,E,u),h=Sn(this.I),Oe(h,"RID",a),Oe(h,"CVER",22),this.D&&Oe(h,"X-HTTP-Session-Id",this.D),ss(this,h),R&&(this.O?u="headers="+encodeURIComponent(String(gb(R)))+"&"+u:this.m&&Fd(h,this.m,R)),kd(this.h,E),this.Ua&&Oe(h,"TYPE","init"),this.P?(Oe(h,"$req",u),Oe(h,"SID","null"),E.T=!0,Od(E,h,null)):Od(E,h,u),this.G=2}}else this.G==3&&(a?Eb(this,a):this.i.length==0||rb(this.h)||Eb(this))};function Eb(a,u){var h;u?h=u.l:h=a.U++;let p=Sn(a.I);Oe(p,"SID",a.K),Oe(p,"RID",h),Oe(p,"AID",a.T),ss(a,p),a.m&&a.o&&Fd(p,a.m,a.o),h=new ti(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Cb(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),kd(a.h,h),Od(h,p,u)}function ss(a,u){a.H&&ge(a.H,function(h,p){Oe(u,p,h)}),a.l&&cb({},function(h,p){Oe(u,p,h)})}function Cb(a,u,h){h=Math.min(a.i.length,h);var p=a.l?y(a.l.Na,a.l,a):null;e:{var E=a.i;let R=-1;for(;;){let B=["count="+h];R==-1?0<h?(R=E[0].g,B.push("ofs="+R)):R=0:B.push("ofs="+R);let Se=!0;for(let tt=0;tt<h;tt++){let we=E[tt].g,at=E[tt].map;if(we-=R,0>we)R=Math.max(0,E[tt].g-100),Se=!1;else try{jE(at,B,"req"+we+"_")}catch{p&&p(at)}}if(Se){p=B.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,p}function Ab(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;$o||k_(),zo||($o(),zo=!0),gd.add(u,a),a.v=0}}function Ld(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Qo(y(a.Fa,a),Rb(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Sb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Qo(y(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),uc(this),Sb(this))};function Bd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Sb(a){a.g=new ti(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Sn(a.qa);Oe(u,"RID","rpc"),Oe(u,"SID",a.K),Oe(u,"AID",a.T),Oe(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Oe(u,"TO",a.ja),Oe(u,"TYPE","xmlhttp"),ss(a,u),a.m&&a.o&&Fd(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=ac(Sn(u)),h.m=null,h.P=!0,eb(h,a)}n.Za=function(){this.C!=null&&(this.C=null,uc(this),Ld(this),pt(19))};function hc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Db(a,u){var h=null;if(a.g==u){hc(a),Bd(a),a.g=null;var p=2}else if(Nd(a.h,u))h=u.D,sb(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var E=a.B;p=tc(),ft(p,new Q_(p,h)),dc(a)}else Ab(a);else if(E=u.s,E==3||E==0&&0<u.X||!(p==1&&HE(a,u)||p==2&&Ld(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),E){case 1:Gi(a,5);break;case 4:Gi(a,10);break;case 3:Gi(a,6);break;default:Gi(a,2)}}}function Rb(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Gi(a,u){if(a.j.info("Error code "+u),u==2){var h=y(a.fb,a),p=a.Xa;let E=!p;p=new ji(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||oc(p,"https"),ac(p),E?LE(p.toString(),h):BE(p.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(u),xb(a),Tb(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function xb(a){if(a.G=0,a.ka=[],a.l){let u=ab(a.h);(u.length!=0||a.i.length!=0)&&(O(a.ka,u),O(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Ob(a,u,h){var p=h instanceof ji?Sn(h):new ji(h);if(p.g!="")u&&(p.g=u+"."+p.g),sc(p,p.s);else{var E=c.location;p=E.protocol,u=u?u+"."+E.hostname:E.hostname,E=+E.port;var R=new ji(null);p&&oc(R,p),u&&(R.g=u),E&&sc(R,E),h&&(R.l=h),p=R}return h=a.D,u=a.ya,h&&u&&Oe(p,h,u),Oe(p,"VER",a.la),ss(a,p),p}function Mb(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Le(new ns({eb:h})):new Le(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pb(){}n=Pb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fc(){}fc.prototype.g=function(a,u){return new At(a,u)};function At(a,u){st.call(this),this.g=new Ib(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!ne(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ne(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new xr(this)}k(At,st),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Vd(this.g)},At.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Cd(a),a=h);u.i.push(new DE(u.Ya++,a)),u.G==3&&dc(u)},At.prototype.N=function(){this.g.l=null,delete this.j,Vd(this.g),delete this.g,At.aa.N.call(this)};function Nb(a){Sd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}k(Nb,Sd);function kb(){Dd.call(this),this.status=1}k(kb,Dd);function xr(a){this.g=a}k(xr,Pb),xr.prototype.ua=function(){ft(this.g,"a")},xr.prototype.ta=function(a){ft(this.g,new Nb(a))},xr.prototype.sa=function(a){ft(this.g,new kb)},xr.prototype.ra=function(){ft(this.g,"b")},fc.prototype.createWebChannel=fc.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Kf=Gn.createWebChannelTransport=function(){return new fc},Wf=Gn.getStatEventTarget=function(){return tc()},qf=Gn.Event=Bi,_l=Gn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nc.NO_ERROR=0,nc.TIMEOUT=8,nc.HTTP_ERROR=6,ta=Gn.ErrorCode=nc,Y_.COMPLETE="complete",Hf=Gn.EventType=Y_,q_.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",st.prototype.listen=st.prototype.K,to=Gn.WebChannel=q_,QD=Gn.FetchXmlHttpFactory=ns,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,zf=Gn.XhrIo=Le}).apply(typeof gl<"u"?gl:typeof self<"u"?self:typeof window<"u"?window:{});var Ry="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var vo="10.14.0";var ir=new _i("@firebase/firestore");function na(){return ir.logLevel}function H(n,...e){if(ir.logLevel<=pe.DEBUG){let t=e.map(Nm);ir.debug(`Firestore (${vo}): ${n}`,...t)}}function zn(n,...e){if(ir.logLevel<=pe.ERROR){let t=e.map(Nm);ir.error(`Firestore (${vo}): ${n}`,...t)}}function co(n,...e){if(ir.logLevel<=pe.WARN){let t=e.map(Nm);ir.warn(`Firestore (${vo}): ${n}`,...t)}}function Nm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+n;throw zn(e),new Error(e)}function Ae(n,e){n||ie()}function se(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Il=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Zf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},ep=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},tp=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),o=new Qt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qt,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>g(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new Il(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new et(e)}},np=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ip=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new np(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},op=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ae(this.o===void 0);let i=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new rp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function YD(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Tl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=YD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function Ie(n,e){return n<e?-1:n>e?1:0}function lo(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var rt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var El=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ie(),i===void 0?i=e.length-t:i>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ve=class n extends El{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},XD=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nt=class n extends El{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return XD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(s=!s,r++):c!=="."||s?(i+=c,r++):(o(),r++)}if(o(),s)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ve.fromString(e))}static fromName(e){return new n(Ve.fromString(e).popFirst(5))}static empty(){return new n(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ve(e.slice()))}};var sp=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};sp.UNKNOWN_ID=-1;function ZD(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new rr(r,Z.empty(),e)}function eR(n){return new rr(n.readTime,n.key,-1)}var rr=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ce.min(),Z.empty(),-1)}static max(){return new n(ce.max(),Z.empty(),-1)}};function tR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}var nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ap=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function va(n){return g(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==nR)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,s=!1;e.forEach(c=>{++r,c.next(()=>{++o,s&&o===r&&t()},l=>i(l))}),s=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let d=l;t(e[d]).next(f=>{s[d]=f,++c,c===o&&i(s)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function iR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ya(n){return n.name==="IndexedDbTransactionError"}var lw=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function iu(n){return n==null}function ca(n){return n===0&&1/n==-1/0}function rR(n){return typeof n=="number"&&Number.isInteger(n)&&!ca(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var oR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a2=[...oR,"documentOverlays"],sR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aR=sR,cR=[...aR,"indexConfiguration","indexState","indexEntries"];var c2=[...cR,"globals"];function xy(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oo(this.root,e,this.comparator,!0)}},oo=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gn=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,i,r,o){return this}insert(e,t,i){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dt=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cl(this.data.getIterator())}getIteratorFrom(e){return new Cl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jt=class n{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new n([])}unionWith(e){let t=new dt(Nt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Al=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ht=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Al("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var lR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(n){if(Ae(!!n),typeof n=="string"){let e=0,t=lR.exec(n);if(Ae(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ti(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}function km(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Fm(n){let e=n.mapValue.fields.__previous_value__;return km(e)?Fm(e):e}function la(n){let e=Hn(n.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var cp=class{constructor(e,t,i,r,o,s,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},Sl=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function or(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?km(n)?4:hw(n)?9007199254740991:dw(n)?10:11:ie()}function vn(n,e){if(n===e)return!0;let t=or(n);if(t!==or(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return la(n).isEqual(la(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Hn(r.timestampValue),c=Hn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return Ti(r.bytesValue).isEqual(Ti(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Ne(r.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(r.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ne(r.integerValue)===Ne(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Ne(r.doubleValue),c=Ne(o.doubleValue);return s===c?ca(s)===ca(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return lo(n.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},c=o.mapValue.fields||{};if(xy(s)!==xy(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!vn(s[l],c[l])))return!1;return!0}(n,e);default:return ie()}}function ua(n,e){return(n.values||[]).find(t=>vn(t,e))!==void 0}function uo(n,e){if(n===e)return 0;let t=or(n),i=or(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ne(o.integerValue||o.doubleValue),l=Ne(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Oy(n.timestampValue,e.timestampValue);case 4:return Oy(la(n),la(e));case 5:return Ie(n.stringValue,e.stringValue);case 6:return function(o,s){let c=Ti(o),l=Ti(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=Ie(c[d],l[d]);if(f!==0)return f}return Ie(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Ie(Ne(o.latitude),Ne(s.latitude));return c!==0?c:Ie(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return My(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,l,d,f;let m=o.fields||{},y=s.fields||{},A=(c=m.value)===null||c===void 0?void 0:c.arrayValue,k=(l=y.value)===null||l===void 0?void 0:l.arrayValue,P=Ie(((d=A?.values)===null||d===void 0?void 0:d.length)||0,((f=k?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:My(A,k)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===bl.mapValue&&s===bl.mapValue)return 0;if(o===bl.mapValue)return 1;if(s===bl.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),d=s.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let y=Ie(l[m],f[m]);if(y!==0)return y;let A=uo(c[l[m]],d[f[m]]);if(A!==0)return A}return Ie(l.length,f.length)}(n.mapValue,e.mapValue);default:throw ie()}}function Oy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);let t=Hn(n),i=Hn(e),r=Ie(t.seconds,i.seconds);return r!==0?r:Ie(t.nanos,i.nanos)}function My(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=uo(t[r],i[r]);if(o)return o}return Ie(t.length,i.length)}function ho(n){return lp(n)}function lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Hn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=lp(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${lp(t.fields[s])}`;return r+"}"}(n.mapValue):ie()}function Py(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function up(n){return!!n&&"integerValue"in n}function Vm(n){return!!n&&"arrayValue"in n}function Ny(n){return!!n&&"nullValue"in n}function ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yl(n){return!!n&&"mapValue"in n}function dw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ra(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pr(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ra(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ra(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(t)}setAll(e){let t=Nt.emptyPath(),i={},r=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}s?i[c.lastSegment()]=ra(s):r.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];yl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){pr(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(ra(this.value))}};function fw(n){let e=[];return pr(n.fields,(t,i)=>{let r=new Nt([t]);if(yl(i)){let o=fw(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new jt(e)}var Yt=class n{constructor(e,t,i,r,o,s,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),Pt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ce.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fo=class{constructor(e,t){this.position=e,this.inclusive=t}};function Fy(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],s=n.position[r];if(o.field.isKeyField()?i=Z.comparator(Z.fromName(s.referenceValue),t.key):i=uo(s,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vn(n.position[t],e.position[t]))return!1;return!0}var sr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function uR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Dl=class{},qe=class n extends Dl{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new hp(e,t,i):t==="array-contains"?new mp(e,i):t==="in"?new gp(e,i):t==="not-in"?new _p(e,i):t==="array-contains-any"?new bp(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new fp(e,i):new pp(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(uo(t,this.value)):t!==null&&or(this.value)===or(t)&&this.matchesComparison(uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Xt=class n extends Dl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pw(n){return n.op==="and"}function mw(n){return dR(n)&&pw(n)}function dR(n){for(let e of n.filters)if(e instanceof Xt)return!1;return!0}function dp(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+ho(n.value);if(mw(n))return n.filters.map(e=>dp(e)).join(",");{let e=n.filters.map(t=>dp(t)).join(",");return`${n.op}(${e})`}}function gw(n,e){return n instanceof qe?function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&vn(i.value,r.value)}(n,e):n instanceof Xt?function(i,r){return r instanceof Xt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,c)=>o&&gw(s,r.filters[c]),!0):!1}(n,e):void ie()}function _w(n){return n instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${ho(t.value)}`}(n):n instanceof Xt?function(t){return t.op.toString()+" {"+t.getFilters().map(_w).join(" ,")+"}"}(n):"Filter"}var hp=class extends qe{constructor(e,t,i){super(e,t,i),this.key=Z.fromName(i.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},fp=class extends qe{constructor(e,t){super(e,"in",t),this.keys=bw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pp=class extends qe{constructor(e,t){super(e,"not-in",t),this.keys=bw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Z.fromName(i.referenceValue))}var mp=class extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Vm(t)&&ua(t.arrayValue,this.value)}},gp=class extends qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ua(this.value.arrayValue,t)}},_p=class extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ua(this.value.arrayValue,t)}},bp=class extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ua(this.value.arrayValue,i))}};var vp=class{constructor(e,t=null,i=[],r=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function Ly(n,e=null,t=[],i=[],r=null,o=null,s=null){return new vp(n,e,t,i,r,o,s)}function Lm(n){let e=se(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>dp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),iu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ho(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ho(i)).join(",")),e.ue=t}return e.ue}function Bm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vy(n.startAt,e.startAt)&&Vy(n.endAt,e.endAt)}function yp(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ei=class{constructor(e,t=null,i=[],r=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function hR(n,e,t,i,r,o,s,c){return new Ei(n,e,t,i,r,o,s,c)}function Um(n){return new Ei(n)}function By(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vw(n){return n.collectionGroup!==null}function oa(n){let e=se(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new dt(Nt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new sr(o,i))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new sr(Nt.keyField(),i))}return e.ce}function _n(n){let e=se(n);return e.le||(e.le=fR(e,oa(n))),e.le}function fR(n,e){if(n.limitType==="F")return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new sr(r.field,o)});let t=n.endAt?new fo(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new fo(n.startAt.position,n.startAt.inclusive):null;return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wp(n,e){let t=n.filters.concat([e]);return new Ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ip(n,e,t){return new Ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ru(n,e){return Bm(_n(n),_n(e))&&n.limitType===e.limitType}function yw(n){return`${Lm(_n(n))}|lt:${n.limitType}`}function no(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>_w(r)).join(", ")}]`),iu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>ho(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>ho(r)).join(",")),`Target(${i})`}(_n(n))}; limitType=${n.limitType})`}function ou(n,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Z.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(let o of oa(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(s,c,l){let d=Fy(s,c,l);return s.inclusive?d<=0:d<0}(i.startAt,oa(i),r)||i.endAt&&!function(s,c,l){let d=Fy(s,c,l);return s.inclusive?d>=0:d>0}(i.endAt,oa(i),r))}(n,e)}function pR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ww(n){return(e,t)=>{let i=!1;for(let r of oa(n)){let o=mR(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function mR(n,e,t){let i=n.field.isKeyField()?Z.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),d=c.data.field(o);return l!==null&&d!==null?uo(l,d):ie()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ie()}}var Ci=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return uw(this.inner)}size(){return this.innerSize}};var gR=new je(Z.comparator);function qn(){return gR}var Iw=new je(Z.comparator);function ia(...n){let e=Iw;for(let t of n)e=e.insert(t.key,t);return e}function Tw(n){let e=Iw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function er(){return sa()}function Ew(){return sa()}function sa(){return new Ci(n=>n.toString(),(n,e)=>n.isEqual(e))}var _R=new je(Z.comparator),bR=new dt(Z.comparator);function me(...n){let e=bR;for(let t of n)e=e.add(t);return e}var vR=new dt(Ie);function yR(){return vR}function jm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ca(e)?"-0":e}}function Cw(n){return{integerValue:""+n}}function Aw(n,e){return rR(e)?Cw(e):jm(n,e)}var po=class{constructor(){this._=void 0}};function wR(n,e,t){return n instanceof ar?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&km(o)&&(o=Fm(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof cr?Dw(n,e):n instanceof lr?Rw(n,e):function(r,o){let s=Sw(r,o),c=Uy(s)+Uy(r.Pe);return up(s)&&up(r.Pe)?Cw(c):jm(r.serializer,c)}(n,e)}function IR(n,e,t){return n instanceof cr?Dw(n,e):n instanceof lr?Rw(n,e):t}function Sw(n,e){return n instanceof ur?function(i){return up(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var ar=class extends po{},cr=class extends po{constructor(e){super(),this.elements=e}};function Dw(n,e){let t=xw(e);for(let i of n.elements)t.some(r=>vn(r,i))||t.push(i);return{arrayValue:{values:t}}}var lr=class extends po{constructor(e){super(),this.elements=e}};function Rw(n,e){let t=xw(e);for(let i of n.elements)t=t.filter(r=>!vn(r,i));return{arrayValue:{values:t}}}var ur=class extends po{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Uy(n){return Ne(n.integerValue||n.doubleValue)}function xw(n){return Vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Rl=class{constructor(e,t){this.field=e,this.transform=t}};function TR(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof cr&&r instanceof cr||i instanceof lr&&r instanceof lr?lo(i.elements,r.elements,vn):i instanceof ur&&r instanceof ur?vn(i.Pe,r.Pe):i instanceof ar&&r instanceof ar}(n.transform,e.transform)}var Tp=class{constructor(e,t){this.version=e,this.transformResults=t}},$n=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mo=class{};function Ow(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xl(n.key,$n.none()):new dr(n.key,n.data,$n.none());{let t=n.data,i=Pt.empty(),r=new dt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new yn(n.key,i,new jt(r.toArray()),$n.none())}}function ER(n,e,t){n instanceof dr?function(r,o,s){let c=r.value.clone(),l=Gy(r.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof yn?function(r,o,s){if(!wl(r.precondition,o))return void o.convertToUnknownDocument(s.version);let c=Gy(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Mw(r)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function aa(n,e,t,i){return n instanceof dr?function(o,s,c,l){if(!wl(o.precondition,s))return c;let d=o.value.clone(),f=$y(o.fieldTransforms,l,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,i):n instanceof yn?function(o,s,c,l){if(!wl(o.precondition,s))return c;let d=$y(o.fieldTransforms,l,s),f=s.data;return f.setAll(Mw(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,i):function(o,s,c){return wl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function CR(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=Sw(i.transform,r||null);o!=null&&(t===null&&(t=Pt.empty()),t.set(i.field,o))}return t||null}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&lo(i,r,(o,s)=>TR(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var dr=class extends mo{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},yn=class extends mo{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Mw(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Gy(n,e,t){let i=new Map;Ae(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],s=o.transform,c=e.data.field(o.field);i.set(o.field,IR(s,c,t[r]))}return i}function $y(n,e,t){let i=new Map;for(let r of n){let o=r.transform,s=t.data.field(r.field);i.set(r.field,wR(o,s,e))}return i}var xl=class extends mo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ep=class extends mo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cp=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&ER(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=aa(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=aa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Ew();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(r.key)?null:c;let l=Ow(s,c);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(t,i)=>jy(t,i))&&lo(this.baseMutations,e.baseMutations,(t,i)=>jy(t,i))}},Ap=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ae(e.mutations.length===i.length);let r=function(){return _R}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(e,t,i,r)}};var Sp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ze,ve;function AR(n){switch(n){default:return ie();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Pw(n){if(n===void 0)return zn("GRPC error has no .code"),M.UNKNOWN;switch(n){case ze.OK:return M.OK;case ze.CANCELLED:return M.CANCELLED;case ze.UNKNOWN:return M.UNKNOWN;case ze.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ze.INTERNAL:return M.INTERNAL;case ze.UNAVAILABLE:return M.UNAVAILABLE;case ze.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ze.NOT_FOUND:return M.NOT_FOUND;case ze.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ze.ABORTED:return M.ABORTED;case ze.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ze.DATA_LOSS:return M.DATA_LOSS;default:return ie()}}(ve=ze||(ze={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var zy=null;function SR(){return new TextEncoder}var DR=new wi([4294967295,4294967295],0);function Hy(n){let e=SR().encode(n),t=new $f;return t.update(e),new Uint8Array(t.digest())}function qy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wi([t,i],0),new wi([r,o],0)]}var Rp=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tr(`Invalid padding: ${t}`);if(i<0)throw new tr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tr(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=wi.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(wi.fromNumber(i)));return r.compare(DR)===1&&(r=new wi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Hy(e),[i,r]=qy(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,r,t);return i.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let t=Hy(e),[i,r]=qy(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},tr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ol=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,da.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ce.min(),r,new je(Ie),qn(),me())}},da=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,me(),me(),me())}};var so=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Ml=class{constructor(e,t){this.targetId=e,this.me=t}},Pl=class{constructor(e,t,i=ht.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Nl=class{constructor(){this.fe=0,this.ge=Ky(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),t=me(),i=me();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ie()}}),new da(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Ky()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},xp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qn(),this.qe=Wy(),this.Qe=new je(Ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(yp(o))if(i===0){let s=new Z(o.path);this.Ue(t,s,Yt.newNoDocument(s,ce.min()))}else Ae(i===1);else{let s=this.Ye(t);if(s!==i){let c=this.Ze(e),l=c?this.Xe(c,e,s):1;if(l!==0){this.je(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}zy?.et(function(f,m,y,A,k){var P,O,J,ne,q,Te;let ke={localCacheCount:f,existenceFilterCount:m.count,databaseId:y.database,projectId:y.projectId},ge=m.unchangedNames;return ge&&(ke.bloomFilter={applied:k===0,hashCount:(P=ge?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(ne=(J=(O=ge?.bits)===null||O===void 0?void 0:O.bitmap)===null||J===void 0?void 0:J.length)!==null&&ne!==void 0?ne:0,padding:(Te=(q=ge?.bits)===null||q===void 0?void 0:q.padding)!==null&&Te!==void 0?Te:0,mightContain:I=>{var _;return(_=A?.mightContain(I))!==null&&_!==void 0&&_}}),ke}(s,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,s,c;try{s=Ti(i).toUint8Array()}catch(l){if(l instanceof Al)return co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Rp(s,r,o)}catch(l){return co(l instanceof tr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&yp(c.target)){let l=new Z(c.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Yt.newNoDocument(l,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let i=me();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Ol(e,t,this.Qe,this.ke,i);return this.ke=qn(),this.qe=Wy(),this.Qe=new je(Ie),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Nl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dt(Ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Wy(){return new je(Z.comparator)}function Ky(){return new je(Z.comparator)}var RR={asc:"ASCENDING",desc:"DESCENDING"},xR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OR={and:"AND",or:"OR"},Op=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Mp(n,e){return n.useProto3Json||iu(e)?e:{value:e}}function kl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MR(n,e){return kl(n,e.toTimestamp())}function bn(n){return Ae(!!n),ce.fromTimestamp(function(t){let i=Hn(t);return new rt(i.seconds,i.nanos)}(n))}function Gm(n,e){return Pp(n,e).canonicalString()}function Pp(n,e){let t=function(r){return new Ve(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kw(n){let e=Ve.fromString(n);return Ae(Uw(e)),e}function Np(n,e){return Gm(n.databaseId,e.path)}function Jf(n,e){let t=kw(e);if(t.get(1)!==n.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(Vw(t))}function Fw(n,e){return Gm(n.databaseId,e)}function PR(n){let e=kw(n);return e.length===4?Ve.emptyPath():Vw(e)}function kp(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Vw(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Jy(n,e,t){return{name:Np(n,e),fields:t.value.mapValue.fields}}function NR(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(Ae(f===void 0||typeof f=="string"),ht.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ht.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(d){let f=d.code===void 0?M.UNKNOWN:Pw(d.code);return new z(f,d.message||"")}(s);t=new Pl(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Jf(n,i.document.name),o=bn(i.document.updateTime),s=i.document.createTime?bn(i.document.createTime):ce.min(),c=new Pt({mapValue:{fields:i.document.fields}}),l=Yt.newFoundDocument(r,o,s,c),d=i.targetIds||[],f=i.removedTargetIds||[];t=new so(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Jf(n,i.document),o=i.readTime?bn(i.readTime):ce.min(),s=Yt.newNoDocument(r,o),c=i.removedTargetIds||[];t=new so([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Jf(n,i.document),o=i.removedTargetIds||[];t=new so([],o,r,null)}else{if(!("filter"in e))return ie();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Dp(r,o),c=i.targetId;t=new Ml(c,s)}}return t}function kR(n,e){let t;if(e instanceof dr)t={update:Jy(n,e.key,e.value)};else if(e instanceof xl)t={delete:Np(n,e.key)};else if(e instanceof yn)t={update:Jy(n,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof Ep))return ie();t={verify:Np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let c=s.transform;if(c instanceof ar)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof cr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ur)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw ie()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:MR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(n,e.precondition)),t}function FR(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(r,o){let s=r.updateTime?bn(r.updateTime):bn(o);return s.isEqual(ce.min())&&(s=bn(o)),new Tp(s,r.transformResults||[])}(t,e))):[]}function VR(n,e){return{documents:[Fw(n,e.path)]}}function LR(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Fw(n,r);let o=function(d){if(d.length!==0)return Bw(Xt.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:io(y.field),direction:jR(y.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Mp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:r}}function BR(n){let e=PR(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Ae(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(m){let y=Lw(m);return y instanceof Xt&&mw(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(m){return m.map(y=>function(k){return new sr(ro(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,iu(y)?null:y}(t.limit));let l=null;t.startAt&&(l=function(m){let y=!!m.before,A=m.values||[];return new fo(A,y)}(t.startAt));let d=null;return t.endAt&&(d=function(m){let y=!m.before,A=m.values||[];return new fo(A,y)}(t.endAt)),hR(e,r,s,o,c,"F",l,d)}function UR(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ro(t.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ro(t.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ro(t.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ro(t.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return qe.create(ro(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xt.create(t.compositeFilter.filters.map(i=>Lw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function jR(n){return RR[n]}function GR(n){return xR[n]}function $R(n){return OR[n]}function io(n){return{fieldPath:n.canonicalString()}}function ro(n){return Nt.fromServerFormat(n.fieldPath)}function Bw(n){return n instanceof qe?function(t){if(t.op==="=="){if(ky(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NAN"}};if(Ny(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ky(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NAN"}};if(Ny(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(t.field),op:GR(t.op),value:t.value}}}(n):n instanceof Xt?function(t){let i=t.getFilters().map(r=>Bw(r));return i.length===1?i[0]:{compositeFilter:{op:$R(t.op),filters:i}}}(n):ie()}function zR(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ha=class n{constructor(e,t,i,r,o=ce.min(),s=ce.min(),c=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fp=class{constructor(e){this.ct=e}};function HR(n){let e=BR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ip(e,e.limit,"L"):e}var Fl=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let i=Ne(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),ca(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Hn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ti(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?hw(e)?this.dt(t,Number.MAX_SAFE_INTEGER):dw(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let o=e.fields||{};this.dt(t,53);let s="value",c=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ne(c)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Fl.vt=new Fl;var Vp=class{constructor(){this.un=new Lp}addToCollectionParentIndex(e,t){return this.un.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(rr.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Lp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new dt(Ve.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new dt(Ve.comparator)).toArray()}};var u2=new Uint8Array(0);var mn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);var fa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Bp=class{constructor(){this.changes=new Ci(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Up=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var jp=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&aa(i.mutation,r,jt.empty(),rt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,me()).next(()=>i))}getLocalViewOfDocuments(e,t,i=me()){let r=er();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=ia();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let i=er();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,me()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,i,r){let o=qn(),s=sa(),c=function(){return sa()}();return t.forEach((l,d)=>{let f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof yn)?o=o.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),aa(f.mutation,d,f.mutation.getFieldMask(),rt.now())):s.set(d.key,jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var m;return c.set(d,new Up(f,(m=s.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let i=sa(),r=new je((s,c)=>s-c),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let f=i.get(l)||jt.empty();f=c.applyToLocalView(d,f),i.set(l,f);let m=(r.get(c.batchId)||me()).add(l);r=r.insert(c.batchId,m)})}).next(()=>{let s=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,m=Ew();f.forEach(y=>{if(!o.has(y)){let A=Ow(t.get(y),i.get(y));A!==null&&m.set(y,A),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,m))}return L.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):L.resolve(er()),c=-1,l=o;return s.next(d=>L.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),o.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{l=l.insert(f,y)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,me())).next(f=>({batchId:c,changes:Tw(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(i=>{let r=ia();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,s=ia();return this.indexManager.getCollectionParents(e,o).next(c=>L.forEach(c,l=>{let d=function(m,y){return new Ei(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(f=>{f.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((l,d)=>{let f=d.getKey();s.get(f)===null&&(s=s.insert(f,Yt.newInvalidDocument(f)))});let c=ia();return s.forEach((l,d)=>{let f=o.get(l);f!==void 0&&aa(f.mutation,d,jt.empty(),rt.now()),ou(t,d)&&(c=c.insert(l,d))}),c})}};var Gp=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return L.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:HR(r.bundledQuery),readTime:bn(r.readTime)}}(t)),L.resolve()}};var $p=class{constructor(){this.overlays=new je(Z.comparator),this.Ir=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let i=er();return L.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){let r=er(),o=t.length+1,s=new Z(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return L.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new je((d,f)=>d-f),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>i){let f=o.get(d.largestBatchId);f===null&&(f=er(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=er(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return L.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Sp(t,i));let o=this.Ir.get(t);o===void 0&&(o=me(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var zp=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var pa=class{constructor(){this.Tr=new dt(He.Er),this.dr=new dt(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new He(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new He(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Z(new Ve([])),i=new He(t,e),r=new He(t,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Z(new Ve([])),i=new He(t,e),r=new He(t,e+1),o=me();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new He(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},He=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||Ie(e.wr,t.wr)}static Ar(e,t){return Ie(e.wr,t.wr)||Z.comparator(e.key,t.key)}};var Hp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new dt(He.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cp(o,t,i,r);this.mutationQueue.push(s);for(let c of r)this.br=this.br.add(new He(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),o=r<0?0:r;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new He(t,0),r=new He(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let c=this.Dr(s.wr);o.push(c)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dt(Ie);return t.forEach(r=>{let o=new He(r,0),s=new He(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],c=>{i=i.add(c.wr)})}),L.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Z.isDocumentKey(o)||(o=o.child(""));let s=new He(new Z(o),0),c=new dt(Ie);return this.br.forEachWhile(l=>{let d=l.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.wr)),!0)},s),L.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return L.forEach(t.mutations,r=>{let o=new He(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new He(t,0),r=this.br.firstAfterOrEqual(i);return L.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var qp=class{constructor(e){this.Mr=e,this.docs=function(){return new je(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let i=qn();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Yt.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=qn(),s=t.path,c=new Z(s.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||tR(eR(f),i)<=0||(r.has(f.key)||ou(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,i,r){ie()}Or(e,t){return L.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Wp(this)}getSize(e){return L.resolve(this.size)}},Wp=class extends Bp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),L.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Kp=class{constructor(e){this.persistence=e,this.Nr=new Ci(t=>Lm(t),Bm),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pa,this.targetCount=0,this.kr=fa.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),L.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new fa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Kn(t),L.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Nr.forEach((s,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),L.waitFor(o).next(()=>r)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this.Br.containsKey(t))}};var Jp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new lw(0),this.Kr=!1,this.Kr=!0,this.$r=new zp,this.referenceDelegate=e(this),this.Ur=new Kp(this),this.indexManager=new Vp,this.remoteDocumentCache=function(r){return new qp(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Fp(t),this.Gr=new Gp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $p,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Hp(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){H("MemoryPersistence","Starting transaction:",e);let r=new Qp(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,t){return L.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},Qp=class extends ap{constructor(e){super(),this.currentSequenceNumber=e}},Yp=class n{constructor(e){this.persistence=e,this.Jr=new pa,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,i=>{let r=Z.fromPath(i);return this.ei(e,r).next(o=>{o||t.removeEntry(r,ce.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return L.or([()=>L.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Xp=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=me(),r=me();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var Zp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var em=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ly()?8:iR(Ze())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Zp;return this.Xi(e,t,s).next(c=>{if(o.result=c,this.zi)return this.es(e,t,s,c.size)})}).next(()=>o.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(na()<=pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",no(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(na()<=pe.DEBUG&&H("QueryEngine","Query:",no(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(na()<=pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",no(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(t))):L.resolve())}Yi(e,t){if(By(t))return L.resolve(null);let i=_n(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Ip(t,null,"F"),i=_n(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=me(...o);return this.Ji.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let d=this.ts(t,c);return this.ns(t,d,s,l.readTime)?this.Yi(e,Ip(t,null,"F")):this.rs(e,d,t,l)}))})))}Zi(e,t,i,r){return By(t)||r.isEqual(ce.min())?L.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let s=this.ts(t,o);return this.ns(t,s,i,r)?L.resolve(null):(na()<=pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),no(t)),this.rs(e,s,t,ZD(r,-1)).next(c=>c))})}ts(e,t){let i=new dt(ww(e));return t.forEach((r,o)=>{ou(e,o)&&(i=i.add(o))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,i){return na()<=pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",no(t)),this.Ji.getDocumentsMatchingQuery(e,t,rr.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tm=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new je(Ie),this._s=new Ci(o=>Lm(o),Bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qR(n,e,t,i){return new tm(n,e,t,i)}function jw(n,e){return g(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],c=[],l=me();for(let d of r){s.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of o){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:c}))})})})}function WR(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let m=d.batch,y=m.keys(),A=L.resolve();return y.forEach(k=>{A=A.next(()=>f.getEntry(l,k)).next(P=>{let O=d.docVersions.get(k);Ae(O!==null),P.version.compareTo(O)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=me();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function Gw(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function KR(n,e){let t=se(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,m)=>{let y=r.get(m);if(!y)return;c.push(t.Ur.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(o,f.addedDocuments,m)));let A=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(ht.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,i)),r=r.insert(m,A),function(P,O,J){return P.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(y,A,f)&&c.push(t.Ur.updateTargetData(o,A))});let l=qn(),d=me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(JR(o,s,e.documentUpdates).next(f=>{l=f.Ps,d=f.Is})),!i.isEqual(ce.min())){let f=t.Ur.getLastRemoteSnapshotVersion(o).next(m=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(f)}return L.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,d)).next(()=>l)}).then(o=>(t.os=r,o))}function JR(n,e,t){let i=me(),r=me();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=qn();return t.forEach((c,l)=>{let d=o.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):H("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function QR(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function YR(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(o=>o?(r=o,L.resolve(r)):t.Ur.allocateTargetId(i).next(s=>(r=new ha(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function nm(n,e,t){return g(this,null,function*(){let i=se(n),r=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!ya(s))throw s;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function Qy(n,e,t){let i=se(n),r=ce.min(),o=me();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,d,f){let m=se(l),y=m._s.get(f);return y!==void 0?L.resolve(m.os.get(y)):m.Ur.getTargetData(d,f)}(i,s,_n(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,t?r:ce.min(),t?o:me())).next(c=>(XR(i,pR(e),c),{documents:c,Ts:o})))}function XR(n,e,t){let i=n.us.get(e)||ce.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}var Vl=class{constructor(){this.activeTargetIds=yR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var im=class{constructor(){this.so=new Vl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vl,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rm=class{_o(e){}shutdown(){}};var Ll=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vl=null;function Qf(){return vl===null?vl=function(){return 268435456+Math.round(2147483648*Math.random())}():vl++,"0x"+vl.toString(16)}var ZR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var om=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",sm=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(t,i,r,o,s){let c=Qf(),l=this.xo(t,i.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(t,l,d,r).then(f=>(H("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw co("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}Lo(t,i,r,o,s,c){return this.Mo(t,i,r,o,s)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>t[s]=o),r&&r.headers.forEach((o,s)=>t[s]=o)}xo(t,i){let r=ZR[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let o=Qf();return new Promise((s,c)=>{let l=new zf;l.setWithCredentials(!0),l.listenOnce(Hf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ta.NO_ERROR:let f=l.getResponseJson();H(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case ta.TIMEOUT:H(ut,`RPC '${e}' ${o} timed out`),c(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:let m=l.getStatus();if(H(ut,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let A=y?.error;if(A&&A.status&&A.message){let k=function(O){let J=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(J)>=0?J:M.UNKNOWN}(A.status);c(new z(k,A.message))}else c(new z(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new z(M.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{H(ut,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(r);H(ut,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",d,i,15)})}Bo(e,t,i){let r=Qf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Kf(),c=Wf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=o.join("");H(ut,`Creating RPC '${e}' stream ${r}: ${f}`,l);let m=s.createWebChannel(f,l),y=!1,A=!1,k=new om({Io:O=>{A?H(ut,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(y||(H(ut,`Opening RPC '${e}' stream ${r} transport.`),m.open(),y=!0),H(ut,`RPC '${e}' stream ${r} sending:`,O),m.send(O))},To:()=>m.close()}),P=(O,J,ne)=>{O.listen(J,q=>{try{ne(q)}catch(Te){setTimeout(()=>{throw Te},0)}})};return P(m,to.EventType.OPEN,()=>{A||(H(ut,`RPC '${e}' stream ${r} transport opened.`),k.yo())}),P(m,to.EventType.CLOSE,()=>{A||(A=!0,H(ut,`RPC '${e}' stream ${r} transport closed`),k.So())}),P(m,to.EventType.ERROR,O=>{A||(A=!0,co(ut,`RPC '${e}' stream ${r} transport errored:`,O),k.So(new z(M.UNAVAILABLE,"The operation could not be completed")))}),P(m,to.EventType.MESSAGE,O=>{var J;if(!A){let ne=O.data[0];Ae(!!ne);let q=ne,Te=q.error||((J=q[0])===null||J===void 0?void 0:J.error);if(Te){H(ut,`RPC '${e}' stream ${r} received error:`,Te);let ke=Te.status,ge=function(v){let w=ze[v];if(w!==void 0)return Pw(w)}(ke),I=Te.message;ge===void 0&&(ge=M.INTERNAL,I="Unknown error status: "+ke+" with message "+Te.message),A=!0,k.So(new z(ge,I)),m.close()}else H(ut,`RPC '${e}' stream ${r} received:`,ne),k.bo(ne)}}),P(c,qf.STAT_EVENT,O=>{O.stat===_l.PROXY?H(ut,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===_l.NOPROXY&&H(ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function Yf(){return typeof document<"u"?document:null}function su(n){return new Op(n,!0)}var Bl=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ul=class{constructor(e,t,i,r,o,s,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return g(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return g(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return g(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(zn(t.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new z(M.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>g(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},am=class extends Ul{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=NR(this.serializer,e),i=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?bn(s.readTime):ce.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=kp(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=yp(l)?{documents:VR(o,l)}:{query:LR(o,l)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=Nw(o,s.resumeToken);let d=Mp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(ce.min())>0){c.readTime=kl(o,s.snapshotVersion.toTimestamp());let d=Mp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let i=UR(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=kp(this.serializer),t.removeTarget=e,this.a_(t)}},cm=class extends Ul{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=FR(e.writeResults,e.commitTime),i=bn(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=kp(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>kR(this.serializer,i))};this.a_(t)}};var lm=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Pp(t,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}Lo(e,t,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Lo(e,Pp(t,i),r,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},um=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zn(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var dm=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>g(this,null,function*(){mr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(l){return g(this,null,function*(){let d=se(l);d.L_.add(4),yield wa(d),d.q_.set("Unknown"),d.L_.delete(4),yield au(d)})}(this))}))}),this.q_=new um(i,r)}};function au(n){return g(this,null,function*(){if(mr(n))for(let e of n.B_)yield e(!0)})}function wa(n){return g(this,null,function*(){for(let e of n.B_)yield e(!1)})}function $w(n,e){let t=se(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),qm(t)?Hm(t):yo(t).r_()&&zm(t,e))}function $m(n,e){let t=se(n),i=yo(t);t.N_.delete(e),i.r_()&&zw(t,e),t.N_.size===0&&(i.r_()?i.o_():mr(t)&&t.q_.set("Unknown"))}function zm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yo(n).A_(e)}function zw(n,e){n.Q_.xe(e),yo(n).R_(e)}function Hm(n){n.Q_=new xp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),yo(n).start(),n.q_.v_()}function qm(n){return mr(n)&&!yo(n).n_()&&n.N_.size>0}function mr(n){return se(n).L_.size===0}function Hw(n){n.Q_=void 0}function ex(n){return g(this,null,function*(){n.q_.set("Online")})}function tx(n){return g(this,null,function*(){n.N_.forEach((e,t)=>{zm(n,e)})})}function nx(n,e){return g(this,null,function*(){Hw(n),qm(n)?(n.q_.M_(e),Hm(n)):n.q_.set("Unknown")})}function ix(n,e,t){return g(this,null,function*(){if(n.q_.set("Online"),e instanceof Pl&&e.state===2&&e.cause)try{yield function(r,o){return g(this,null,function*(){let s=o.cause;for(let c of o.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,s),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield jl(n,i)}else if(e instanceof so?n.Q_.Ke(e):e instanceof Ml?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ce.min()))try{let i=yield Gw(n.localStore);t.compareTo(i)>=0&&(yield function(o,s){let c=o.Q_.rt(s);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.N_.get(d);f&&o.N_.set(d,f.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,d)=>{let f=o.N_.get(l);if(!f)return;o.N_.set(l,f.withResumeToken(ht.EMPTY_BYTE_STRING,f.snapshotVersion)),zw(o,l);let m=new ha(f.target,l,d,f.sequenceNumber);zm(o,m)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){H("RemoteStore","Failed to raise snapshot:",i),yield jl(n,i)}})}function jl(n,e,t){return g(this,null,function*(){if(!ya(e))throw e;n.L_.add(1),yield wa(n),n.q_.set("Offline"),t||(t=()=>Gw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield au(n)}))})}function qw(n,e){return e().catch(t=>jl(n,t,e))}function cu(n){return g(this,null,function*(){let e=se(n),t=Ai(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rx(e);)try{let r=yield QR(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,ox(e,r)}catch(r){yield jl(e,r)}Ww(e)&&Kw(e)})}function rx(n){return mr(n)&&n.O_.length<10}function ox(n,e){n.O_.push(e);let t=Ai(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Ww(n){return mr(n)&&!Ai(n).n_()&&n.O_.length>0}function Kw(n){Ai(n).start()}function sx(n){return g(this,null,function*(){Ai(n).p_()})}function ax(n){return g(this,null,function*(){let e=Ai(n);for(let t of n.O_)e.m_(t.mutations)})}function cx(n,e,t){return g(this,null,function*(){let i=n.O_.shift(),r=Ap.from(i,e,t);yield qw(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield cu(n)})}function lx(n,e){return g(this,null,function*(){e&&Ai(n).V_&&(yield function(i,r){return g(this,null,function*(){if(function(s){return AR(s)&&s!==M.ABORTED}(r.code)){let o=i.O_.shift();Ai(i).s_(),yield qw(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield cu(i)}})}(n,e)),Ww(n)&&Kw(n)})}function Yy(n,e){return g(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let i=mr(t);t.L_.add(3),yield wa(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield au(t)})}function ux(n,e){return g(this,null,function*(){let t=se(n);e?(t.L_.delete(2),yield au(t)):e||(t.L_.add(2),yield wa(t),t.q_.set("Unknown"))})}function yo(n){return n.K_||(n.K_=function(t,i,r){let o=se(t);return o.w_(),new am(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:ex.bind(null,n),Ro:tx.bind(null,n),mo:nx.bind(null,n),d_:ix.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.K_.s_(),qm(n)?Hm(n):n.q_.set("Unknown")):(yield n.K_.stop(),Hw(n))}))),n.K_}function Ai(n){return n.U_||(n.U_=function(t,i,r){let o=se(t);return o.w_(),new cm(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sx.bind(null,n),mo:lx.bind(null,n),f_:ax.bind(null,n),g_:cx.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.U_.s_(),yield cu(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var hm=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let s=Date.now()+i,c=new n(e,t,s,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Wm(n,e){if(zn("AsyncQueue",`${e}: ${n}`),ya(n))return new z(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Gl=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Z.comparator(t.key,i.key):(t,i)=>Z.comparator(t.key,i.key),this.keyedMap=ia(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var $l=class{constructor(){this.W_=new je(Z.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},go=class n{constructor(e,t,i,r,o,s,c,l,d){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,i,r,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Gl.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var fm=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},pm=class{constructor(){this.queries=Xy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=se(t),o=r.queries;r.queries=Xy(),o.forEach((s,c)=>{for(let l of c.j_)l.onError(i)})})(this,new z(M.ABORTED,"Firestore shutting down"))}};function Xy(){return new Ci(n=>yw(n),ru)}function Jw(n,e){return g(this,null,function*(){let t=se(n),i=3,r=e.query,o=t.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new fm,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(r,!0);break;case 1:o.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(s){let c=Wm(s,`Initialization of query '${no(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Km(t)})}function Qw(n,e){return g(this,null,function*(){let t=se(n),i=e.query,r=3,o=t.queries.get(i);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function dx(n,e){let t=se(n),i=!1;for(let r of e){let o=r.query,s=t.queries.get(o);if(s){for(let c of s.j_)c.X_(r)&&(i=!0);s.z_=r}}i&&Km(t)}function hx(n,e,t){let i=se(n),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(t);i.queries.delete(e)}function Km(n){n.Y_.forEach(e=>{e.next()})}var mm,Zy;(Zy=mm||(mm={})).ea="default",Zy.Cache="cache";var zl=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mm.Cache}};var Hl=class{constructor(e){this.key=e}},ql=class{constructor(e){this.key=e}},gm=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=ww(e),this.Ra=new Gl(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new $l,r=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{let y=r.get(f),A=ou(this.query,m)?m:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations),O=!1;y&&A?y.data.isEqual(A.data)?k!==P&&(i.track({type:3,doc:A}),O=!0):this.ga(y,A)||(i.track({type:2,doc:A}),O=!0,(l&&this.Aa(A,l)>0||d&&this.Aa(A,d)<0)&&(c=!0)):!y&&A?(i.track({type:0,doc:A}),O=!0):y&&!A&&(i.track({type:1,doc:y}),O=!0,(l||d)&&(c=!0)),O&&(A?(s=s.add(A),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{Ra:s,fa:i,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((f,m)=>function(A,k){let P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return P(A)-P(k)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,d=l!==this.Ea;return this.Ea=l,s.length!==0||d?{snapshot:new go(this.query,e.Ra,o,s,e.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $l,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new ql(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Hl(i))}),t}ba(e){this.Ta=e.Ts,this.da=me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},_m=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},bm=class{constructor(e){this.key=e,this.va=!1}},vm=class{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ci(c=>yw(c),ru),this.Ma=new Map,this.xa=new Set,this.Oa=new je(Z.comparator),this.Na=new Map,this.La=new pa,this.Ba={},this.ka=new Map,this.qa=fa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function fx(n,e,t=!0){return g(this,null,function*(){let i=n1(n),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield Yw(i,e,t,!0),r})}function px(n,e){return g(this,null,function*(){let t=n1(n);yield Yw(t,e,!0,!1)})}function Yw(n,e,t,i){return g(this,null,function*(){let r=yield YR(n.localStore,_n(e)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return i&&(c=yield mx(n,e,o,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&$w(n.remoteStore,r),c})}function mx(n,e,t,i,r){return g(this,null,function*(){n.Ka=(m,y,A)=>function(P,O,J,ne){return g(this,null,function*(){let q=O.view.ma(J);q.ns&&(q=yield Qy(P.localStore,O.query,!1).then(({documents:I})=>O.view.ma(I,q)));let Te=ne&&ne.targetChanges.get(O.targetId),ke=ne&&ne.targetMismatches.get(O.targetId)!=null,ge=O.view.applyChanges(q,P.isPrimaryClient,Te,ke);return tw(P,O.targetId,ge.wa),ge.snapshot})}(n,m,y,A);let o=yield Qy(n.localStore,e,!0),s=new gm(e,o.Ts),c=s.ma(o.documents),l=da.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),d=s.applyChanges(c,n.isPrimaryClient,l);tw(n,t,d.wa);let f=new _m(e,t,s);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function gx(n,e,t){return g(this,null,function*(){let i=se(n),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!ru(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&$m(i.remoteStore,r.targetId),ym(i,r.targetId)}).catch(va))):(ym(i,r.targetId),yield nm(i.localStore,r.targetId,!0))})}function _x(n,e){return g(this,null,function*(){let t=se(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$m(t.remoteStore,i.targetId))})}function bx(n,e,t){return g(this,null,function*(){let i=Cx(n);try{let r=yield function(s,c){let l=se(s),d=rt.now(),f=c.reduce((A,k)=>A.add(k.key),me()),m,y;return l.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=qn(),P=me();return l.cs.getEntries(A,f).next(O=>{k=O,k.forEach((J,ne)=>{ne.isValidDocument()||(P=P.add(J))})}).next(()=>l.localDocuments.getOverlayedDocuments(A,k)).next(O=>{m=O;let J=[];for(let ne of c){let q=CR(ne,m.get(ne.key).overlayedDocument);q!=null&&J.push(new yn(ne.key,q,fw(q.value.mapValue),$n.exists(!0)))}return l.mutationQueue.addMutationBatch(A,d,J,c)}).next(O=>{y=O;let J=O.applyToLocalDocumentSet(m,P);return l.documentOverlayCache.saveOverlays(A,O.batchId,J)})}).then(()=>({batchId:y.batchId,changes:Tw(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,l){let d=s.Ba[s.currentUser.toKey()];d||(d=new je(Ie)),d=d.insert(c,l),s.Ba[s.currentUser.toKey()]=d}(i,r.batchId,t),yield Ia(i,r.changes),yield cu(i.remoteStore)}catch(r){let o=Wm(r,"Failed to persist write");t.reject(o)}})}function Xw(n,e){return g(this,null,function*(){let t=se(n);try{let i=yield KR(t.localStore,e);e.targetChanges.forEach((r,o)=>{let s=t.Na.get(o);s&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?Ae(s.va):r.removedDocuments.size>0&&(Ae(s.va),s.va=!1))}),yield Ia(t,i,e)}catch(i){yield va(i)}})}function ew(n,e,t){let i=se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((o,s)=>{let c=s.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(s,c){let l=se(s);l.onlineState=c;let d=!1;l.queries.forEach((f,m)=>{for(let y of m.j_)y.Z_(c)&&(d=!0)}),d&&Km(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function vx(n,e,t){return g(this,null,function*(){let i=se(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),o=r&&r.key;if(o){let s=new je(Z.comparator);s=s.insert(o,Yt.newNoDocument(o,ce.min()));let c=me().add(o),l=new Ol(ce.min(),new Map,new je(Ie),s,c);yield Xw(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(e),Jm(i)}else yield nm(i.localStore,e,!1).then(()=>ym(i,e,t)).catch(va)})}function yx(n,e){return g(this,null,function*(){let t=se(n),i=e.batch.batchId;try{let r=yield WR(t.localStore,e);e1(t,i,null),Zw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Ia(t,r)}catch(r){yield va(r)}})}function wx(n,e,t){return g(this,null,function*(){let i=se(n);try{let r=yield function(s,c){let l=se(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ae(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(d,m))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(i.localStore,e);e1(i,e,t),Zw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Ia(i,r)}catch(r){yield va(r)}})}function Zw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function e1(n,e,t){let i=se(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||t1(n,i)})}function t1(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&($m(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Jm(n))}function tw(n,e,t){for(let i of t)i instanceof Hl?(n.La.addReference(i.key,e),Ix(n,i)):i instanceof ql?(H("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||t1(n,i.key)):ie()}function Ix(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(i),Jm(n))}function Jm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Z(Ve.fromString(e)),i=n.qa.next();n.Na.set(i,new bm(t)),n.Oa=n.Oa.insert(t,i),$w(n.remoteStore,new ha(_n(Um(t.path)),i,"TargetPurposeLimboResolution",lw.oe))}}function Ia(n,e,t){return g(this,null,function*(){let i=se(n),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{s.push(i.Ka(l,e,t).then(d=>{var f;if((d||t)&&i.isPrimaryClient){let m=d?!d.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){r.push(d);let m=Xp.Wi(l.targetId,d);o.push(m)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,d){return g(this,null,function*(){let f=se(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,y=>L.forEach(y.$i,A=>f.persistence.referenceDelegate.addReference(m,y.targetId,A)).next(()=>L.forEach(y.Ui,A=>f.persistence.referenceDelegate.removeReference(m,y.targetId,A)))))}catch(m){if(!ya(m))throw m;H("LocalStore","Failed to update sequence numbers: "+m)}for(let m of d){let y=m.targetId;if(!m.fromCache){let A=f.os.get(y),k=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(y,P)}}})}(i.localStore,o))})}function Tx(n,e){return g(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let i=yield jw(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(c=>{c.forEach(l=>{l.reject(new z(M.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Ia(t,i.hs)}})}function Ex(n,e){let t=se(n),i=t.Na.get(e);if(i&&i.va)return me().add(i.key);{let r=me(),o=t.Ma.get(e);if(!o)return r;for(let s of o){let c=t.Fa.get(s);r=r.unionWith(c.view.Va)}return r}}function n1(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ex.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vx.bind(null,e),e.Ca.d_=dx.bind(null,e.eventManager),e.Ca.$a=hx.bind(null,e.eventManager),e}function Cx(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wx.bind(null,e),e}var nw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=su(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return qR(this.persistence,new em,t.initialUser,this.serializer)}Ga(t){return new Jp(Yp.Zr,this.serializer)}Wa(t){return new im}terminate(){return g(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Ax=(()=>{class n{initialize(t,i){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ew(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tx.bind(null,this.syncEngine),yield ux(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new pm}()}createDatastore(t){let i=su(t.databaseInfo.databaseId),r=function(s){return new sm(s)}(t.databaseInfo);return function(s,c,l,d){return new lm(s,c,l,d)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,s,c,l){return new dm(r,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,i=>ew(this.syncEngine,i,0),function(){return Ll.D()?new Ll:new rm}())}createSyncEngine(t,i){return function(o,s,c,l,d,f,m){let y=new vm(o,s,c,l,d,f);return m&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return g(this,null,function*(){var t,i;yield function(o){return g(this,null,function*(){let s=se(o);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Wl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wm=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=et.UNAUTHENTICATED,this.clientId=Tl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>g(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Wm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Xf(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>g(this,null,function*(){i.isEqual(r)||(yield jw(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function iw(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Sx(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Yy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Yy(e.remoteStore,r)),n._onlineComponents=e})}function Sx(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===M.FAILED_PRECONDITION||r.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),yield Xf(n,new nw)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield Xf(n,new nw);return n._offlineComponents})}function i1(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield iw(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield iw(n,new Ax))),n._onlineComponents})}function Dx(n){return i1(n).then(e=>e.syncEngine)}function r1(n){return g(this,null,function*(){let e=yield i1(n),t=e.eventManager;return t.onListen=fx.bind(null,e.syncEngine),t.onUnlisten=gx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=px.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_x.bind(null,e.syncEngine),t})}function Rx(n,e,t={}){let i=new Qt;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,c,l,d){let f=new Wl({next:y=>{f.Za(),s.enqueueAndForget(()=>Qw(o,m));let A=y.docs.has(c);!A&&y.fromCache?d.reject(new z(M.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&y.fromCache&&l&&l.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new zl(Um(c.path),f,{includeMetadataChanges:!0,_a:!0});return Jw(o,m)}(yield r1(n),n.asyncQueue,e,t,i)})),i.promise}function xx(n,e,t={}){let i=new Qt;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,c,l,d){let f=new Wl({next:y=>{f.Za(),s.enqueueAndForget(()=>Qw(o,m)),y.fromCache&&l.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new zl(c,f,{includeMetadataChanges:!0,_a:!0});return Jw(o,m)}(yield r1(n),n.asyncQueue,e,t,i)})),i.promise}function o1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rw=new Map;function s1(n,e,t){if(!t)throw new z(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ox(n,e,t,i){if(e===!0&&i===!0)throw new z(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ow(n){if(!Z.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(Z.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=lu(n);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Kl=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_o=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Zf;switch(i.type){case"firstParty":return new ip(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=rw.get(t);i&&(H("ComponentProvider","Removing Datastore"),rw.delete(t),i.terminate())}(this),Promise.resolve()}};function a1(n,e,t,i={}){var r;let o=(n=wn(n,_o))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=et.MOCK_USER;else{c=iy(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new et(d)}n._authCredentials=new ep(new Il(c,l))}}var hr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},vt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ii=class n extends hr{constructor(e,t,i){super(e,t,Um(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ta(n,e,...t){if(n=Je(n),s1("collection","path",e),n instanceof _o){let i=Ve.fromString(e,...t);return sw(i),new Ii(n,null,i)}{if(!(n instanceof vt||n instanceof Ii))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ve.fromString(e,...t));return sw(i),new Ii(n.firestore,null,i)}}function Di(n,e,...t){if(n=Je(n),arguments.length===1&&(e=Tl.newId()),s1("doc","path",e),n instanceof _o){let i=Ve.fromString(e,...t);return ow(i),new vt(n,null,new Z(i))}{if(!(n instanceof vt||n instanceof Ii))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ve.fromString(e,...t));return ow(i),new vt(n.firestore,n instanceof Ii?n.converter:null,new Z(i))}}var Jl=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bl(this,"async_queue_retry"),this.Vu=()=>{let i=Yf();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Qt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return g(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ya(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(i);throw zn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=hm.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return g(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Si=class extends _o{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Jl,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jl(e),this._firestoreClient=void 0,yield e}})}};function c1(n,e){let t=typeof n=="object"?n:eo(),i=typeof n=="string"?n:e||"(default)",r=ea(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=ny("firestore");o&&a1(r,...o)}return r}function Qm(n){if(n._terminated)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Mx(n),n._firestoreClient}function Mx(n){var e,t,i;let r=n._freezeSettings(),o=function(c,l,d,f){return new cp(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,o1(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new wm(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var ma=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ht.fromBase64String(e))}catch(t){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fr=class{constructor(e){this._methodName=e}};var ga=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}};var _a=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var Px=/^__.*__$/,Im=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,t,this.fieldTransforms):new dr(e,this.data,t,this.fieldTransforms)}},Ql=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new yn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function l1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var Tm=class n{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(l1(this.Cu)&&Px.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Em=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||su(e)}Qu(e,t,i,r=!1){return new Tm({Cu:e,methodName:t,qu:i,path:Nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uu(n){let e=n._freezeSettings(),t=su(n._databaseId);return new Em(n._databaseId,!!e.ignoreUndefinedProperties,t)}function u1(n,e,t,i,r,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,r);Ym("Data must be an object, but it was:",s,i);let c=d1(i,s),l,d;if(o.merge)l=new jt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let m of o.mergeFields){let y=Sm(e,m,t);if(!s.contains(y))throw new z(M.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);f1(f,y)||f.push(y)}l=new jt(f),d=s.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,d=s.fieldTransforms;return new Im(new Pt(c),l,d)}var Yl=class n extends fr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var Cm=class n extends fr{_toFieldTransform(e){return new Rl(e.path,new ar)}isEqual(e){return e instanceof n}};var Am=class n extends fr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ur(e.serializer,Aw(e.serializer,this.$u));return new Rl(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Nx(n,e,t,i){let r=n.Qu(1,e,t);Ym("Data must be an object, but it was:",r,i);let o=[],s=Pt.empty();pr(i,(l,d)=>{let f=Xm(e,l,t);d=Je(d);let m=r.Nu(f);if(d instanceof Yl)o.push(f);else{let y=Ea(d,m);y!=null&&(o.push(f),s.set(f,y))}});let c=new jt(o);return new Ql(s,c,r.fieldTransforms)}function kx(n,e,t,i,r,o){let s=n.Qu(1,e,t),c=[Sm(e,i,t)],l=[r];if(o.length%2!=0)throw new z(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(Sm(e,o[y])),l.push(o[y+1]);let d=[],f=Pt.empty();for(let y=c.length-1;y>=0;--y)if(!f1(d,c[y])){let A=c[y],k=l[y];k=Je(k);let P=s.Nu(A);if(k instanceof Yl)d.push(A);else{let O=Ea(k,P);O!=null&&(d.push(A),f.set(A,O))}}let m=new jt(d);return new Ql(f,m,s.fieldTransforms)}function Fx(n,e,t,i=!1){return Ea(t,n.Qu(i?4:3,e))}function Ea(n,e){if(h1(n=Je(n)))return Ym("Unsupported field value:",e,n),d1(n,e);if(n instanceof fr)return function(i,r){if(!l1(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let c of i){let l=Ea(c,r.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if((i=Je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Aw(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=rt.fromDate(i);return{timestampValue:kl(r.serializer,o)}}if(i instanceof rt){let o=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kl(r.serializer,o)}}if(i instanceof ga)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ma)return{bytesValue:Nw(r.serializer,i._byteString)};if(i instanceof vt){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof _a)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return jm(c.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${lu(i)}`)}(n,e)}function d1(n,e){let t={};return uw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(n,(i,r)=>{let o=Ea(r,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function h1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof ga||n instanceof ma||n instanceof vt||n instanceof fr||n instanceof _a)}function Ym(n,e,t){if(!h1(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=lu(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Sm(n,e,t){if((e=Je(e))instanceof bo)return e._internalPath;if(typeof e=="string")return Xm(n,e);throw Xl("Field path arguments must be of type string or ",n,!1,void 0,t)}var Vx=new RegExp("[~\\*/\\[\\]]");function Xm(n,e,t){if(e.search(Vx)>=0)throw Xl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bo(...e.split("."))._internalPath}catch{throw Xl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xl(n,e,t,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new z(M.INVALID_ARGUMENT,c+n+l)}function f1(n,e){return n.some(t=>t.isEqual(e))}var Zl=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Dm=class extends Zl{data(){return super.data()}};function Zm(n,e){return typeof e=="string"?Xm(n,e):e instanceof bo?e._internalPath:e._delegate._internalPath}function Lx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ba=class{},eu=class extends ba{};function eg(n,e,...t){let i=[];e instanceof ba&&i.push(e),i=i.concat(t),function(o){let s=o.filter(l=>l instanceof xm).length,c=o.filter(l=>l instanceof Rm).length;if(s>1||s>0&&c>0)throw new z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Rm=class n extends eu{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return p1(e._query,t),new hr(e.firestore,e.converter,wp(e._query,t))}_parse(e){let t=uu(e.firestore);return function(o,s,c,l,d,f,m){let y;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cw(m,f);let A=[];for(let k of m)A.push(aw(l,o,k));y={arrayValue:{values:A}}}else y=aw(l,o,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cw(m,f),y=Fx(c,s,m,f==="in"||f==="not-in");return qe.create(d,f,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var xm=class n extends ba{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Xt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let s=r,c=o.getFlattenedFilters();for(let l of c)p1(s,l),s=wp(s,l)}(e._query,t),new hr(e.firestore,e.converter,wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Om=class n extends eu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,o,s){if(r.startAt!==null)throw new z(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sr(o,s)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Ei(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function tg(n,e="asc"){let t=e,i=Zm("orderBy",n);return Om._create(i,t)}function aw(n,e,t){if(typeof(t=Je(t))=="string"){if(t==="")throw new z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&t.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ve.fromString(t));if(!Z.isDocumentKey(i))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Py(n,new Z(i))}if(t instanceof vt)return Py(n,t._key);throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(t)}.`)}function cw(n,e){if(!Array.isArray(n)||n.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p1(n,e){let t=function(r,o){for(let s of r)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Mm=class{convertValue(e,t="none"){switch(or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return pr(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Ne(s.doubleValue));return new _a(o)}convertGeoPoint(e){return new ga(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Fm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){let t=Hn(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ve.fromString(e);Ae(Uw(i));let r=new Sl(i.get(1),i.get(3)),o=new Z(i.popFirst(5));return r.isEqual(t)||zn(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function m1(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var nr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tu=class extends Zl{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Zm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ao=class extends tu{data(e={}){return super.data(e)}},Pm=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ao(this._firestore,this._userDataWriter,i.key,i,new nr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>{let l=new ao(r._firestore,r._userDataWriter,c.doc.key,c.doc,new nr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new ao(r._firestore,r._userDataWriter,c.doc.key,c.doc,new nr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:Bx(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Bx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function ng(n){n=wn(n,vt);let e=wn(n.firestore,Si);return Rx(Qm(e),n._key).then(t=>Ux(e,n,t))}var nu=class extends Mm{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}};function ig(n){n=wn(n,hr);let e=wn(n.firestore,Si),t=Qm(e),i=new nu(e);return Lx(n._query),xx(t,n._query).then(r=>new Pm(e,i,n,r))}function Ca(n,e,t){n=wn(n,vt);let i=wn(n.firestore,Si),r=m1(n.converter,e,t);return og(i,[u1(uu(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,$n.none())])}function rg(n,e,t,...i){n=wn(n,vt);let r=wn(n.firestore,Si),o=uu(r),s;return s=typeof(e=Je(e))=="string"||e instanceof bo?kx(o,"updateDoc",n._key,e,t,i):Nx(o,"updateDoc",n._key,e),og(r,[s.toMutation(n._key,$n.exists(!0))])}function du(n,e){let t=wn(n.firestore,Si),i=Di(n),r=m1(n.converter,e);return og(t,[u1(uu(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,$n.exists(!1))]).then(()=>i)}function og(n,e){return function(i,r){let o=new Qt;return i.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return bx(yield Dx(i),r,o)})),o.promise}(Qm(n),e)}function Ux(n,e,t){let i=t.docs.get(e._key),r=new nu(n);return new tu(n,r,e._key,i,new nr(t.hasPendingWrites,t.fromCache),e.converter)}function gr(){return new Cm("serverTimestamp")}function sg(n){return new Am("increment",n)}(function(e,t=!0){(function(r){vo=r})(yi),vi(new Ut("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),c=new Si(new tp(i.getProvider("auth-internal")),new op(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(d.options.projectId,f)}(s,r),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Qe(Ry,"4.7.3",e),Qe(Ry,"4.7.3","esm2017")})();var jx="firebase",Gx="10.14.1";Qe(jx,Gx,"app");var br=new Br("ANGULARFIRE2_VERSION");function fu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Aa=(n,e)=>{let t=e?[e]:ml(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Io=class{constructor(){return Aa($x)}},$x="app-check";function wo(){}var hu=class{zone;delegate;constructor(e,t=Lb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,i)}},ag=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo)),t.pipe(Ue({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},To=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new hu(Zone.current)),this.insideAngular=t.run(()=>new hu(Zone.current,Vb)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(j(ae))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function zx(n){return pu().ngZone.runOutsideAngular(()=>n())}function _r(n){return pu().ngZone.run(()=>n())}function Hx(n){return qx(pu())(n)}function qx(n){return function(t){return t=t.lift(new ag(n.ngZone)),t.pipe(qd(n.outsideAngular),Hd(n.insideAngular))}}var Wx=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_r(()=>n.apply(void 0,i))},Zt=(n,e)=>function(){let t,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(t||=_r(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo))),i[o]=Wx(i[o],t));let r=zx(()=>n.apply(this,i));if(!e)if(r instanceof Ft){let o=pu();return r.pipe(qd(o.outsideAngular),Hd(o.insideAngular))}else return _r(()=>r);return r instanceof Ft?r.pipe(Hx):r instanceof Promise?_r(()=>new Promise((o,s)=>r.then(c=>_r(()=>o(c)),c=>_r(()=>s(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:_r(()=>r)};var Wn=class{constructor(e){return e}},vr=class{constructor(){return ml()}};function Kx(n){return n&&n.length===1?n[0]:new Wn(eo())}var cg=new Y("angularfire2._apps"),Jx={provide:Wn,useFactory:Kx,deps:[[new gt,cg]]},Qx={provide:vr,deps:[[new gt,cg]]};function Yx(n){return(e,t)=>{let i=t.get(Rt);Qe("angularfire",br.full,"core"),Qe("angularfire",br.full,"app"),Qe("angular",b0.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Wn(r)}}function g1(n,...e){return It([Jx,Qx,{provide:cg,useFactory:Yx(n),multi:!0,deps:[ae,Fe,To,...e]}])}var _1=Zt(Gf,!0);function N1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var k1=N1,F1=new Un("auth","Firebase",N1());var yu=new _i("@firebase/auth");function Xx(n,...e){yu.logLevel<=pe.WARN&&yu.warn(`Auth (${yi}): ${n}`,...e)}function gu(n,...e){yu.logLevel<=pe.ERROR&&yu.error(`Auth (${yi}): ${n}`,...e)}function Tn(n,...e){throw Og(n,...e)}function yr(n,...e){return Og(n,...e)}function V1(n,e,t){let i=Object.assign(Object.assign({},k1()),{[e]:t});return new Un("auth","Firebase",i).create(e,{appName:n.name})}function Qn(n){return V1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return F1.create(n,...e)}function re(n,e,...t){if(!n)throw Og(e,...t)}function Kn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw gu(e),new Error(e)}function xi(n,e){n||Kn(e)}function hg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Zx(){return b1()==="http:"||b1()==="https:"}function b1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function eO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||sy()||"connection"in navigator)?navigator.onLine:!0}function tO(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var wr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=ry()||ay()}get(){return eO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Mg(n,e){xi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wu=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iO=new wr(3e4,6e4);function Oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Mi(o,s,c,l){return g(this,arguments,function*(n,e,t,i,r={}){return L1(n,r,()=>g(this,null,function*(){let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});let m=Ys(Object.assign({key:n.config.apiKey},f)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let A=Object.assign({method:e,headers:y},d);return oy()||(A.referrerPolicy="no-referrer"),wu.fetch()(B1(n,n.config.apiHost,t,m),A)}))})}function L1(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},nO),e);try{let r=new fg(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw mu(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw mu(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw mu(n,"user-disabled",s);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw V1(n,f,d);Tn(n,f)}}catch(r){if(r instanceof Mt)throw r;Tn(n,"network-request-failed",{message:String(r)})}})}function Na(o,s,c,l){return g(this,arguments,function*(n,e,t,i,r={}){let d=yield Mi(n,e,t,i,r);return"mfaPendingCredential"in d&&Tn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function B1(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Mg(n.config,r):`${n.config.apiScheme}://${r}`}function rO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var fg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),iO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function mu(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=yr(n,e,i);return r.customData._tokenResponse=t,r}function v1(n){return n!==void 0&&n.enterprise!==void 0}var pg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function oO(n,e){return g(this,null,function*(){return Mi(n,"GET","/v2/recaptchaConfig",Oi(n,e))})}function sO(n,e){return g(this,null,function*(){return Mi(n,"POST","/v1/accounts:delete",e)})}function U1(n,e){return g(this,null,function*(){return Mi(n,"POST","/v1/accounts:lookup",e)})}function Sa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Pg(n,e=!1){return g(this,null,function*(){let t=Je(n),i=yield t.getIdToken(e),r=Ng(i);re(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:Sa(lg(r.auth_time)),issuedAtTime:Sa(lg(r.iat)),expirationTime:Sa(lg(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function lg(n){return Number(n)*1e3}function Ng(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return gu("JWT malformed, contained fewer than 3 sections"),null;try{let r=Tf(t);return r?JSON.parse(r):(gu("Failed to decode base64 JWT payload"),null)}catch(r){return gu("Caught error parsing JWT payload as JSON",r?.toString()),null}}function y1(n){let e=Ng(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ra(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Mt&&aO(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function aO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sa(this.lastLoginAt),this.creationTime=Sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Iu(n){return g(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ra(n,U1(t,{idToken:i}));re(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?j1(o.providerUserInfo):[],c=cO(n.providerData,s),l=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!c?.length,f=l?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xa(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function kg(n){return g(this,null,function*(){let e=Je(n);yield Iu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function cO(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function j1(n){return n.map(e=>{var{providerId:t}=e,i=zd(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function lO(n,e){return g(this,null,function*(){let t=yield L1(n,{},()=>g(this,null,function*(){let i=Ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=B1(n,r,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",wu.fetch()(s,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function uO(n,e){return g(this,null,function*(){return Mi(n,"POST","/v2/accounts:revokeToken",Oi(n,e))})}var Da=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=y1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield lO(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new n;return i&&(re(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(re(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kn("not implemented")}};function Ri(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Eo=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=zd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield Ra(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Pg(this,e)}reload(){return kg(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Iu(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Jt(this.auth.app))return Promise.reject(Qn(this.auth));let e=yield this.getIdToken();return yield Ra(this,sO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,c,l,d,f;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,y=(r=t.email)!==null&&r!==void 0?r:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,O=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,J=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ne=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:q,emailVerified:Te,isAnonymous:ke,providerData:ge,stsTokenManager:I}=t;re(q&&I,e,"internal-error");let _=Da.fromJSON(this.name,I);re(typeof q=="string",e,"internal-error"),Ri(m,e.name),Ri(y,e.name),re(typeof Te=="boolean",e,"internal-error"),re(typeof ke=="boolean",e,"internal-error"),Ri(A,e.name),Ri(k,e.name),Ri(P,e.name),Ri(O,e.name),Ri(J,e.name),Ri(ne,e.name);let v=new n({uid:q,auth:e,email:y,emailVerified:Te,displayName:m,isAnonymous:ke,photoURL:k,phoneNumber:A,tenantId:P,stsTokenManager:_,createdAt:J,lastLoginAt:ne});return ge&&Array.isArray(ge)&&(v.providerData=ge.map(w=>Object.assign({},w))),O&&(v._redirectEventId=O),v}static _fromIdTokenResponse(e,t,i=!1){return g(this,null,function*(){let r=new Da;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Iu(o),o})}static _fromGetAccountInfoResponse(e,t,i){return g(this,null,function*(){let r=t.users[0];re(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?j1(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,c=new Da;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:s}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new xa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(l,d),l})}};var w1=new Map;function Jn(n){xi(n instanceof Function,"Expected a class definition");let e=w1.get(n);return e?(xi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,w1.set(n,e),e)}var dO=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(t,i){return g(this,null,function*(){this.storage[t]=i})}_get(t){return g(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return g(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),gg=dO;function _u(n,e,t){return`firebase:${n}:${e}:${t}`}var Tu=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=_u(this.userKey,r.apiKey,o),this.fullPersistenceKey=_u("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Eo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return g(this,null,function*(){if(!t.length)return new n(Jn(gg),e,i);let r=(yield Promise.all(t.map(d=>g(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=r[0]||Jn(gg),s=_u(i,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(s);if(f){let m=Eo._fromJSON(e,f);d!==o&&(c=m),o=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,i):(o=l[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(d=>g(this,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,i))})}};function I1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W1(e))return"Blackberry";if(K1(e))return"Webos";if($1(e))return"Safari";if((e.includes("chrome/")||z1(e))&&!e.includes("edge/"))return"Chrome";if(q1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function G1(n=Ze()){return/firefox\//i.test(n)}function $1(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z1(n=Ze()){return/crios\//i.test(n)}function H1(n=Ze()){return/iemobile/i.test(n)}function q1(n=Ze()){return/android/i.test(n)}function W1(n=Ze()){return/blackberry/i.test(n)}function K1(n=Ze()){return/webos/i.test(n)}function Fg(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hO(n=Ze()){var e;return Fg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fO(){return cy()&&document.documentMode===10}function J1(n=Ze()){return Fg(n)||q1(n)||K1(n)||W1(n)||/windows phone/i.test(n)||H1(n)}function Q1(n,e=[]){let t;switch(n){case"Browser":t=I1(Ze());break;case"Worker":t=`${I1(Ze())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yi}/${i}`}var _g=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((s,c)=>{try{let l=e(o);s(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function pO(t){return g(this,arguments,function*(n,e={}){return Mi(n,"GET","/v2/passwordPolicy",Oi(n,e))})}var mO=6,bg=class{constructor(e){var t,i,r,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:mO,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,s,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var vg=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eu(this),this.idTokenSubscription=new Eu(this),this.beforeStateQueue=new _g(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jn(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Tu.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield U1(this,{idToken:e}),i=yield Eo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var t;if(Jt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===c)&&l?.user&&(r=l.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Iu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=tO()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Jt(this.app))return Promise.reject(Qn(this));let t=e?Je(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Jt(this.app)?Promise.reject(Qn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Jt(this.app)?Promise.reject(Qn(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(Jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield pO(this),t=new bg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield uO(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jn(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield Tu.create(this,[Jn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return g(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Xx(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Tr(n){return Je(n)}var Eu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hy(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ou={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gO(n){Ou=n}function Y1(n){return Ou.loadJS(n)}function _O(){return Ou.recaptchaEnterpriseScript}function bO(){return Ou.gapiScript}function X1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var vO="recaptcha-enterprise",yO="NO_RECAPTCHA",yg=class{constructor(e){this.type=vO,this.auth=Tr(e)}verify(e="verify",t=!1){return g(this,null,function*(){function i(o){return g(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>g(this,null,function*(){oO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new pg(l);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(l=>{c(l)})}))})}function r(o,s,c){let l=window.grecaptcha;v1(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(yO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{i(this.auth).then(c=>{if(!t&&v1(window.grecaptcha))r(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_O();l.length!==0&&(l+=c),Y1(l).then(()=>{r(c,o,s)}).catch(d=>{s(d)})}}).catch(c=>{s(c)})})})}};function T1(n,e,t,i=!1){return g(this,null,function*(){let r=new yg(n),o;try{o=yield r.verify(t)}catch{o=yield r.verify(t,!0)}let s=Object.assign({},e);return i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function wg(n,e,t,i){return g(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield T1(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(o=>g(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield T1(n,e,t,t==="getOobCode");return i(n,s)}else return Promise.reject(o)}))})}function Vg(n,e){let t=ea(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Xi(o,e??{}))return r;Tn(r,"already-initialized")}return t.initialize({options:e})}function wO(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Jn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Lg(n,e,t){let i=Tr(n);re(i._canInitEmulator,i,"emulator-config-failed"),re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=Z1(e),{host:s,port:c}=IO(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${s}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||TO()}function Z1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IO(n){let e=Z1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:E1(i.substr(o.length+1))}}else{let[o,s]=i.split(":");return{host:o,port:E1(s)}}}function E1(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function TO(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Oa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,t){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}};function EO(n,e){return g(this,null,function*(){return Mi(n,"POST","/v1/accounts:signUp",e)})}function CO(n,e){return g(this,null,function*(){return Na(n,"POST","/v1/accounts:signInWithPassword",Oi(n,e))})}function AO(n,e){return g(this,null,function*(){return Na(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))})}function SO(n,e){return g(this,null,function*(){return Na(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))})}var Ma=class n extends Oa{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return g(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,t,"signInWithPassword",CO);case"emailLink":return AO(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_linkToIdToken(e,t){return g(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,i,"signUpPassword",EO);case"emailLink":return SO(e,{idToken:t,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ug(n,e){return g(this,null,function*(){return Na(n,"POST","/v1/accounts:signInWithIdp",Oi(n,e))})}function DO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RO(n){let e=Xr(Zr(n)).link,t=e?Xr(Zr(e)).deep_link_id:null,i=Xr(Zr(n)).deep_link_id;return(i?Xr(Zr(i)).link:null)||i||t||e||n}var Cu=class n{constructor(e){var t,i,r,o,s,c;let l=Xr(Zr(e)),d=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,m=DO((r=l.mode)!==null&&r!==void 0?r:null);re(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=RO(e);try{return new n(t)}catch{return null}}};var eI=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Ma._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Cu.parseLink(i);return re(r,"argument-error"),Ma._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Au=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ig=class extends Au{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function xO(n,e){return g(this,null,function*(){return Na(n,"POST","/v1/accounts:signUp",Oi(n,e))})}var Co=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return g(this,null,function*(){let o=yield Eo._fromIdTokenResponse(e,i,r),s=C1(i);return new n({user:o,providerId:s,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return g(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=C1(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function C1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Tg=class n extends Mt{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function tI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Tg._fromErrorAndOperation(n,o,e,i):o})}function OO(n,e,t=!1){return g(this,null,function*(){let i=yield Ra(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Co._forOperation(n,"link",i)})}function MO(n,e,t=!1){return g(this,null,function*(){let{auth:i}=n;if(Jt(i.app))return Promise.reject(Qn(i));let r="reauthenticate";try{let o=yield Ra(n,tI(i,r,e,n),t);re(o.idToken,i,"internal-error");let s=Ng(o.idToken);re(s,i,"internal-error");let{sub:c}=s;return re(n.uid===c,i,"user-mismatch"),Co._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Tn(i,"user-mismatch"),o}})}function nI(n,e,t=!1){return g(this,null,function*(){if(Jt(n.app))return Promise.reject(Qn(n));let i="signIn",r=yield tI(n,i,e),o=yield Co._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function Bg(n,e){return g(this,null,function*(){return nI(Tr(n),e)})}function iI(n){return g(this,null,function*(){let e=Tr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ug(n,e,t){return g(this,null,function*(){if(Jt(n.app))return Promise.reject(Qn(n));let i=Tr(n),s=yield wg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iI(n),l}),c=yield Co._fromIdTokenResponse(i,"signIn",s);return yield i._updateCurrentUser(c.user),c})}function jg(n,e,t){return Jt(n.app)?Promise.reject(Qn(n)):Bg(Je(n),eI.credential(e,t)).catch(i=>g(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&iI(n),i}))}function Gg(n,e,t,i){return Je(n).onIdTokenChanged(e,t,i)}function $g(n,e,t){return Je(n).beforeAuthStateChanged(e,t)}function zg(n){return Je(n).signOut()}var Su="__sak";var Du=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var PO=1e3,NO=10,kO=(()=>{class n extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},s=this.storage.getItem(r);fO()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,NO):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return g(this,null,function*(){yield ri(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return g(this,null,function*(){let i=yield ri(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return g(this,null,function*(){yield ri(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),rI=kO;var FO=(()=>{class n extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Hg=FO;function VO(n){return Promise.all(n.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var LO=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return g(this,null,function*(){let i=t,{eventId:r,eventType:o,data:s}=i.data,c=this.handlersMap[o];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let l=Array.from(c).map(f=>g(this,null,function*(){return f(i.origin,s)})),d=yield VO(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:d})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function oI(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Eg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return g(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((c,l)=>{let d=oI("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(m){let y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function In(){return window}function BO(n){In().location.href=n}function sI(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}function UO(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function jO(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function GO(){return sI()?self:null}var aI="firebaseLocalStorageDb",$O=1,Ru="firebaseLocalStorage",cI="fbase_key",Ir=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Mu(n,e){return n.transaction([Ru],e?"readwrite":"readonly").objectStore(Ru)}function zO(){let n=indexedDB.deleteDatabase(aI);return new Ir(n).toPromise()}function Cg(){let n=indexedDB.open(aI,$O);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Ru,{keyPath:cI})}catch(r){t(r)}}),n.addEventListener("success",()=>g(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Ru)?e(i):(i.close(),yield zO(),e(yield Cg()))}))})}function A1(n,e,t){return g(this,null,function*(){let i=Mu(n,!0).put({[cI]:e,value:t});return new Ir(i).toPromise()})}function HO(n,e){return g(this,null,function*(){let t=Mu(n,!1).get(e),i=yield new Ir(t).toPromise();return i===void 0?null:i.value})}function S1(n,e){let t=Mu(n,!0).delete(e);return new Ir(t).toPromise()}var qO=800,WO=3,KO=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield Cg(),this.db)})}_withRetries(t){return g(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>WO)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return sI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=LO._getInstance(GO()),this.receiver._subscribe("keyChanged",(t,i)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var t,i;if(this.activeServiceWorker=yield UO(),!this.activeServiceWorker)return;this.sender=new Eg(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||jO()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Cg();return yield A1(t,Su,"1"),yield S1(t,Su),!0}catch{}return!1})}_withPendingWrite(t){return g(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>A1(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return g(this,null,function*(){let i=yield this._withRetries(r=>HO(r,t));return this.localCache[t]=i,i})}_remove(t){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>S1(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return g(this,null,function*(){let t=yield this._withRetries(o=>{let s=Mu(o,!1).getAll();return new Ir(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),qO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lI=KO;var G2=X1("rcb"),$2=new wr(3e4,6e4);function JO(n,e){return e?Jn(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Pa=class extends Oa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ug(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ug(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ug(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function QO(n){return nI(n.auth,new Pa(n),n.bypassAuthState)}function YO(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),MO(t,new Pa(n),n.bypassAuthState)}function XO(n){return g(this,null,function*(){let{auth:e,user:t}=n;return re(t,e,"internal-error"),OO(t,new Pa(n),n.bypassAuthState)})}var Ag=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QO;case"linkViaPopup":case"linkViaRedirect":return XO;case"reauthViaPopup":case"reauthViaRedirect":return YO;default:Tn(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var z2=new wr(2e3,1e4);var ZO="pendingRedirect",bu=new Map,Sg=class n extends Ag{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return g(this,null,function*(){let e=bu.get(this.auth._key());if(!e){try{let i=(yield eM(this.resolver,this.auth))?yield ri(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}bu.set(this.auth._key(),e)}return this.bypassAuthState||bu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return ri(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ri(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function eM(n,e){return g(this,null,function*(){let t=iM(e),i=nM(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function tM(n,e){bu.set(n._key(),e)}function nM(n){return Jn(n._redirectPersistence)}function iM(n){return _u(ZO,n.config.apiKey,n.name)}function rM(n,e,t=!1){return g(this,null,function*(){if(Jt(n.app))return Promise.reject(Qn(n));let i=Tr(n),r=JO(i,e),s=yield new Sg(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})}var oM=10*60*1e3,Dg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!uI(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oM&&this.cachedEventUids.clear(),this.cachedEventUids.has(D1(e))}saveEventToCache(e){this.cachedEventUids.add(D1(e)),this.lastProcessedEventTime=Date.now()}};function D1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function uI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uI(n);default:return!1}}function aM(t){return g(this,arguments,function*(n,e={}){return Mi(n,"GET","/v1/projects",e)})}var cM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lM=/^https?/;function uM(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield aM(n);for(let t of e)try{if(dM(t))return}catch{}Tn(n,"unauthorized-domain")})}function dM(n){let e=hg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!lM.test(t))return!1;if(cM.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var hM=new wr(3e4,6e4);function R1(){let n=In().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fM(n){return new Promise((e,t)=>{var i,r,o;function s(){R1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R1(),t(yr(n,"network-request-failed"))},timeout:hM.get()})}if(!((r=(i=In().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)s();else{let c=X1("iframefcb");return In()[c]=()=>{gapi.load?s():t(yr(n,"network-request-failed"))},Y1(`${bO()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw vu=null,e})}var vu=null;function pM(n){return vu=vu||fM(n),vu}var mM=new wr(5e3,15e3),gM="__/auth/iframe",_M="emulator/auth/iframe",bM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yM(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Mg(e,_M):`https://${n.config.authDomain}/${gM}`,i={apiKey:e.apiKey,appName:n.name,v:yi},r=vM.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Ys(i).slice(1)}`}function wM(n){return g(this,null,function*(){let e=yield pM(n),t=In().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:yM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bM,dontclear:!0},i=>new Promise((r,o)=>g(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let s=yr(n,"network-request-failed"),c=In().setTimeout(()=>{o(s)},mM.get());function l(){In().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{o(s)})})))})}var IM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TM=500,EM=600,CM="_blank",AM="http://localhost",xu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function SM(n,e,t,i=TM,r=EM){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},IM),{width:i.toString(),height:r.toString(),top:o,left:s}),d=Ze().toLowerCase();t&&(c=z1(d)?CM:t),G1(d)&&(e=e||AM,l.scrollbars="yes");let f=Object.entries(l).reduce((y,[A,k])=>`${y}${A}=${k},`,"");if(hO(d)&&c!=="_self")return DM(e||"",c),new xu(null);let m=window.open(e||"",c,f);re(m,n,"popup-blocked");try{m.focus()}catch{}return new xu(m)}function DM(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var RM="__/auth/handler",xM="emulator/auth/handler",OM=encodeURIComponent("fac");function x1(n,e,t,i,r,o){return g(this,null,function*(){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:yi,eventId:r};if(e instanceof Au){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",dy(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(o||{}))s[f]=m}if(e instanceof Ig){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?`#${OM}=${encodeURIComponent(l)}`:"";return`${MM(n)}?${Ys(c).slice(1)}${d}`})}function MM({config:n}){return n.emulator?Mg(n,xM):`https://${n.authDomain}/${RM}`}var dg="webStorageSupport",Rg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hg,this._completeRedirectFn=rM,this._overrideRedirectResult=tM}_openPopup(e,t,i,r){return g(this,null,function*(){var o;xi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield x1(e,t,i,hg(),r);return SM(e,s,oI())})}_openRedirect(e,t,i,r){return g(this,null,function*(){yield this._originValidation(e);let o=yield x1(e,t,i,hg(),r);return BO(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(xi(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return g(this,null,function*(){let t=yield wM(e),i=new Dg(e);return t.register("authEvent",r=>(re(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dg,{type:dg},r=>{var o;let s=(o=r?.[0])===null||o===void 0?void 0:o[dg];s!==void 0&&t(!!s),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J1()||$1()||Fg()}},dI=Rg;var O1="@firebase/auth",M1="1.7.9";var xg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function PM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NM(n){vi(new Ut("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=i.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(n)},d=new vg(i,r,o,l);return wO(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),vi(new Ut("auth-internal",e=>{let t=Tr(e.getProvider("auth").getImmediate());return(i=>new xg(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(O1,M1,PM(n)),Qe(O1,M1,"esm2017")}var kM=5*60,FM=Af("authIdTokenMaxAge")||kM,P1=null,VM=n=>e=>g(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FM)return;let r=t?.token;P1!==r&&(P1=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function qg(n=eo()){let e=ea(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Vg(n,{popupRedirectResolver:dI,persistence:[lI,rI,Hg]}),i=Af("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let s=VM(o.toString());$g(t,s,()=>s(t.currentUser)),Gg(t,c=>s(c))}}let r=Ef("auth");return r&&Lg(t,`http://${r}`),t}function LM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gO({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=yr("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",LM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NM("Browser");var hI="auth",Er=class{constructor(e){return e}},ka=class{constructor(){return Aa(hI)}};var Wg=new Y("angularfire2.auth-instances");function DP(n,e){let t=fu(hI,n,e);return t&&new Er(t)}function RP(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Er(i)}}var xP={provide:ka,deps:[[new gt,Wg]]},OP={provide:Er,useFactory:DP,deps:[[new gt,Wg],Wn]};function fI(n,...e){return Qe("angularfire",br.full,"auth"),It([OP,xP,{provide:Wg,useFactory:RP(n),multi:!0,deps:[ae,Fe,To,vr,[new gt,Io],...e]}])}var pI=Zt(Ug,!0);var mI=Zt(qg,!0);var gI=Zt(jg,!0);var _I=Zt(zg,!0);var kt=class{constructor(e){return e}},bI="firestore",Kg=class{constructor(){return Aa(bI)}};var Jg=new Y("angularfire2.firestore-instances");function MP(n,e){let t=fu(bI,n,e);return t&&new kt(t)}function PP(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new kt(i)}}var NP={provide:Kg,deps:[[new gt,Jg]]},kP={provide:kt,useFactory:MP,deps:[[new gt,Jg],Wn]};function vI(n,...e){return Qe("angularfire",br.full,"fst"),It([kP,NP,{provide:Jg,useFactory:PP(n),multi:!0,deps:[ae,Fe,To,vr,[new gt,ka],[new gt,Io],...e]}])}var yI=Zt(du,!0);var wI=Zt(Ta,!0);var II=Zt(c1,!0);var Gt=class n{static COLECCION_USUARIOS="usuarios";firestore=S(kt);fireAuth=S(Er);registrar(e,t){return g(this,null,function*(){try{let i=yield pI(this.fireAuth,e,t),r=i.user.uid,o=Di(this.firestore,n.COLECCION_USUARIOS,r);return yield Ca(o,{FECHA_REGISTRO:gr(),ULTIMA_CONEXION:gr(),CORREO:e}),i}catch(i){throw i}})}iniciarSesion(e,t){return g(this,null,function*(){try{let i=yield gI(this.fireAuth,e,t),r=i.user.uid,o=Di(this.firestore,n.COLECCION_USUARIOS,r);return yield rg(o,{ULTIMA_CONEXION:gr()}),i}catch(i){throw i}})}cerrarSesion(){return _I(this.fireAuth).then(()=>console.log("Sesi\xF3n cerrada con \xE9xito")).catch(e=>e)}obtenerDatosUsuario(){return g(this,null,function*(){let e=this.fireAuth.currentUser;if(!e)return Promise.reject("No hay un usuario autenticado.");let t=Di(this.firestore,n.COLECCION_USUARIOS,e.uid),i=yield ng(t);return i.exists()?i.data():null})}obtenerUsuario(){return this.fireAuth.currentUser}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var TI=["toast-component",""];function VP(n,e){if(n&1){let t=Pe();D(0,"button",5),X("click",function(){De(t);let r=W();return Re(r.remove())}),D(1,"span",6),N(2,"\xD7"),x()()}}function LP(n,e){if(n&1&&(vc(0),N(1),yc()),n&2){let t=W(2);V(),xe("[",t.duplicatesCount+1,"]")}}function BP(n,e){if(n&1&&(D(0,"div"),N(1),fe(2,LP,2,1,"ng-container",4),x()),n&2){let t=W();Ke(t.options.titleClass),We("aria-label",t.title),V(),xe(" ",t.title," "),V(),$("ngIf",t.duplicatesCount)}}function UP(n,e){if(n&1&&K(0,"div",7),n&2){let t=W();Ke(t.options.messageClass),$("innerHTML",t.message,ih)}}function jP(n,e){if(n&1&&(D(0,"div",8),N(1),x()),n&2){let t=W();Ke(t.options.messageClass),We("aria-label",t.message),V(),xe(" ",t.message," ")}}function GP(n,e){if(n&1&&(D(0,"div"),K(1,"div",9),x()),n&2){let t=W();V(),zi("width",t.width()+"%")}}function $P(n,e){if(n&1){let t=Pe();D(0,"button",5),X("click",function(){De(t);let r=W();return Re(r.remove())}),D(1,"span",6),N(2,"\xD7"),x()()}}function zP(n,e){if(n&1&&(vc(0),N(1),yc()),n&2){let t=W(2);V(),xe("[",t.duplicatesCount+1,"]")}}function HP(n,e){if(n&1&&(D(0,"div"),N(1),fe(2,zP,2,1,"ng-container",4),x()),n&2){let t=W();Ke(t.options.titleClass),We("aria-label",t.title),V(),xe(" ",t.title," "),V(),$("ngIf",t.duplicatesCount)}}function qP(n,e){if(n&1&&K(0,"div",7),n&2){let t=W();Ke(t.options.messageClass),$("innerHTML",t.message,ih)}}function WP(n,e){if(n&1&&(D(0,"div",8),N(1),x()),n&2){let t=W();Ke(t.options.messageClass),We("aria-label",t.message),V(),xe(" ",t.message," ")}}function KP(n,e){if(n&1&&(D(0,"div"),K(1,"div",9),x()),n&2){let t=W();V(),zi("width",t.width()+"%")}}var Qg=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Yg=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},Xg=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new ye;_activate=new ye;_manualClose=new ye;_resetTimeout=new ye;_countDuplicate=new ye;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},Ao=class{toastId;config;message;title;toastType;toastRef;_onTap=new ye;_onAction=new ye;constructor(e,t,i,r,o,s){this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},EI={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},CI=new Y("ToastConfig"),Zg=class extends Yg{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){let i=this._componentFactoryResolver.resolveComponentFactory(e.component),r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},JP=(()=>{class n{_document=S(be);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e_=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},QP=(()=>{class n{_overlayContainer=S(JP);_componentFactoryResolver=S(l0);_appRef=S(un);_document=S(be);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new Zg(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new e_(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),So=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,r,o,s){this.overlay=i,this._injector=r,this.sanitizer=o,this.ngZone=s,this.toastrConfig=F(F({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=F(F({},t.default.iconClasses),t.config.iconClasses))}show(t,i,r={},o=""){return this._preBuildNotification(o,t,i,this.applyConfig(r))}success(t,i,r={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,t,i,this.applyConfig(r))}error(t,i,r={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,t,i,this.applyConfig(r))}info(t,i,r={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,t,i,this.applyConfig(r))}warning(t,i,r={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,t,i,this.applyConfig(r))}clear(t){for(let i of this.toasts)if(t!==void 0){if(i.toastId===t){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(t){let i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,o){let{includeTitleDuplicates:s}=this.toastrConfig;for(let c of this.toasts){let l=s&&c.title===t;if((!s||l)&&c.message===i)return c.toastRef.onDuplicate(r,o),c}return null}applyConfig(t={}){return F(F({},this.toastrConfig),t)}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,o)):this._buildNotification(t,i,r,o)}_buildNotification(t,i,r,o){if(!o.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=i;let c=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(c=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let d=i;i&&o.enableHtml&&(d=this.sanitizer.sanitize(On.HTML,i));let f=new Xg(l),m=new Ao(this.index,o,d,r,t,f),y=[{provide:Ao,useValue:m}],A=Fe.create({providers:y,parent:this._injector}),k=new Qg(o.toastComponent,A),P=l.attach(k,o.newestOnTop);f.componentInstance=P.instance;let O={toastId:this.index,title:r||"",message:i||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:m.onTap(),onAction:m.onAction(),portal:P};return c||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{O.toastRef.activate()})),this.toasts.push(O),O}static \u0275fac=function(i){return new(i||n)(j(CI),j(QP),j(Fe),j(Ph),j(ae))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YP=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Lt(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state=Lt({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>de(F({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>de(F({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>de(F({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(G(So),G(Ao),G(ae))};static \u0275cmp=ue({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){i&1&&X("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),i&2&&(d0("@flyInOut",r._state),Ke(r.toastClasses),zi("display",r.displayStyle))},standalone:!0,features:[Tt],attrs:TI,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){i&1&&fe(0,VP,3,0,"button",0)(1,BP,3,5,"div",1)(2,UP,1,3,"div",2)(3,jP,2,4,"div",3)(4,GP,2,2,"div",4),i&2&&($("ngIf",r.options.closeButton),V(),$("ngIf",r.title),V(),$("ngIf",r.message&&r.options.enableHtml),V(),$("ngIf",r.message&&!r.options.enableHtml),V(),$("ngIf",r.options.progressBar))},dependencies:[bt],encapsulation:2,data:{animation:[k0("flyInOut",[kc("inactive",Nc({opacity:0})),kc("active",Nc({opacity:1})),kc("removed",Nc({opacity:0})),bh("inactive => active",_h("{{ easeTime }}ms {{ easing }}")),bh("active => removed",_h("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),XP=de(F({},EI),{toastComponent:YP}),ZP=(n={})=>It([{provide:CI,useValue:{default:XP,config:n}}]),AI=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[ZP(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=te({type:n});static \u0275inj=ee({})}return n})();var eN=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=Lt(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=Lt("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.appRef=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||n)(G(So),G(Ao),G(un))};static \u0275cmp=ue({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,r){i&1&&X("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),i&2&&(Ke(r.toastClasses),zi("display",r.displayStyle))},standalone:!0,features:[Tt],attrs:TI,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){i&1&&fe(0,$P,3,0,"button",0)(1,HP,3,5,"div",1)(2,qP,1,3,"div",2)(3,WP,2,4,"div",3)(4,KP,2,2,"div",4),i&2&&($("ngIf",r.options.closeButton),V(),$("ngIf",r.title),V(),$("ngIf",r.message&&r.options.enableHtml),V(),$("ngIf",r.message&&!r.options.enableHtml),V(),$("ngIf",r.options.progressBar))},dependencies:[bt],encapsulation:2,changeDetection:0})}return n})(),cU=de(F({},EI),{toastComponent:eN});var FI=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(G(li),G(Me))}}static{this.\u0275dir=_e({type:n})}}return n})(),Mo=(()=>{class n extends FI{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,features:[Ye]})}}return n})(),Fi=new Y(""),tN={provide:Fi,useExisting:Dt(()=>s_),multi:!0},s_=(()=>{class n extends Mo{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[_t([tN]),Ye]})}}return n})(),nN={provide:Fi,useExisting:Dt(()=>zt),multi:!0};function iN(){let n=Wi()?Wi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rN=new Y(""),zt=(()=>{class n extends FI{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!iN())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(G(li),G(Me),G(rN,8))}}static{this.\u0275dir=_e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&X("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[_t([nN]),Ye]})}}return n})();function Pi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function VI(n){return n!=null&&typeof n.length=="number"}var Ga=new Y(""),Gu=new Y(""),oN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$t=class{static min(e){return sN(e)}static max(e){return aN(e)}static required(e){return LI(e)}static requiredTrue(e){return cN(e)}static email(e){return lN(e)}static minLength(e){return uN(e)}static maxLength(e){return dN(e)}static pattern(e){return hN(e)}static nullValidator(e){return Nu(e)}static compose(e){return zI(e)}static composeAsync(e){return HI(e)}};function sN(n){return e=>{if(Pi(e.value)||Pi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function aN(n){return e=>{if(Pi(e.value)||Pi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function LI(n){return Pi(n.value)?{required:!0}:null}function cN(n){return n.value===!0?null:{required:!0}}function lN(n){return Pi(n.value)||oN.test(n.value)?null:{email:!0}}function uN(n){return e=>Pi(e.value)||!VI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function dN(n){return e=>VI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function hN(n){if(!n)return Nu;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Pi(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Nu(n){return null}function BI(n){return n!=null}function UI(n){return Ac(n)?nt(n):n}function jI(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function GI(n,e){return e.map(t=>t(n))}function fN(n){return!n.validate}function $I(n){return n.map(e=>fN(e)?e:t=>e.validate(t))}function zI(n){if(!n)return null;let e=n.filter(BI);return e.length==0?null:function(t){return jI(GI(t,e))}}function a_(n){return n!=null?zI($I(n)):null}function HI(n){if(!n)return null;let e=n.filter(BI);return e.length==0?null:function(t){let i=GI(t,e).map(UI);return jb(i).pipe(oe(jI))}}function c_(n){return n!=null?HI($I(n)):null}function SI(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qI(n){return n._rawValidators}function WI(n){return n._rawAsyncValidators}function t_(n){return n?Array.isArray(n)?n:[n]:[]}function ku(n,e){return Array.isArray(n)?n.includes(e):n===e}function DI(n,e){let t=t_(e);return t_(n).forEach(r=>{ku(t,r)||t.push(r)}),t}function RI(n,e){return t_(e).filter(t=>!ku(n,t))}var Fu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=a_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=c_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Yn=class extends Fu{get formDirective(){return null}get path(){return null}},Ni=class extends Fu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vu=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},SU=de(F({},pN),{"[class.ng-submitted]":"isSubmitted"}),En=(()=>{class n extends Vu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(G(Ni,2))}}static{this.\u0275dir=_e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&it("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ye]})}}return n})(),Po=(()=>{class n extends Vu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(G(Yn,10))}}static{this.\u0275dir=_e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&it("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ye]})}}return n})();var Fa="VALID",Pu="INVALID",Do="PENDING",Va="DISABLED",ki=class{},Lu=class extends ki{constructor(e,t){super(),this.value=e,this.source=t}},Ba=class extends ki{constructor(e,t){super(),this.pristine=e,this.source=t}},Ua=class extends ki{constructor(e,t){super(),this.touched=e,this.source=t}},Ro=class extends ki{constructor(e,t){super(),this.status=e,this.source=t}},n_=class extends ki{constructor(e){super(),this.source=e}},i_=class extends ki{constructor(e){super(),this.source=e}};function l_(n){return($u(n)?n.validators:n)||null}function mN(n){return Array.isArray(n)?a_(n):n||null}function u_(n,e){return($u(e)?e.asyncValidators:n)||null}function gN(n){return Array.isArray(n)?c_(n):n||null}function $u(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function KI(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ee(1e3,"");if(!i[t])throw new Ee(1001,"")}function JI(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ee(1002,"")})}var xo=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=qi(()=>this.statusReactive()),this.statusReactive=Lt(void 0),this._pristine=qi(()=>this.pristineReactive()),this.pristineReactive=Lt(!0),this._touched=qi(()=>this.touchedReactive()),this.touchedReactive=Lt(!1),this._events=new ye,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dn(this.statusReactive)}set status(e){dn(()=>this.statusReactive.set(e))}get valid(){return this.status===Fa}get invalid(){return this.status===Pu}get pending(){return this.status==Do}get disabled(){return this.status===Va}get enabled(){return this.status!==Va}get pristine(){return dn(this.pristineReactive)}set pristine(e){dn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return dn(this.touchedReactive)}set touched(e){dn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RI(e,this._rawAsyncValidators))}hasValidator(e){return ku(this._rawValidators,e)}hasAsyncValidator(e){return ku(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(F({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ua(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ua(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(F({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ba(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ba(!0,i))}markAsPending(e={}){this.status=Do;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ro(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Va,this.errors=null,this._forEachChild(r=>{r.disable(de(F({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,i)),this._events.next(new Ro(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fa,this._forEachChild(i=>{i.enable(de(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fa||this.status===Do)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,t)),this._events.next(new Ro(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Va:Fa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Do,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=UI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Ro(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?Va:this.errors?Pu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Do)?Do:this._anyControlsHaveStatus(Pu)?Pu:Fa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Ba(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ua(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$u(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mN(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gN(this._rawAsyncValidators)}},Oo=class extends xo{constructor(e,t,i){super(l_(t),u_(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){JI(this,!0,e),Object.keys(e).forEach(i=>{KI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var r_=class extends Oo{};var No=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>$a}),$a="always";function QI(n,e){return[...e.path,n]}function Bu(n,e,t=$a){d_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),bN(n,e),yN(n,e),vN(n,e),_N(n,e)}function xI(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ju(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Uu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _N(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function d_(n,e){let t=qI(n);e.validator!==null?n.setValidators(SI(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=WI(n);e.asyncValidator!==null?n.setAsyncValidators(SI(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Uu(e._rawValidators,r),Uu(e._rawAsyncValidators,r)}function ju(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=qI(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=WI(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Uu(e._rawValidators,i),Uu(e._rawAsyncValidators,i),t}function bN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&YI(n,e)})}function vN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&YI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function YI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yN(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XI(n,e){n==null,d_(n,e)}function wN(n,e){return ju(n,e)}function ZI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function IN(n){return Object.getPrototypeOf(n.constructor)===Mo}function eT(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function tT(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===zt?t=o:IN(o)?i=o:r=o}),r||i||t||null}function TN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var EN={provide:Yn,useExisting:Dt(()=>za)},La=Promise.resolve(),za=(()=>{class n extends Yn{get submitted(){return dn(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=qi(()=>this.submittedReactive()),this.submittedReactive=Lt(!1),this._directives=new Set,this.ngSubmit=new $e,this.form=new Oo({},a_(t),c_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){La.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Bu(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){La.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){La.then(()=>{let i=this._findContainer(t.path),r=new Oo({});XI(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){La.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){La.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),eT(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(G(Ga,10),G(Gu,10),G(No,8))}}static{this.\u0275dir=_e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&X("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([EN]),Ye]})}}return n})();function OI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function MI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ja=class extends xo{constructor(e=null,t,i){super(l_(t),u_(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$u(t)&&(t.nonNullable||t.initialValueIsDefault)&&(MI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){MI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CN=n=>n instanceof ja;var AN={provide:Ni,useExisting:Dt(()=>Xn)},PI=Promise.resolve(),Xn=(()=>{class n extends Ni{constructor(t,i,r,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new ja,this._registered=!1,this.name="",this.update=new $e,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=tT(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ZI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){PI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Et(i);PI.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?QI(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(G(Yn,9),G(Ga,10),G(Gu,10),G(Fi,10),G(Fn,8),G(No,8))}}static{this.\u0275dir=_e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([AN]),Ye,rn]})}}return n})(),ko=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),SN={provide:Fi,useExisting:Dt(()=>Ha),multi:!0},Ha=(()=>{class n extends Mo{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&X("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[_t([SN]),Ye]})}}return n})(),DN={provide:Fi,useExisting:Dt(()=>h_),multi:!0};var RN=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t){this._accessors.splice(i,1);return}}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return t[0].control?t[0]._parent===i._control._parent&&t[1].name===i.name:!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),h_=(()=>{class n extends Mo{constructor(t,i,r,o){super(t,i),this._registry=r,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=S(No,{optional:!0})??$a}ngOnInit(){this._control=this._injector.get(Ni),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(i){return new(i||n)(G(li),G(Me),G(RN),G(Fe))}}static{this.\u0275dir=_e({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[_t([DN]),Ye]})}}return n})();var nT=new Y("");var xN={provide:Yn,useExisting:Dt(()=>f_)},f_=(()=>{class n extends Yn{get submitted(){return dn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=qi(()=>this._submittedReactive()),this._submittedReactive=Lt(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new $e,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ju(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Bu(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){xI(t.control||null,t,!1),TN(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),eT(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new n_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new i_(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(xI(i||null,t),CN(r)&&(Bu(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);XI(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&wN(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){d_(this.form,this),this._oldForm&&ju(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(G(Ga,10),G(Gu,10),G(No,8))}}static{this.\u0275dir=_e({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&X("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([xN]),Ye,rn]})}}return n})();var ON={provide:Ni,useExisting:Dt(()=>p_)},p_=(()=>{class n extends Ni{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new $e,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=tT(this,o)}ngOnChanges(t){this._added||this._setUpControl(),ZI(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return QI(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(G(Yn,13),G(Ga,10),G(Gu,10),G(Fi,10),G(nT,8))}}static{this.\u0275dir=_e({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_t([ON]),Ye,rn]})}}return n})(),MN={provide:Fi,useExisting:Dt(()=>zu),multi:!0};function iT(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PN(n){return n.split(":")[0]}var zu=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),r=iT(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=PN(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([MN]),Ye]})}}return n})(),rT=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(iT(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(G(Me),G(li),G(zu,9))}}static{this.\u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),NN={provide:Fi,useExisting:Dt(()=>oT),multi:!0};function NI(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kN(n){return n.split(":")[0]}var oT=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],d=this._getOptionValue(l.value);r.push(d)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let d=this._getOptionValue(l.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=kN(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([NN]),Ye]})}}return n})(),sT=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(NI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(NI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(G(Me),G(li),G(oT,9))}}static{this.\u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var FN=(()=>{class n{constructor(){this._validator=Nu}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Nu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_e({type:n,features:[rn]})}}return n})();var VN={provide:Ga,useExisting:Dt(()=>qa),multi:!0};var qa=(()=>{class n extends FN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Et,this.createValidator=t=>LI}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wt(n)))(r||n)}})()}static{this.\u0275dir=_e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&We("required",r._enabled?"":null)},inputs:{required:"required"},features:[_t([VN]),Ye]})}}return n})();var aT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),o_=class extends xo{constructor(e,t,i){super(l_(t),u_(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){JI(this,!1,e),e.forEach((i,r)=>{KI(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function kI(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var cT=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return kI(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Oo(r,o)}record(t,i=null){let r=this._reduceControls(t);return new r_(r,i)}control(t,i,r){let o={};return this.useNonNullable?(kI(i)?o=i:(o.validators=i,o.asyncValidators=r),new ja(t,de(F({},o),{nonNullable:!0}))):new ja(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new o_(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof ja)return t;if(t instanceof xo)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:No,useValue:t.callSetDisabledState??$a}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[aT]})}}return n})(),uT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nT,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:No,useValue:t.callSetDisabledState??$a}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[aT]})}}return n})();var Hu=class n{correo;clave;enProceso=!1;autenticacionServicio=S(Gt);toastr=S(So);router=S(Ct);registrar(){return g(this,null,function*(){if(!this.enProceso){this.enProceso=!0;try{yield this.autenticacionServicio.registrar(this.correo,this.clave),this.mostrarTastr(!0,"Registro correcto; Iniciando sesi\xF3n!"),yield this.autenticacionServicio.iniciarSesion(this.correo,this.clave),console.log("Inicio de sesi\xF3n autom\xE1tico exitoso"),this.router.navigate(["/home"])}catch(e){console.error("(registro.component) Error en el proceso: ",e),this.manejarError(e)}finally{this.enProceso=!1}}})}manejarError(e){let i=new Map([["auth/email-already-in-use","El correo ingresado ya est\xE1 en uso."],["auth/weak-password","Ingrese un minimo de 6 caracteristicas para su contrase\xF1a"],["auth/invalid-email","Ingrese un correo val\xEDdo"],["auth/missing-email","El campo correo esta vacio"],["auth/missing-password","El campo clave esta vacio"],["auth/admin-restricted-operation","Los campos estan vacios!"]]).get(e.code)||"Ocurri\xF3 un error desconocido. Intente m\xE1s tarde.";this.mostrarTastr(!1,i),console.error("(Registro.Component.ts): Error en el registro:",e.code),console.error("(Registro.Component.ts): Detalles del error:",JSON.stringify(e))}mostrarTastr(e,t){e?this.toastr.success(t,"Registro"):this.toastr.error(t,"Registro")}volver(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-registro"]],decls:18,vars:2,consts:[[1,"registro-container"],[1,"registro-box"],[1,"titulo-registro"],[1,"subtitulo"],["src","assets/icon-gaming.png","alt","Icono Gaming",1,"icono-registro"],[1,"formulario-registro",3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["type","button",3,"click"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1)(2,"h2",2),N(3,"\xA1Crea tu cuenta!"),x(),D(4,"p",3),N(5,"Complet\xE1 los datos para registrarte"),x(),K(6,"img",4),D(7,"form",5),X("ngSubmit",function(){return i.registrar()}),D(8,"label",6),N(9,"Correo Electr\xF3nico:"),x(),D(10,"input",7),ln("ngModelChange",function(o){return cn(i.correo,o)||(i.correo=o),o}),x(),D(11,"label",8),N(12,"Contrase\xF1a:"),x(),D(13,"input",9),ln("ngModelChange",function(o){return cn(i.clave,o)||(i.clave=o),o}),x(),D(14,"button",10),N(15,"Registrar"),x(),D(16,"button",11),X("click",function(){return i.volver()}),N(17,"Volver atr\xE1s"),x()()()()),t&2&&(V(10),an("ngModel",i.correo),V(3),an("ngModel",i.clave))},dependencies:[ko,zt,En,Po,qa,Xn,za],styles:[".registro-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px}.registro-box[_ngcontent-%COMP%]{max-width:500px;width:100%;background-color:#ffffff0d;padding:32px;border-radius:12px;color:#fff;box-shadow:0 4px 20px #0000004d;text-align:center}.titulo-registro[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;margin-bottom:8px}.subtitulo[_ngcontent-%COMP%]{font-size:16px;color:#fffc;margin-bottom:24px}.icono-registro[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:24px;border-radius:12px;object-fit:cover}.formulario-registro[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.formulario-registro[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left;font-weight:500}.formulario-registro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid rgba(255,255,255,.2);border-radius:6px;background-color:#ffffff1a;color:#fff;font-size:14px}.formulario-registro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.formulario-registro[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:8px;background-color:#673ab7;color:#fff;font-size:15px;cursor:pointer;transition:background-color .3s ease}.formulario-registro[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#5e35b1}"]})};var qu=class n{correo;clave;enProceso=!1;autenticacionServicio=S(Gt);toastr=S(So);router=S(Ct);iniciarSesion(){return g(this,null,function*(){if(!this.enProceso){this.enProceso=!0;try{yield this.autenticacionServicio.iniciarSesion(this.correo,this.clave),console.log("(inicio-sesion.component) Inicio sesion con exito; redirigiendo"),this.mostrarMensaje(!0,"Registro correcto; Iniciando sesi\xF3n!"),this.router.navigate(["/home"])}catch(e){console.log("error: ",e),this.mostrarError(e)}finally{this.enProceso=!1}}})}mostrarError(e){let i=new Map([["auth/email-already-in-use","El correo ingresado ya est\xE1 en uso."],["auth/weak-password","Ingrese un minimo de 6 caracteristicas para su contrase\xF1a"],["auth/invalid-email","Ingrese un correo val\xEDdo"],["auth/missing-email","El campo correo esta vacio"],["auth/missing-password","El campo clave esta vacio"],["auth/admin-restricted-operation","Los campos estan vacios!"]]).get(e.code)||"Ocurri\xF3 un error desconocido. Intente m\xE1s tarde.";this.mostrarMensaje(!1,i),console.error("(inicio-sesion.Component.ts): Error en el inicio-sesion:",e),console.error("(inicio-sesion.Component.ts): Detalles del error:",JSON.stringify(e))}mostrarMensaje(e,t){e?this.toastr.success(t,"Inicio de sesi\xF3n"):this.toastr.error(t,"Inicio de sesi\xF3n")}volver(){this.router.navigate(["/"])}llenarDatosRapidos(){this.correo="becerraivan79@gmail.com",this.clave="1234567890"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-inicio-sesion"]],decls:20,vars:2,consts:[[1,"login-container"],[1,"login-box"],[1,"titulo-bienvenida"],[1,"subtitulo"],["src","assets/icon-gaming.png","alt","Icono Gaming",1,"icono-login"],[1,"formulario-login",3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["type","button",3,"click"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1)(2,"h2",2),N(3,"Bienvenido al centro de juego!"),x(),D(4,"p",3),N(5,"Inici\xE1 sesi\xF3n para continuar"),x(),K(6,"img",4),D(7,"form",5),X("ngSubmit",function(){return i.iniciarSesion()}),D(8,"label",6),N(9,"Correo Electr\xF3nico:"),x(),D(10,"input",7),ln("ngModelChange",function(o){return cn(i.correo,o)||(i.correo=o),o}),x(),D(11,"label",8),N(12,"Contrase\xF1a:"),x(),D(13,"input",9),ln("ngModelChange",function(o){return cn(i.clave,o)||(i.clave=o),o}),x(),D(14,"button",10),N(15,"Iniciar Sesi\xF3n"),x(),D(16,"button",11),X("click",function(){return i.llenarDatosRapidos()}),N(17,"Inicio r\xE1pido"),x(),D(18,"button",11),X("click",function(){return i.volver()}),N(19,"Volver atr\xE1s"),x()()()()),t&2&&(V(10),an("ngModel",i.correo),V(3),an("ngModel",i.clave))},dependencies:[ko,zt,En,Po,qa,Xn,za],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px}.login-box[_ngcontent-%COMP%]{max-width:500px;width:100%;background-color:#ffffff0d;padding:32px;border-radius:12px;color:#fff;box-shadow:0 4px 20px #0000004d;text-align:center}.titulo-bienvenida[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#fff;margin-bottom:8px}.subtitulo[_ngcontent-%COMP%]{font-size:16px;color:#fffc;margin-bottom:24px}.icono-login[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:24px;border-radius:12px;object-fit:cover}.formulario-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.formulario-login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left;font-weight:500}.formulario-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid rgba(255,255,255,.2);border-radius:6px;background-color:#ffffff1a;color:#fff;font-size:14px}.formulario-login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff9}.formulario-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:8px;background-color:#673ab7;color:#fff;font-size:15px;cursor:pointer;transition:background-color .3s ease}.formulario-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#5e35b1}"]})};var Fo=class n{UID;FECHA_REGISTRO;ULTIMA_CONEXION;CORREO;Usuario(){}toFirestore(){return{ID:this.UID,CORREO:this.CORREO,FECHA_REGISTRO:this.FECHA_REGISTRO,ULTIMA_CONEXION:this.ULTIMA_CONEXION}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vo=class n{static COLECCION_CHAT="chat";firestore=S(kt);guardarMensaje(e){return g(this,null,function*(){try{let t=Ta(this.firestore,n.COLECCION_CHAT);return yield du(t,e.toFirestore()),console.log("(chat.servuce) chat JSON: ",JSON.stringify(e)),!0}catch(t){throw t}})}cargarMensajes(){return g(this,null,function*(){try{let e=Ta(this.firestore,n.COLECCION_CHAT),t=eg(e,tg("fecha","asc")),i=yield ig(t),r=[];return i.forEach(o=>{r.push(o.data())}),r}catch(e){throw e}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var g_;try{g_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{g_=!1}var yt=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Oc(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||g_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(j(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ka;function UN(){if(Ka==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ka=!0}))}finally{Ka=Ka||!1}return Ka}function Lo(n){return UN()?n:!!n.capture}var m_;function jN(){if(m_==null){let n=typeof document<"u"?document.head:null;m_=!!(n&&(n.createShadowRoot||n.attachShadow))}return m_}function dT(n){if(jN()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Vi(n){return n.composedPath?n.composedPath()[0]:n.target}function hT(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function __(n){return Array.isArray(n)?n:[n]}function Cr(n){return n instanceof Me?n.nativeElement:n}var fT=new Set,Ar,GN=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):zN}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&$N(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(j(yt),j(ps,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $N(n,e){if(!fT.has(n))try{Ar||(Ar=document.createElement("style"),e&&Ar.setAttribute("nonce",e),Ar.setAttribute("type","text/css"),document.head.appendChild(Ar)),Ar.sheet&&(Ar.sheet.insertRule(`@media ${n} {body{ }}`,0),fT.add(n))}catch(t){console.error(t)}}function zN(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var mT=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ye}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return pT(__(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=pT(__(t)).map(s=>this._registerQuery(s).observable),o=Rn(r);return o=mc(o.pipe(St(1)),o.pipe(us(1),Qd(0))),o.pipe(oe(s=>{let c={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new Ft(s=>{let c=l=>this._zone.run(()=>s.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe($i(i),oe(({matches:s})=>({query:t,matches:s})),Ge(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||n)(j(GN),j(ae))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pT(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function v_(n){return n.buttons===0||n.detail===0}function y_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var qN=new Y("cdk-input-modality-detector-options"),WN={ignoreKeys:[18,17,224,91,16]},bT=650,Bo=Lo({passive:!0,capture:!0}),KN=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Be(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(c=>c===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vi(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<bT||(this._modality.next(v_(s)?"keyboard":"mouse"),this._mostRecentTarget=Vi(s))},this._onTouchstart=s=>{if(y_(s)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vi(s)},this._options=F(F({},WN),o),this.modalityDetected=this._modality.pipe(us(1)),this.modalityChanged=this.modalityDetected.pipe(ls()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Bo),r.addEventListener("mousedown",this._onMousedown,Bo),r.addEventListener("touchstart",this._onTouchstart,Bo)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Bo),document.removeEventListener("mousedown",this._onMousedown,Bo),document.removeEventListener("touchstart",this._onTouchstart,Bo))}static{this.\u0275fac=function(i){return new(i||n)(j(yt),j(ae),j(be),j(qN,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ku=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Ku||{}),JN=new Y("cdk-focus-monitor-default-options"),Wu=Lo({passive:!0,capture:!0}),vT=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ye,this._rootNodeFocusAndBlurListener=c=>{let l=Vi(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=o,this._detectionMode=s?.detectionMode||Ku.IMMEDIATE}monitor(t,i=!1){let r=Cr(t);if(!this._platform.isBrowser||r.nodeType!==1)return Q();let o=dT(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let c={checkChildren:i,subject:new ye,rootNode:o};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let i=Cr(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=Cr(t),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Ku.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Ku.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?bT:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=Vi(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wu)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ge(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(j(ae),j(yt),j(KN),j(be,8),j(JN,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Sr=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Sr||{}),gT="cdk-high-contrast-black-on-white",_T="cdk-high-contrast-white-on-black",b_="cdk-high-contrast-active",yT=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=S(mT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Sr.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Sr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Sr.BLACK_ON_WHITE}return Sr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(b_,gT,_T),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Sr.BLACK_ON_WHITE?t.add(b_,gT):i===Sr.WHITE_ON_BLACK&&t.add(b_,_T)}}static{this.\u0275fac=function(i){return new(i||n)(j(yt),j(be))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var w_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function XN(){return!0}var ZN=new Y("mat-sanity-checks",{providedIn:"root",factory:XN}),Li=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return hT()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(j(yT),j(ZN,8),j(be))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[w_,w_]})}}return n})();var Ht=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ht||{}),E_=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ht.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},wT=Lo({passive:!0,capture:!0}),C_=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Vi(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){let o=this._events.get(t);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,wT)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,wT)))}},IT={enterDuration:225,exitDuration:150},ek=800,TT=Lo({passive:!0,capture:!0}),ET=["mousedown","touchstart"],CT=["mouseup","mouseleave","touchend","touchcancel"],A_=class n{static{this._eventManager=new C_}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Cr(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=F(F({},IT),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||tk(e,t,r),c=e-r.left,l=t-r.top,d=o.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-s}px`,f.style.top=`${l-s}px`,f.style.height=`${s*2}px`,f.style.width=`${s*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let m=window.getComputedStyle(f),y=m.transitionProperty,A=m.transitionDuration,k=y==="none"||A==="0s"||A==="0s, 0s"||r.width===0&&r.height===0,P=new E_(this,f,i,k);f.style.transform="scale3d(1, 1, 1)",P.state=Ht.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let O=null;return!k&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let J=()=>this._finishRippleTransition(P),ne=()=>this._destroyRipple(P);f.addEventListener("transitionend",J),f.addEventListener("transitioncancel",ne),O={onTransitionEnd:J,onTransitionCancel:ne}}),this._activeRipples.set(P,O),(k||!d)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Ht.FADING_OUT||e.state===Ht.HIDDEN)return;let t=e.element,i=F(F({},IT),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Ht.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Cr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,ET.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{CT.forEach(t=>{this._triggerElement.addEventListener(t,this,TT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ht.FADING_IN?this._startFadeOutTransition(e):e.state===Ht.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ht.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ht.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=v_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+ek;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!y_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ht.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ht.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(ET.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(CT.forEach(t=>e.removeEventListener(t,this,TT)),this._pointerUpEventsRegistered=!1))}};function tk(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var RT=new Y("mat-ripple-global-options"),nk=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new A_(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,F(F({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),t))}static{this.\u0275fac=function(i){return new(i||n)(G(Me),G(ae),G(yt),G(RT,8),G(on,8))}}static{this.\u0275dir=_e({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&it("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),xT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Li,Li]})}}return n})();var AT={capture:!0},ST=["focus","click","mouseenter","touchstart"],I_="mat-ripple-loader-uninitialized",T_="mat-ripple-loader-class-name",DT="mat-ripple-loader-centered",Ju="mat-ripple-loader-disabled",OT=(()=>{class n{constructor(){this._document=S(be,{optional:!0}),this._animationMode=S(on,{optional:!0}),this._globalRippleOptions=S(RT,{optional:!0}),this._platform=S(yt),this._ngZone=S(ae),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;let r=t.target.closest(`[${I_}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(let t of ST)this._document?.addEventListener(t,this._onInteraction,AT)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of ST)this._document?.removeEventListener(i,this._onInteraction,AT)}configureRipple(t,i){t.setAttribute(I_,""),(i.className||!t.hasAttribute(T_))&&t.setAttribute(T_,i.className||""),i.centered&&t.setAttribute(DT,""),i.disabled&&t.setAttribute(Ju,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){let r=this._hosts.get(t);if(r){r.disabled=i;return}i?t.setAttribute(Ju,""):t.removeAttribute(Ju)}_createRipple(t){if(!this._document)return;let i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(T_)),t.append(r);let o=new nk(new Me(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(DT),o.disabled=t.hasAttribute(Ju),this.attachRipple(t,o),o}attachRipple(t,i){t.removeAttribute(I_),this._hosts.set(t,i)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ik=["*",[["mat-toolbar-row"]]],rk=["*","mat-toolbar-row"],ok=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_e({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),MT=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(i){return new(i||n)(G(Me),G(yt),G(be))}}static{this.\u0275cmp=ue({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,o){if(i&1&&gs(o,ok,5),i&2){let s;Pn(s=Nn())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Ke(r.color?"mat-"+r.color:""),it("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Tt],ngContentSelectors:rk,decls:2,vars:0,template:function(i,r){i&1&&(Hi(ik),sn(0),sn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var PT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Li,Li]})}}return n})();var ak=["mat-button",""],ck=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],lk=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var uk=new Y("MAT_BUTTON_CONFIG");var dk=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],hk=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,r,o){this._elementRef=t,this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=S(vT),this._rippleLoader=S(OT),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let s=S(uk,{optional:!0}),c=t.nativeElement,l=c.classList;this.disabledInteractive=s?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:f}of dk)c.hasAttribute(d)&&l.add(...f)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){kr()}}static{this.\u0275dir=_e({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Et],disabled:[2,"disabled","disabled",Et],ariaDisabled:[2,"aria-disabled","ariaDisabled",Et],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Et]},features:[Vr]})}}return n})();var NT=(()=>{class n extends hk{constructor(t,i,r,o){super(t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(G(Me),G(yt),G(ae),G(on,8))}}static{this.\u0275cmp=ue({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(We("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Ke(r.color?"mat-"+r.color:""),it("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ye,Tt],attrs:ak,ngContentSelectors:lk,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Hi(ck),K(0,"span",0),sn(1),D(2,"span",1),sn(3,1),x(),sn(4,2),K(5,"span",2)(6,"span",3)),i&2&&it("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var kT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Li,xT,Li]})}}return n})();function Qu(n){n||(Yb(Qu),n=S(gc));let e=new Ft(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Ge(e))}var pk=["*"];function mk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){let r=De(t).$implicit,o=W();return o.focus(),Re(o.select(r.id,o.NgbSlideEventSource.INDICATOR))}),x()}if(n&2){let t=e.$implicit,i=W();it("active",t.id===i.activeId),We("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===i.activeId)}}function gk(n,e){}function _k(n,e){if(n&1&&(D(0,"div",6)(1,"span",8),wc(2,0),x(),fe(3,gk,0,0,"ng-template",9),x()),n&2){let t=e.$implicit,i=e.$index,r=e.$count;$("id","slide-"+t.id),V(2),h0(i+1)(r),f0(2),V(),$("ngTemplateOutlet",t.templateRef)}}function bk(n,e){if(n&1){let t=Pe();D(0,"button",10),X("click",function(){De(t);let r=W();return Re(r.arrowLeft())}),K(1,"span",11),D(2,"span",12),wc(3,1),x()(),D(4,"button",13),X("click",function(){De(t);let r=W();return Re(r.arrowRight())}),K(5,"span",14),D(6,"span",12),wc(7,2),x()()}if(n&2){let t=W();We("aria-labelledby",t.id+"-previous"),V(2),$("id",t.id+"-previous"),V(2),We("aria-labelledby",t.id+"-next"),V(2),$("id",t.id+"-next")}}var vk=["dialog"];var FT={animation:!0,transitionTimerDelayMs:5},VT=(()=>{class n{constructor(){this.animation=FT.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yk(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),i=parseFloat(e),r=parseFloat(t);return(i+r)*1e3}function LT(n){return typeof n=="string"}function S_(n){return n!=null}function wk(n){return n&&n.then}function x_(n){return(n||document.body).getBoundingClientRect()}function Ik(n){return e=>new Ft(t=>{let i=s=>n.run(()=>t.next(s)),r=s=>n.run(()=>t.error(s)),o=()=>n.run(()=>t.complete());return e.subscribe({next:i,error:r,complete:o})})}var Tk=()=>{},{transitionTimerDelayMs:Ek}=FT,Qa=new Map,Zn=(n,e,t,i)=>{let r=i.context||{},o=Qa.get(e);if(o)switch(i.runningTransition){case"continue":return tn;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Qa.delete(e)}let s=t(e,i.animation,r)||Tk;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>s()),Q(void 0).pipe(Ik(n));let c=new ye,l=new ye,d=c.pipe(Hb(!0));Qa.set(e,{transition$:c,complete:()=>{l.next(),l.complete()},context:r});let f=yk(e);return n.runOutsideAngular(()=>{let m=xn(e,"transitionend").pipe(Ge(d),mt(({target:A})=>A===e)),y=Jd(f+Ek).pipe(Ge(d));$b(y,m,l).pipe(Ge(d)).subscribe(()=>{Qa.delete(e),n.run(()=>{s(),c.next(),c.complete()})})}),c.asObservable()},Ck=n=>{Qa.get(n)?.complete()};var BT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var UT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),Ak=(()=>{class n{constructor(){this._ngbConfig=S(VT),this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uo=function(n){return n.START="start",n.END="end",n}(Uo||{}),jT=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),O_=n=>{n.remove("carousel-item-start","carousel-item-end")},Yu=n=>{O_(n),n.remove("carousel-item-prev","carousel-item-next")},Sk=(n,e,{direction:t})=>{let{classList:i}=n;if(!e){Yu(i),i.add("active");return}return jT(n)?O_(i):(i.add("carousel-item-"+(t===Uo.START?"next":"prev")),x_(n),i.add("carousel-item-"+t)),()=>{Yu(i),i.add("active")}},Dk=(n,e,{direction:t})=>{let{classList:i}=n;if(!e){Yu(i),i.remove("active");return}return jT(n)?O_(i):i.add("carousel-item-"+t),()=>{Yu(i),i.remove("active")}},Rk=0,xk=0,M_=(()=>{class n{constructor(){this.templateRef=S(rh),this.id=`ngb-slide-${Rk++}`,this.slid=new $e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_e({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0})}}return n})(),GT=(()=>{class n{constructor(){this.NgbSlideEventSource=Ya,this._config=S(Ak),this._platformId=S(Rt),this._ngZone=S(ae),this._cd=S(Fn),this._container=S(Me),this._destroyRef=S(gc),this._injector=S(Fe),this._interval$=new Be(this._config.interval),this._mouseHover$=new Be(!1),this._focused$=new Be(!1),this._pauseOnHover$=new Be(this._config.pauseOnHover),this._pauseOnFocus$=new Be(this._config.pauseOnFocus),this._pause$=new Be(!1),this._wrap$=new Be(this._config.wrap),this.id=`ngb-carousel-${xk++}`,this.animation=this._config.animation,this.keyboard=this._config.keyboard,this.showNavigationArrows=this._config.showNavigationArrows,this.showNavigationIndicators=this._config.showNavigationIndicators,this.slide=new $e,this.slid=new $e,this._transitionIds=null}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Ya.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Ya.ARROW_RIGHT)}ngAfterContentInit(){Oc(this._platformId)&&this._ngZone.runOutsideAngular(()=>{let t=Rn([this.slide.pipe(oe(i=>i.current),$i(this.activeId)),this._wrap$,this.slides.changes.pipe($i(null))]).pipe(oe(([i,r])=>{let o=this.slides.toArray(),s=this._getSlideIdxById(i);return r?o.length>1:s<o.length-1}),ls());Rn([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe(oe(([i,r,o,s,c,l,d])=>i||r&&o||s&&c||!d?0:l),ls(),lt(i=>i>0?Jd(i,i):Gb),Qu(this._destroyRef)).subscribe(()=>this._ngZone.run(()=>this.next(Ya.TIMER)))}),this.slides.changes.pipe(Qu(this._destroyRef)).subscribe(()=>{this._transitionIds?.forEach(t=>Ck(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),Lr(()=>{for(let{id:t}of this.slides){let i=this._getSlideElement(t);t===this.activeId?i.classList.add("active"):i.classList.remove("active")}},{phase:bc.MixedReadWrite,injector:this._injector})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){let t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}select(t,i){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),i)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),Uo.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),Uo.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,i,r){let o=this._transitionIds;if(o&&(o[0]!==t||o[1]!==this.activeId))return;let s=this._getSlideById(t);if(s&&s.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:s.id,direction:i,paused:this._pause$.value,source:r});let c={animation:this.animation,runningTransition:"stop",context:{direction:i}},l=[],d=this._getSlideById(this.activeId);if(d){let A=Zn(this._ngZone,this._getSlideElement(d.id),Dk,c);A.subscribe(()=>{d.slid.emit({isShown:!1,direction:i,source:r})}),l.push(A)}let f=this.activeId;this.activeId=s.id;let m=this._getSlideById(this.activeId),y=Zn(this._ngZone,this._getSlideElement(s.id),Sk,c);y.subscribe(()=>{m?.slid.emit({isShown:!0,direction:i,source:r})}),l.push(y),cs(...l).pipe(St(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:f,current:s.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(t,i){let r=this._getSlideIdxById(t),o=this._getSlideIdxById(i);return r>o?Uo.END:Uo.START}_getSlideById(t){return this.slides.find(i=>i.id===t)||null}_getSlideIdxById(t){let i=this._getSlideById(t);return i!=null?this.slides.toArray().indexOf(i):-1}_getNextSlide(t){let i=this.slides.toArray(),r=this._getSlideIdxById(t);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(t){let i=this.slides.toArray(),r=this._getSlideIdxById(t);return r===0?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ue({type:n,selectors:[["ngb-carousel"]],contentQueries:function(i,r,o){if(i&1&&gs(o,M_,4),i&2){let s;Pn(s=Nn())&&(r.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(i,r){i&1&&X("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),i&2&&(We("aria-activedescendant","slide-"+r.activeId),zi("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[Tt],decls:7,vars:3,consts:()=>{let t;t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\uFFFD0\uFFFD"}:INTERPOLATION: of ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;let i;i=$localize`:@@ngb.carousel.previous:Previous`;let r;return r=$localize`:@@ngb.carousel.next:Next`,[t,i,r,["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active"],[1,"carousel-inner"],["role","tabpanel",1,"carousel-item",3,"id"],["type","button","data-bs-target","","role","tab",3,"click"],[1,"visually-hidden"],[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden",3,"id"],["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]]},template:function(i,r){i&1&&(D(0,"div",3),lh(1,mk,1,5,"button",4,ch),x(),D(3,"div",5),lh(4,_k,4,4,"div",6,ch),x(),fe(6,bk,8,4)),i&2&&(it("visually-hidden",!r.showNavigationIndicators),V(),uh(r.slides),V(3),uh(r.slides),V(2),ah(r.showNavigationArrows?6:-1))},dependencies:[x0],encapsulation:2,changeDetection:0})}}return n})(),Ya=function(n){return n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator",n}(Ya||{}),$T=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),zT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var uG=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})();var Ok=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function HT(n){let e=Array.from(n.querySelectorAll(Ok)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var Mk=(n,e,t,i=!1)=>{n.runOutsideAngular(()=>{let r=xn(e,"focusin").pipe(Ge(t),oe(o=>o.target));xn(e,"keydown").pipe(Ge(t),mt(o=>o.key==="Tab"),Zd(r)).subscribe(([o,s])=>{let[c,l]=HT(e);(s===c||s===e)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(c.focus(),o.preventDefault())}),i&&xn(e,"click").pipe(Ge(t),Zd(r),oe(o=>o[1])).subscribe(o=>o.focus())})};var dG=new Date(1882,10,12),hG=new Date(2174,10,25);var fG=1e3*60*60*24;var P_=1080,Pk=24*P_,Nk=12*P_+793,pG=29*Pk+Nk,mG=11*P_+204;var qT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var WT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),kk=(()=>{class n{constructor(){this._ngbConfig=S(VT),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jo=class{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}};var Fk=(()=>{class n{constructor(){this._document=S(be)}hide(){let t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(t>0){let c=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${c+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=s),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vk=(()=>{class n{constructor(){this._nativeElement=S(Me).nativeElement,this._zone=S(ae),this._injector=S(Fe)}ngOnInit(){Lr(()=>Zn(this._zone,this._nativeElement,(t,i)=>{i&&x_(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"}),{injector:this._injector,phase:bc.MixedReadWrite})}hide(){return Zn(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ue({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(Ke("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),it("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Tt],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),Xu=class{update(e){}close(e){}dismiss(e){}},Lk=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Bk=["animation","backdropClass"],D_=class{_applyWindowOptions(e,t){Lk.forEach(i=>{S_(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){Bk.forEach(i=>{S_(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ge(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ge(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ye,this._dismissed=new ye,this._hidden=new ye,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();wk(t)?t.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Q(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),cs(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},R_=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(R_||{}),Uk=(()=>{class n{constructor(){this._document=S(be),this._elRef=S(Me),this._zone=S(ae),this._injector=S(Fe),this._closed$=new ye,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new $e,this.shown=new ye,this.hidden=new ye}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":LT(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,Lr(()=>this._show(),{injector:this._injector,phase:bc.MixedReadWrite})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=Zn(this._zone,t,()=>t.classList.remove("show"),i),o=Zn(this._zone,this._dialogEl.nativeElement,()=>{},i),s=cs(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let t={animation:this.animation,runningTransition:"continue"},i=Zn(this._zone,this._elRef.nativeElement,(o,s)=>{s&&x_(o),o.classList.add("show")},t),r=Zn(this._zone,this._dialogEl.nativeElement,()=>{},t);cs(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{xn(t,"keydown").pipe(Ge(this._closed$),mt(r=>r.key==="Escape")).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(R_.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;xn(this._dialogEl.nativeElement,"mousedown").pipe(Ge(this._closed$),Ue(()=>i=!1),lt(()=>xn(t,"mouseup").pipe(Ge(this._closed$),St(1))),mt(({target:r})=>t===r)).subscribe(()=>{i=!0}),xn(t,"click").pipe(Ge(this._closed$)).subscribe(({target:r})=>{t===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(R_.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let i=t.querySelector("[ngbAutofocus]"),r=HT(t)[0];(i||r||t).focus()}}_restoreFocus(){let t=this._document.body,i=this._elWithFocus,r;i&&i.focus&&t.contains(i)?r=i:r=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Zn(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ue({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&_s(vk,7),i&2){let o;Pn(o=Nn())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(We("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ke("modal d-block"+(r.windowClass?" "+r.windowClass:"")),it("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Tt],ngContentSelectors:pk,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(Hi(),D(0,"div",1,0)(2,"div",2),sn(3),x()()),i&2&&Ke("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),jk=(()=>{class n{constructor(){this._applicationRef=S(un),this._injector=S(Fe),this._environmentInjector=S(nn),this._document=S(be),this._scrollBar=S(Fk),this._activeWindowCmptHasChanged=new ye,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new $e;let t=S(ae);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];Mk(t,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){let o=r.container instanceof HTMLElement?r.container:S_(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new Xu;t=r.injector||t;let c=t.get(nn,null)||this._environmentInjector,l=this._getContentRef(t,c,i,s,r),d=r.backdrop!==!1?this._attachBackdrop(o):void 0,f=this._attachWindowComponent(o,l.nodes),m=new D_(f,l,d,r.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(f),m.hidden.pipe(St(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=y=>{m.close(y)},s.dismiss=y=>{m.dismiss(y)},s.update=y=>{m.update(y)},m.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=Rc(Vk,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=Rc(Uk,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,o,s){return r?r instanceof rh?this._createFromTemplateRef(r,o):LT(r)?this._createFromString(r):this._createFromComponent(t,i,r,o,s):new jo([])}_createFromTemplateRef(t,i){let r={$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}},o=t.createEmbeddedView(r);return this._applicationRef.attachView(o),new jo([o.rootNodes],o)}_createFromString(t){let i=this._document.createTextNode(`${t}`);return new jo([[i]])}_createFromComponent(t,i,r,o,s){let c=Fe.create({providers:[{provide:Xu,useValue:o}],parent:t}),l=Rc(r,{environmentInjector:i,elementInjector:c}),d=l.location.nativeElement;return s.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new jo([[d]],l.hostView,l)}_setAriaHidden(t){let i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let i=()=>{let r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gk=(()=>{class n{constructor(){this._injector=S(Fe),this._modalStack=S(jk),this._config=S(kk)}open(t,i={}){let r=F(de(F({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[Gk]})}}return n})();var JT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var QT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var YT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var XT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var ZT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var eE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var tE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var nE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var iE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var gG=new Y("live announcer delay",{providedIn:"root",factory:()=>100});var rE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var oE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),$k=[BT,UT,$T,zT,qT,WT,KT,JT,oE,QT,YT,XT,ZT,eE,tE,nE,iE,rE],sE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[$k,BT,UT,$T,zT,qT,WT,KT,JT,oE,QT,YT,XT,ZT,eE,tE,nE,iE,rE]})}}return n})();var Zu=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-cerrar-juego"]],decls:2,vars:1,consts:[[1,"btn-imagen",3,"routerLink"],["src","../../../assets/salir.png","alt","Icono"]],template:function(t,i){t&1&&(D(0,"button",0),K(1,"img",1),x()),t&2&&$("routerLink","/home")},dependencies:[Jv],styles:[".btn-imagen[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:none;border:none}.btn-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px;height:34px}"]})};function Wk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.navegarA("/quien-soy"))}),N(1,"Quien soy?"),x()}}function Kk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.navegarA("/encuesta"))}),N(1,"Encuesta"),x()}}function Jk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.navegarA("/chat"))}),N(1,"Chat ONLINE"),x()}}function Qk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.cerrarSesion())}),N(1,"Cerrar Sesi\xF3n"),x()}}function Yk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.navegarA("/registro"))}),N(1,"Registrarse"),x()}}function Xk(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){De(t);let r=W();return Re(r.navegarA("/iniciar-sesion"))}),N(1,"Iniciar sesion"),x()}}function Zk(n,e){if(n&1){let t=Pe();D(0,"div",11),X("click",function(){De(t);let r=W().$implicit,o=W(2);return Re(o.jugar(r.ruta))}),K(1,"img",12),D(2,"div",13),N(3,"Haz clic para jugar"),x()()}if(n&2){let t=W(),i=t.$implicit,r=t.index;V(),m0("alt","Imagen ",r+1,""),$("src",i.src,Mn)}}function eF(n,e){if(n&1&&fe(0,Zk,4,3,"ng-template",10),n&2){let t=e.index;p0("id",t)}}function tF(n,e){if(n&1&&(D(0,"ngb-carousel",8),fe(1,eF,1,1,null,9),x()),n&2){let t=W();$("interval",3e3)("pauseOnHover",!0),V(),$("ngForOf",t.imagenes)}}function nF(n,e){n&1&&K(0,"app-cerrar-juego")}var ed=class n{usuarioEncontrado;usuario=S(Fo);autenticacion=S(Gt);router=S(Ct);chatServicio=S(Vo);imagenes=[{src:"assets/ahorcado.png",ruta:"ahorcado"},{src:"assets/cartas.jpg",ruta:"mayormenor"},{src:"assets/quiz-matematica.jpg",ruta:"matematicas"},{src:"assets/quiz-paises.jpg",ruta:"preguntados"}];ngOnInit(){this.usuarioEncontrado=this.autenticacion.obtenerUsuario(),this.usuarioEncontrado&&(this.usuario.CORREO=this.usuarioEncontrado.email,this.usuario.UID=this.usuarioEncontrado.uid),this.autenticacion.obtenerDatosUsuario().then(e=>{console.log("(home.component.ts) DATOS USUARIO: ",JSON.stringify(e))}).catch(e=>{console.log("(home.component.ts) ERROR DATOS USUARIO: ",e)})}navegarA(e){this.router.navigate([e])}inicio(){this.router.navigate([""])}iniciarSesion(){this.router.navigate(["iniciar-sesion"])}registrarme(){this.router.navigate(["registro"])}ahorcado(){this.router.navigate(["ahorcado"])}preguntados(){this.router.navigate(["preguntados"])}mayorMenor(){this.router.navigate(["mayormenor"])}matematicas(){this.router.navigate(["matematicas"])}encuesta(){this.router.navigate(["envuesta-v2"])}cerrarSesion(){if(!this.autenticacion.obtenerUsuario()){console.log("No hay sesion iniciada");return}this.autenticacion.cerrarSesion().then(e=>{this.usuario.CORREO="no sesi\xF3n iniciada",this.usuario.UID="",this.usuarioEncontrado=null}).catch(e=>{console.log("(homeComponent.ts) error : ",e)})}jugar(e){this.router.navigate([e])}mostrarCerrarJuego(){return this.router.url!=="/"}mostrarCarrusel(){return this.router.url==="/"||this.router.url==="/home"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-home"]],decls:16,vars:8,consts:[[1,"navbar-game"],[1,"spacer"],["mat-button","",3,"click",4,"ngIf"],[1,"main-container"],[1,"game-area"],[3,"interval","pauseOnHover",4,"ngIf"],[4,"ngIf"],["mat-button","",3,"click"],[3,"interval","pauseOnHover"],[4,"ngFor","ngForOf"],["ngbSlide","",3,"id"],[1,"slide-content",2,"cursor","pointer",3,"click"],[3,"src","alt"],[1,"juego-titulo"]],template:function(t,i){t&1&&(D(0,"mat-toolbar",0)(1,"span"),N(2,"Sala de Juegos"),x(),K(3,"span",1),fe(4,Wk,2,0,"button",2)(5,Kk,2,0,"button",2)(6,Jk,2,0,"button",2)(7,Qk,2,0,"button",2)(8,Yk,2,0,"button",2)(9,Xk,2,0,"button",2),x(),D(10,"div",3)(11,"div",4),fe(12,tF,2,3,"ngb-carousel",5)(13,nF,1,0,"app-cerrar-juego",6),K(14,"br")(15,"router-outlet"),x()()),t&2&&(V(4),$("ngIf",i.usuario),V(),$("ngIf",i.usuario),V(),$("ngIf",i.usuario),V(),$("ngIf",i.usuarioEncontrado),V(),$("ngIf",i.usuarioEncontrado==null),V(),$("ngIf",i.usuarioEncontrado==null),V(3),$("ngIf",i.imagenes.length>0&&i.mostrarCarrusel()),V(),$("ngIf",i.mostrarCerrarJuego()))},dependencies:[ui,bt,qs,MT,NT,GT,M_,Zu],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px;gap:16px}.navbar-game[_ngcontent-%COMP%]{background-color:#6801615e!important;color:#fff}.game-menu[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.game-area[_ngcontent-%COMP%]{max-width:700px;width:90%;margin:20px auto;height:500px;padding:20px;background:#ffffff1a;border-radius:10px;box-shadow:0 4px 10px #00000080;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;text-align:center}.chat-area[_ngcontent-%COMP%]{border:2px solid #f44336;background-color:#ffebee;padding:16px;border-radius:8px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media screen and (min-width: 768px){.main-container[_ngcontent-%COMP%]{flex-direction:column}}.game-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;border-radius:10px;display:block}ngb-carousel[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.slide-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.juego-titulo[_ngcontent-%COMP%]{margin-top:12px;font-size:18px;font-weight:700;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.6)}"]})};var td=class{usuario;mensaje;fecha;constructor(e,t){this.usuario=e,this.mensaje=t,this.fecha=new Date}toFirestore(){return{usuario:this.usuario.toFirestore(),mensaje:this.mensaje,fecha:this.fecha.toISOString()}}};var iF=["messagesContainer"];function rF(n,e){if(n&1&&(D(0,"div",8)(1,"div",9)(2,"span",10),N(3),x(),D(4,"small",11),N(5),hh(6,"date"),x()(),D(7,"p",12),N(8),x()()),n&2){let t=e.$implicit;V(3),kn(t.usuario.CORREO),V(2),kn(_0(6,3,t.fecha,"medium")),V(3),kn(t.mensaje)}}var nd=class n{constructor(e){this.chatServic=e}usuario=new Fo;mensaje="";mensajes=[];messagesContainer;ngOnInit(){this.cargarMensajes()}cargarMensajes(){return g(this,null,function*(){try{this.mensajes=yield this.chatServic.cargarMensajes()}catch(e){console.error("Error al cargar mensajes:",e)}})}enviarMensaje(){return g(this,null,function*(){try{if(this.mensaje.trim()!==""){this.usuario.CORREO="test@test.com",this.usuario.UID="asdasdasdas",this.usuario.FECHA_REGISTRO=new Date,this.usuario.ULTIMA_CONEXION=new Date;let e=new td(this.usuario,this.mensaje);yield this.chatServic.guardarMensaje(e),this.mensaje="",yield this.cargarMensajes()}}catch(e){console.error("Error al enviar el mensaje:",e)}})}ngAfterViewInit(){this.scrollToBottom()}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(t){return new(t||n)(G(Vo))};static \u0275cmp=ue({type:n,selectors:[["app-chat"]],viewQuery:function(t,i){if(t&1&&_s(iF,5),t&2){let r;Pn(r=Nn())&&(i.messagesContainer=r.first)}},decls:9,vars:3,consts:[["messagesContainer",""],[1,"chat-container"],[1,"chat-box"],[1,"messages"],["class","message",4,"ngFor","ngForOf"],[1,"message-input"],["placeholder","Escribe tu mensaje",3,"ngModelChange","ngModel"],[3,"click","disabled"],[1,"message"],[1,"message-header"],[1,"user"],[1,"timestamp"],[1,"message-body"]],template:function(t,i){if(t&1){let r=Pe();D(0,"div",1)(1,"div",2)(2,"div",3,0),fe(4,rF,9,6,"div",4),x(),D(5,"div",5)(6,"textarea",6),ln("ngModelChange",function(s){return De(r),cn(i.mensaje,s)||(i.mensaje=s),Re(s)}),x(),D(7,"button",7),X("click",function(){return De(r),Re(i.enviarMensaje())}),N(8,"Enviar"),x()()()()}t&2&&(V(4),$("ngForOf",i.mensajes),V(2),an("ngModel",i.mensaje),V(),$("disabled",!i.mensaje.trim()))},dependencies:[ui,zt,En,Xn,O0],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:32px}.chat-box[_ngcontent-%COMP%]{width:100%;max-width:900px;background-color:#ffffff0d;padding:24px;border-radius:12px;color:#fff;box-shadow:0 4px 20px #0003;display:flex;flex-direction:column;height:600px}.messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;margin-bottom:16px;padding-right:10px;max-height:450px}.message[_ngcontent-%COMP%]{margin-bottom:14px;background-color:#ffffff14;padding:12px;border-radius:8px}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:13px;color:#ffffffb3;margin-bottom:4px}.user[_ngcontent-%COMP%]{font-weight:700;color:#fff}.message-body[_ngcontent-%COMP%]{font-size:15px;margin:0;color:#fff;word-wrap:break-word;word-break:break-word;white-space:pre-wrap}.message-input[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;resize:none;padding:12px;border-radius:8px;border:none;font-size:14px;background-color:#ffffff1a;color:#fff;height:60px}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#fff9}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#673ab7;border:none;color:#fff;padding:12px 20px;border-radius:8px;cursor:pointer;font-size:14px;transition:background-color .3s ease}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:enabled{background-color:#5e35b1}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#fff3;cursor:not-allowed}"]})};var id=class n{palabra="";palabraOculta="";intentos=0;perdidas=0;puntosGanados=0;LISTA_PALABRAS=["messi"];LETRAS="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");constructor(){}iniciarJuego(){this.palabra=this.obtenerPalabraAleatoria().toUpperCase(),this.palabraOculta="_".repeat(this.palabra.length),this.intentos=0}obtenerPalabraAleatoria(){return this.LISTA_PALABRAS[Math.floor(Math.random()*this.LISTA_PALABRAS.length)]}comprobarLetra(e){if(this.verificarGanador())return!1;if(this.palabra.indexOf(e)===-1)return this.intentos++,!1;let t=this.palabraOculta.split("");for(let i=0;i<this.palabra.length;i++)this.palabra[i]===e&&(t[i]=e);return this.palabraOculta=t.join(""),this.puntosGanados++,!0}verificarGanador(){return!this.palabraOculta.includes("_")||this.intentos>=9}obtenerPalabraOculta(){return this.palabraOculta}obtenerIntentos(){return this.intentos}obtenerLetras(){return this.LETRAS}obtenerPuntos(){return this.puntosGanados}obtenerPalabra(){return this.palabra}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cn=class n{static TABLA_RESULTADOS="resultados";firestore=S(kt);autenticacion=S(Gt);procesoGuardado(e,t){return g(this,null,function*(){try{let r=(yield this.autenticacion.obtenerDatosUsuario())?.CORREO;return r&&(yield this.guardarResultado(r,e,t),console.log("procesoGuardado : OK")),0}catch{return console.log("procesoGuardado : Fallo"),-1}})}guardarResultado(e,t,i){return g(this,null,function*(){try{let r=`${e}_${i}`,o=Di(this.firestore,"acumulados_juegos",r);yield Ca(o,{correo:e,juego:i,puntos:sg(t),ultimaFecha:gr()},{merge:!0}),console.log("guardarResultado : OK")}catch(r){throw r}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function aF(n,e){if(n&1&&(D(0,"div",3),K(1,"img",7),D(2,"h3",4),N(3,"Intentos: "),D(4,"small"),N(5),x()()()),n&2){let t=W();V(),$("src","assets/"+t.intentos+".png",Mn),V(4),xe("",t.intentos," / 9 ")}}function cF(n,e){if(n&1){let t=Pe();D(0,"button",9),X("click",function(){let r=De(t).$implicit,o=W(2);return Re(o.comprobar(r))}),N(1),x()}if(n&2){let t=e.$implicit,i=W(2);$("disabled",i.letrasUsadas.includes(t)),V(),xe(" ",t.toUpperCase()," ")}}function lF(n,e){if(n&1&&(D(0,"div",2)(1,"div",3),fe(2,cF,2,2,"button",8),x()()),n&2){let t=W();V(2),$("ngForOf",t.letras)}}function uF(n,e){if(n&1&&(D(0,"div",2)(1,"div",3)(2,"h1",10),N(3,"Felicidades! Ganaste!"),x(),D(4,"h2",4),N(5),x(),D(6,"div",2)(7,"div",3)(8,"h1"),N(9),x()()()()()),n&2){let t=W();V(5),xe("Puntos ganados: ",t.puntosGanados,""),V(4),xe("Reiniciando juego ",t.tiempoRestante,"")}}function dF(n,e){if(n&1&&(D(0,"div",2)(1,"div",3)(2,"h3",11),N(3,"Lo siento \xA1Perdiste!"),x(),D(4,"h4",10),N(5),x(),D(6,"h2",4),N(7),x(),D(8,"div",2)(9,"div",3)(10,"h1",4),N(11),x()()()()()),n&2){let t=W();V(5),xe("La palabra correcta era: ",t.ahorcadoService.obtenerPalabra(),""),V(2),xe("Puntos ganados: ",t.puntosGanados,""),V(4),xe("Reiniciando juego ",t.tiempoRestante,"")}}var rd=class n{constructor(e,t,i){this.ahorcadoService=e;this.resultadoServicio=t;this.autenticacion=i}vidas=3;palabraOculta="";intentos=0;gano=!1;perdio=!1;letras=[];puntosGanados=0;letrasUsadas=[];intervalo;tiempoRestante=5;ngOnInit(){this.iniciarJuego(),this.puntosGanados=0}iniciarJuego(){this.ahorcadoService.iniciarJuego(),this.palabraOculta=this.ahorcadoService.obtenerPalabraOculta(),this.intentos=this.ahorcadoService.obtenerIntentos(),this.gano=!1,this.perdio=!1,this.letras=this.ahorcadoService.obtenerLetras(),console.log(this.palabraOculta)}comprobar(e){return g(this,null,function*(){if(this.letrasUsadas.includes(e))return;this.letrasUsadas.push(e);let t=this.ahorcadoService.comprobarLetra(e);this.palabraOculta=this.ahorcadoService.obtenerPalabraOculta(),this.intentos=this.ahorcadoService.obtenerIntentos(),this.ahorcadoService.verificarGanador()&&(this.gano=!this.palabraOculta.includes("_"),this.perdio=this.intentos>=9,this.iniciarTemporizador()),this.gano&&(this.puntosGanados+=35),this.perdio&&(this.puntosGanados=yield this.resultadoServicio.procesoGuardado(this.puntosGanados,"ahorcado"),this.puntosGanados=0)})}reiniciarJuego(){this.letrasUsadas=[],this.iniciarJuego()}iniciarTemporizador(){this.intervalo=setInterval(()=>g(this,null,function*(){this.tiempoRestante--,this.tiempoRestante<=0&&(clearInterval(this.intervalo),this.reiniciarJuego(),this.tiempoRestante=5)}),1e3)}ngOnDestroy(){clearInterval(this.intervalo)}static \u0275fac=function(t){return new(t||n)(G(id),G(Cn),G(Gt))};static \u0275cmp=ue({type:n,selectors:[["app-ahorcado"]],decls:15,vars:5,consts:[[1,"container","contenedor-ahorcado"],["charset","utf-8"],[1,"row"],[1,"col","text-center"],[1,"text-white"],["class","col text-center",4,"ngIf"],["class","row",4,"ngIf"],["alt","Perdiste!!! Est\xE1s Ahorcado!!!","title","Perdiste!!! Est\xE1s Ahorcado!!!","height","300","width","300",1,"ahorcado-img",3,"src"],["class","btn btn-primary boton-letra",3,"disabled","click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","boton-letra",3,"click","disabled"],[1,"text-success"],[1,"text-danger"]],template:function(t,i){t&1&&(D(0,"div",0),K(1,"meta",1),D(2,"div",2)(3,"div",3)(4,"h1",4),N(5,"Juego del Ahorcado"),x()()(),D(6,"div",2),fe(7,aF,6,2,"div",5),x(),D(8,"div",2)(9,"div",3)(10,"h1",4),N(11),x()()(),fe(12,lF,3,1,"div",6)(13,uF,10,2,"div",6)(14,dF,12,3,"div",6),x()),t&2&&(V(7),$("ngIf",!(i.gano||i.perdio)),V(4),kn(i.palabraOculta),V(),$("ngIf",!i.gano&&!i.perdio),V(),$("ngIf",i.gano),V(),$("ngIf",i.perdio))},dependencies:[ui,bt],styles:[".ahorcado-img[_ngcontent-%COMP%]{width:100px;height:auto;max-width:100%}.contenedor-ahorcado[_ngcontent-%COMP%]{padding:0;border-radius:20px}.boton-letra[_ngcontent-%COMP%]{margin:4px;width:30px;height:30px;padding:0;font-weight:700;font-size:18px;border-radius:8px}"]})};var od=class n{http=S(Cs);URL_BASE="https://restcountries.com/v3.1/all";obtenerPais(){return this.http.get(this.URL_BASE).pipe(oe(e=>e.sort(()=>.5*Math.random()).slice(0,10).map(t=>({nombre:t.name.common,bandera:t.flags.png}))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function hF(n,e){if(n&1){let t=Pe();D(0,"button",7),X("click",function(){let r=De(t).$implicit,o=W(2);return Re(o.seleccionarOpcion(r))}),N(1),x()}if(n&2){let t=e.$implicit,i=W(2);Ke(i.obtenerClaseBoton(t)),$("disabled",i.respuestaSeleccionada),V(),xe(" ",t," ")}}function fF(n,e){if(n&1&&(D(0,"div",1)(1,"h2"),N(2,"De que pais es esta bandera ?"),x(),D(3,"p",2),N(4),x(),D(5,"p",2),N(6),x(),D(7,"div",3),K(8,"img",4),x(),D(9,"div",5),fe(10,hF,2,4,"button",6),x()()),n&2){let t=W();V(4),Ic("Pregunta ",t.preguntaActual+1," de ",t.preguntas.length,""),V(2),xe("Vidas: ",t.vidas,""),V(2),$("src",t.preguntas[t.preguntaActual]==null?null:t.preguntas[t.preguntaActual].pais.bandera,Mn),V(2),$("ngForOf",t.preguntas[t.preguntaActual]==null?null:t.preguntas[t.preguntaActual].opciones)}}function pF(n,e){if(n&1){let t=Pe();D(0,"div",1)(1,"h2"),N(2),x(),D(3,"button",8),X("click",function(){De(t);let r=W();return Re(r.reiniciarJuego())}),N(4,"Jugar de nuevo"),x()()}if(n&2){let t=W();V(2),xe("Juego finalizado! puntos ganados: ",t.puntos," ")}}var sd=class n{resultadosServicios=S(Cn);paisServicio=S(od);preguntas=[];preguntaActual=0;respuestaSeleccionada=null;puntos=0;mostrarResultado=!1;vidas=3;ngOnInit(){this.iniciarPreguntados()}iniciarPreguntados(){this.paisServicio.obtenerPais().subscribe(e=>{this.preguntas=this.generarPreguntas(e)})}generarPreguntas(e){return e.map(t=>{let i=this.generarOpciones(t,e);return{pais:t,opciones:i}})}generarOpciones(e,t){let i=[e.nombre];for(;i.length<3;){let r=t[Math.floor(Math.random()*t.length)].nombre;i.includes(r)||i.push(r)}return i.sort(()=>.5-Math.random())}seleccionarOpcion(e){return g(this,null,function*(){this.respuestaSeleccionada=e,e===this.preguntas[this.preguntaActual].pais.nombre?this.puntos++:(this.vidas--,yield this.mostrarResultados()),setTimeout(()=>this.siguientePregunta(),1e3)})}siguientePregunta(){this.preguntaActual<this.preguntas.length-1?(this.preguntaActual++,this.respuestaSeleccionada=null):this.mostrarResultado=!0}mostrarResultados(){return g(this,null,function*(){this.vidas||(yield this.resultadosServicios.procesoGuardado(this.puntos,"preguntados"),this.mostrarResultado=!0,this.vidas=3,console.log("puntos guardados: "+this.puntos))})}reiniciarJuego(){return g(this,null,function*(){this.mostrarResultado=!1,this.puntos=0,this.preguntaActual=0,this.respuestaSeleccionada=null,this.iniciarPreguntados()})}obtenerClaseBoton(e){return this.respuestaSeleccionada?e===this.preguntas[this.preguntaActual].pais.nombre?"btn btn-success":e===this.respuestaSeleccionada&&e!==this.preguntas[this.preguntaActual].pais.nombre?"btn btn-danger":"btn btn-secondary":"btn btn-primary"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-preguntados"]],decls:2,vars:2,consts:[["class","container text-center text-white",4,"ngIf"],[1,"container","text-center","text-white"],[1,"mt-3"],[1,"mb-4"],["alt","Bandera","width","300",1,"img-fluid","rounded","shadow",3,"src"],[1,"d-flex","justify-content-center","gap-2","flex-wrap"],[3,"class","disabled","click",4,"ngFor","ngForOf"],[3,"click","disabled"],[1,"btn","btn-primary","boton-reiniciar",3,"click"]],template:function(t,i){t&1&&fe(0,fF,11,5,"div",0)(1,pF,5,1,"div",0),t&2&&($("ngIf",!i.mostrarResultado),V(),$("ngIf",i.mostrarResultado))},dependencies:[ui,bt],styles:["img[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 8px #0003;width:200px;height:auto;max-width:100%}button[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s ease}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.container[_ngcontent-%COMP%]{padding:0;border-radius:20px}"]})};var ad=class n{http=S(Cs);baseUrl="https://deckofcardsapi.com/api/deck";obtenerNuevoMazo(){return this.http.get(`${this.baseUrl}/new/shuffle/?deck_count=1`)}extraerCarta(e){return this.http.get(`${this.baseUrl}/${e}/draw/?count=1`)}obtenerValorCarta(e){switch(e){case"ACE":return 14;case"KING":return 13;case"QUEEN":return 12;case"JACK":return 11;default:return parseInt(e)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function mF(n,e){n&1&&K(0,"img",15)}function gF(n,e){if(n&1&&K(0,"img",16),n&2){let t=W();$("src",t.cartaActual.image,Mn)}}function _F(n,e){if(n&1&&K(0,"img",16),n&2){let t=W(2);$("src",t.nuevaCarta.image,Mn)}}function bF(n,e){if(n&1&&(D(0,"div",6),fe(1,_F,1,1,"img",8),K(2,"div",9),x()),n&2){let t=W();V(),$("ngIf",t.nuevaCarta)}}function vF(n,e){if(n&1&&(D(0,"div",21),N(1),x()),n&2){let t=W(2);it("alert-success",t.mensaje==="Felicidades ganaste un punto por acertar")("alert-danger",t.mensaje==="Fallaste!!!!"||t.intentos===0),V(),xe(" ",t.mensaje," ")}}function yF(n,e){if(n&1&&(D(0,"div",17)(1,"div",18)(2,"span",19),N(3,"Loading..."),x()(),fe(4,vF,2,5,"div",20),x()),n&2){let t=W();V(4),$("ngIf",t.mensaje)}}var cd=class n{idCarta="";cartaActual=null;nuevaCarta=null;nuevoValor=0;mensaje="";valorActual=0;mostrarCargando=!1;puntos=0;intentos=3;cartaServicio=S(ad);resultadoServicio=S(Cn);ngOnInit(){this.obtenerNuevoMazo()}obtenerNuevoMazo(){this.cartaServicio.obtenerNuevoMazo().subscribe(e=>{this.idCarta=e.deck_id,this.extraerCarta()})}extraerCarta(){this.cartaServicio.extraerCarta(this.idCarta).subscribe(e=>{this.cartaActual=e.cards[0],this.valorActual=this.cartaServicio.obtenerValorCarta(this.cartaActual.value),this.mensaje=""})}adivinar(e){this.cartaServicio.extraerCarta(this.idCarta).subscribe(t=>{this.nuevaCarta=t.cards[0],this.nuevoValor=this.cartaServicio.obtenerValorCarta(this.nuevaCarta.value);let i=e?this.nuevoValor>this.valorActual:this.nuevoValor<this.valorActual;if(console.log("carta nueva:"),console.log(this.nuevaCarta),console.log("carta anterior:"),console.log(this.cartaActual),this.esperarTiempo(3e3),this.intentos===0){this.mensaje="Se te acabaron las vidas!!! tu mayor puntaje fue: "+this.puntos,this.puntos=0,this.intentos=3;return}i?(this.mensaje="Felicidades ganaste un punto por acertar",this.puntos++):(this.mensaje="Fallaste!!!!",this.intentos--)})}esperarTiempo(e){return g(this,null,function*(){return this.mostrarCargando=!0,yield this.iniciarTiempo(e),this.mostrarCargando=!1,this.intentos===0&&(this.puntos=yield this.resultadoServicio.procesoGuardado(this.puntos,"mayorMenor"),this.intentos=3),this.cartaActual=this.nuevaCarta,this.valorActual=this.nuevoValor,!1})}iniciarTiempo(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-mayormenor"]],decls:21,vars:8,consts:[[1,"contenedor-juego"],[1,"container","d-flex","flex-column","justify-content-center","align-items-center"],[1,"row"],[1,"col","text-center","align-self-center"],[1,"text-primary"],[1,"d-flex","justify-content-center","mt-3"],[1,"card","mx-2",2,"width","8rem"],["src","../../../../assets/reverso.JPG","class","card-img-top","alt","Carta en mesa",4,"ngIf"],["class","card-img-top","alt","Carta en mesa",3,"src",4,"ngIf"],[1,"card-body"],["class","card mx-2","style","width: 8rem;",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-danger",3,"click","disabled"],[1,"btn","btn-primary","me-2",3,"click","disabled"],["class","mt-3",4,"ngIf"],["src","../../../../assets/reverso.JPG","alt","Carta en mesa",1,"card-img-top"],["alt","Carta en mesa",1,"card-img-top",3,"src"],[1,"mt-3"],["role","status",1,"spinner-grow","text-primary"],[1,"visually-hidden"],["class","mt-3 alert",3,"alert-success","alert-danger",4,"ngIf"],[1,"mt-3","alert"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),N(5,"Juego de Mayor-Menor"),x(),D(6,"h4",4),N(7),x(),D(8,"div",5)(9,"div",6),fe(10,mF,1,0,"img",7),x(),D(11,"div",6),fe(12,gF,1,1,"img",8),K(13,"div",9),x(),fe(14,bF,3,1,"div",10),x(),D(15,"div",11)(16,"button",12),X("click",function(){return i.adivinar(!1)}),N(17,"Menor"),x(),D(18,"button",13),X("click",function(){return i.adivinar(!0)}),N(19,"Mayor"),x()(),fe(20,yF,5,1,"div",14),x()()()()),t&2&&(V(7),Ic("Puntos: ",i.puntos," | Vidas: ",i.intentos,""),V(3),$("ngIf",i.cartaActual),V(2),$("ngIf",i.cartaActual),V(2),$("ngIf",i.nuevaCarta&&i.mostrarCargando),V(2),$("disabled",i.mostrarCargando),V(2),$("disabled",i.mostrarCargando),V(2),$("ngIf",i.mostrarCargando))},dependencies:[bt]})};function wF(n,e){if(n&1){let t=Pe();D(0,"div",2)(1,"h2"),N(2,"Agilidad mental"),x(),D(3,"p")(4,"strong"),N(5,"Tiempo restante:"),x(),N(6),x(),D(7,"p")(8,"strong"),N(9,"Puntos:"),x(),N(10),x(),D(11,"div",3)(12,"h3"),N(13),x(),D(14,"input",4),ln("ngModelChange",function(r){De(t);let o=W();return cn(o.respuestaUsuario,r)||(o.respuestaUsuario=r),Re(r)}),x()(),D(15,"button",5),X("click",function(){De(t);let r=W();return Re(r.verificarRespuesta())}),N(16,"Responder"),x()()}if(n&2){let t=W();V(6),xe(" ",t.tiempoRestante," segundos"),V(4),xe(" ",t.puntos,""),V(3),g0("",t.numero1," ",t.operador," ",t.numero2," = ?"),V(),an("ngModel",t.respuestaUsuario)}}function IF(n,e){if(n&1){let t=Pe();D(0,"div",6)(1,"h2",7),N(2,"Se acabo tu tiempo, tu mayor puntaje es"),x(),D(3,"h1"),N(4),x(),D(5,"button",8),X("click",function(){De(t);let r=W();return Re(r.reiniciarJuego())}),N(6,"Jugar de nuevo"),x()()}if(n&2){let t=W();V(4),kn(t.puntos)}}var ld=class n{numero1=0;numero2=0;operador="+";respuestaUsuario=null;puntos=0;tiempoRestante=30;intervalo;juegoFinalizado=!1;resultadoServicio=S(Cn);ngOnInit(){this.nuevaPregunta(),this.iniciarTemporizador()}ngOnDestroy(){clearInterval(this.intervalo)}iniciarTemporizador(){this.intervalo=setInterval(()=>g(this,null,function*(){this.tiempoRestante--,this.tiempoRestante<=0&&(clearInterval(this.intervalo),this.juegoFinalizado=!0,yield this.resultadoServicio.procesoGuardado(this.puntos,"matematicas"))}),1e3)}nuevaPregunta(){let e=["+","-","*"];this.numero1=this.obtenerNumeroAleatorio(),this.numero2=this.obtenerNumeroAleatorio(),this.operador=e[Math.floor(Math.random()*e.length)]}obtenerNumeroAleatorio(){return Math.floor(Math.random()*10)+1}calcularResultado(){switch(this.operador){case"+":return this.numero1+this.numero2;case"-":return this.numero1-this.numero2;case"*":return this.numero1*this.numero2;default:return 0}}verificarRespuesta(){this.respuestaUsuario===this.calcularResultado()&&(this.puntos+=10),this.respuestaUsuario=null,this.nuevaPregunta()}reiniciarJuego(){this.puntos=0,this.tiempoRestante=30,this.juegoFinalizado=!1,this.nuevaPregunta(),this.iniciarTemporizador()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-matematicas"]],decls:3,vars:2,consts:[["finalizado",""],["class","container mt-4 text-center text-white",4,"ngIf","ngIfElse"],[1,"container","mt-4","text-center","text-white"],[1,"mb-3"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"text-center","mt-5","text-white"],[1,"text-white"],[1,"btn","btn-success",3,"click"]],template:function(t,i){if(t&1&&fe(0,wF,17,6,"div",1)(1,IF,7,1,"ng-template",null,0,fh),t&2){let r=dh(2);$("ngIf",!i.juegoFinalizado)("ngIfElse",r)}},dependencies:[bt,zt,Ha,En,Xn]})};var ud=class n{COLECCION="encuestas";firestore=S(kt);guardarEncuesta(e){let t=wI(this.firestore,this.COLECCION);return yI(t,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function TF(n,e){n&1&&(D(0,"div"),N(1," Campo requerido. "),x())}function EF(n,e){n&1&&(D(0,"div"),N(1," Edad inv\xE1lida (18-99). "),x())}function CF(n,e){n&1&&(D(0,"div"),N(1," Solo n\xFAmeros, hasta 10 caracteres. "),x())}var dd=class n{formularioEncuesta;correoUsuario="";fb=S(cT);encuestaServicio=S(ud);ngOnInit(){this.formularioEncuesta=this.fb.group({nombre:["",$t.required],edad:[null,[$t.required,$t.min(18),$t.max(99)]],telefono:["",[$t.required,$t.pattern("^[0-9]{1,10}$")]],jugarFuturo:["",$t.required],juegoDificil:["",$t.required],recomendar:[[],$t.required]}),this.correoUsuario="test@mail.com"}enviarEncuesta(){if(this.formularioEncuesta.valid){let e=F({correo:this.correoUsuario,fecha:new Date},this.formularioEncuesta.value);this.encuestaServicio.guardarEncuesta(e).then(()=>{alert("Encuesta enviada correctamente"),this.formularioEncuesta.reset()})}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-encuesta"]],decls:57,vars:5,consts:[[1,"formulario-encuesta",3,"ngSubmit","formGroup"],[1,"grid-formulario"],[1,"columna"],["type","text","formControlName","nombre","placeholder","Ingresa tu nombre y apellido"],[4,"ngIf"],["type","number","formControlName","edad","placeholder","Ingresa tu edad"],["type","text","formControlName","telefono","placeholder","Ingresa tu n\xFAmero de tel\xE9fono"],["type","radio","value","S\xED, definitivamente","formControlName","jugarFuturo"],["type","radio","value","Tal vez","formControlName","jugarFuturo"],["type","radio","value","No","formControlName","jugarFuturo"],["formControlName","juegoDificil"],["value","Ahorcado"],["value","Mayor o Menor"],["value","Preguntados"],["value","Matem\xE1ticas"],["type","checkbox","formControlName","recomendar","value","S\xED"],["type","checkbox","formControlName","recomendar","value","No"],["type","submit",3,"disabled"]],template:function(t,i){if(t&1&&(D(0,"form",0),X("ngSubmit",function(){return i.enviarEncuesta()}),D(1,"h3"),N(2,"Datos personales"),x(),D(3,"div",1)(4,"div",2)(5,"label"),N(6,"Nombre y Apellido:"),x(),K(7,"input",3),fe(8,TF,2,0,"div",4),D(9,"label"),N(10,"Edad:"),x(),K(11,"input",5),fe(12,EF,2,0,"div",4),D(13,"label"),N(14,"Tel\xE9fono:"),x(),K(15,"input",6),fe(16,CF,2,0,"div",4),x(),D(17,"div",2)(18,"h3"),N(19,"Encuesta"),x(),D(20,"label"),N(21,"\xBFTe gustar\xEDa volver a jugar esta app en el futuro?"),x(),K(22,"br"),D(23,"label"),K(24,"input",7),N(25," S\xED, definitivamente"),x(),K(26,"br"),D(27,"label"),K(28,"input",8),N(29," Tal vez"),x(),K(30,"br"),D(31,"label"),K(32,"input",9),N(33," No"),x(),K(34,"br"),D(35,"label"),N(36,"\xBFQu\xE9 juego te pareci\xF3 m\xE1s dif\xEDcil?"),x(),D(37,"select",10)(38,"option",11),N(39,"Ahorcado"),x(),D(40,"option",12),N(41,"Mayor o Menor"),x(),D(42,"option",13),N(43,"Preguntados"),x(),D(44,"option",14),N(45,"Matem\xE1ticas"),x()(),D(46,"label"),N(47,"\xBFRecomendar\xEDas esta app a otras personas?"),x(),K(48,"br"),D(49,"label"),K(50,"input",15),N(51," S\xED"),x(),D(52,"label"),K(53,"input",16),N(54," No"),x()()(),D(55,"button",17),N(56,"Enviar encuesta"),x()()),t&2){let r,o,s;$("formGroup",i.formularioEncuesta),V(8),$("ngIf",((r=i.formularioEncuesta.get("nombre"))==null?null:r.invalid)&&((r=i.formularioEncuesta.get("nombre"))==null?null:r.touched)),V(4),$("ngIf",((o=i.formularioEncuesta.get("edad"))==null?null:o.invalid)&&((o=i.formularioEncuesta.get("edad"))==null?null:o.touched)),V(4),$("ngIf",((s=i.formularioEncuesta.get("telefono"))==null?null:s.invalid)&&((s=i.formularioEncuesta.get("telefono"))==null?null:s.touched)),V(39),$("disabled",i.formularioEncuesta.invalid)}},dependencies:[bt,ko,rT,sT,zt,Ha,s_,zu,h_,En,Po,f_,p_],styles:[".formulario-encuesta[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;background-color:#ffffff0d;padding:24px;border-radius:12px;box-shadow:0 4px 20px #0003;color:#fff;font-family:Segoe UI,sans-serif}h3[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:6px;margin-bottom:16px;text-align:center}.grid-formulario[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.columna[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-top:12px;margin-bottom:4px;font-weight:500}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid rgba(255,255,255,.2);border-radius:6px;background-color:#ffffff1a;color:#fff;font-size:14px;margin-bottom:8px}input[_ngcontent-%COMP%]::placeholder{color:#fff9}input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;accent-color:white}div[ngIf][_ngcontent-%COMP%]{color:#ff7b7b;font-size:13px;margin-top:2px}button[type=submit][_ngcontent-%COMP%]{margin-top:32px;width:100%;background-color:#673ab7;color:#fff;padding:12px;border:none;border-radius:8px;font-size:15px;cursor:pointer;transition:background-color .3s ease}button[disabled][_ngcontent-%COMP%]{background-color:#ffffff4d;cursor:not-allowed}button[type=submit][_ngcontent-%COMP%]:hover:enabled{background-color:#5e35b1}@media screen and (max-width: 768px){.grid-formulario[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var hd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-quien-soy"]],decls:14,vars:0,consts:[[1,"quien-soy-container"],[1,"quien-soy-box"],[1,"grid-quien-soy"],[1,"columna-imagen"],["src","assets/perfil.jpg","alt","Foto de perfil",1,"imagen-perfil"],[1,"columna-info"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),K(4,"img",4),x(),D(5,"div",5)(6,"h2"),N(7,"Iv\xE1n Becerra"),x(),D(8,"p"),N(9," Soy alumno de la utn cursando las ultimas materias de la carrera Tecnicatura Universitaria en Programacion actualmente me encuentro trabajando mediante una pasantia brindada por la Utn "),x(),D(10,"h3"),N(11,"Mi juego creado: Agilidad mental"),x(),D(12,"p"),N(13," Se trata de un juego donde se debe manejar una rapidez de calculos simples, como por ejemplo sumas, multiplicacion y division en un lapso de tiempo (30seg) se debe acertar los calculos posibles obtener el mayor puntaje y poder quedar en el ranking de los mejores jugadores. "),x()()()()())},styles:[".quien-soy-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.quien-soy-box[_ngcontent-%COMP%]{max-width:900px;width:100%;background-color:#ffffff0d;padding:32px;border-radius:12px;color:#fff;box-shadow:0 4px 20px #0000004d;font-family:Segoe UI,sans-serif}.grid-quien-soy[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:24px}@media screen and (max-width: 768px){.grid-quien-soy[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}}.columna-imagen[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.imagen-perfil[_ngcontent-%COMP%]{width:100%;max-width:200px;height:auto;border-radius:12px;object-fit:cover;box-shadow:0 0 10px #0006}.columna-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;margin-bottom:10px;color:#fff}.columna-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin-top:24px;margin-bottom:10px;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:4px}.columna-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#ffffffd9}"]})};var AF=[{path:"",component:ed,children:[{path:"ahorcado",component:rd},{path:"preguntados",component:sd},{path:"mayormenor",component:cd},{path:"matematicas",component:ld}]},{path:"registro",component:Hu},{path:"iniciar-sesion",component:qu},{path:"encuesta",component:dd},{path:"quien-soy",component:hd},{path:"chat",component:nd},{path:"**",redirectTo:"",pathMatch:"full"}],fd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n});static \u0275inj=ee({imports:[bf.forRoot(AF),bf]})};var pd=class n{title="sala-juegos-tp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&K(0,"router-outlet")},dependencies:[qs]})};var SF=(()=>{class n extends Vc{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(j(be),j(ys),j(Fc))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function DF(){return new V0}function RF(n,e,t){return new B0(n,e,t)}var cE=[{provide:Fc,useFactory:DF},{provide:Vc,useClass:SF},{provide:Fr,useFactory:RF,deps:[Ur,Vc,ae]}],aE=[{provide:ys,useFactory:()=>new L0},{provide:on,useValue:"BrowserAnimations"},...cE],xF=[{provide:ys,useClass:F0},{provide:on,useValue:"NoopAnimations"},...cE],lE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?xF:aE}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:aE,imports:[zc]})}}return n})();var OF="@",MF=(()=>{class n{constructor(t,i,r,o,s){this.doc=t,this.delegate=i,this.zone=r,this.animationType=o,this.moduleImpl=s,this._rendererFactoryPromise=null,this.scheduler=S(c0,{optional:!0}),this.loadingSchedulerFn=S(PF,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-GEMZGXYL.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new Ee(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new N_(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let c=s.createRenderer(t,i);o.use(c),this.scheduler?.notify(10)}).catch(s=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){kr()}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),N_=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(OF)}},PF=new Y("");function uE(n="animations"){return _c("NgAsyncAnimations"),It([{provide:Fr,useFactory:(e,t,i)=>new MF(e,t,i,n),deps:[be,Ur,ae]},{provide:on,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}function NF(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:r===0&&t!==0&&t%1e6===0&&i===0||!(r>=0&&r<=5)?4:5}var dE=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",NF];R0(dE);var md=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n,bootstrap:[pd]});static \u0275inj=ee({providers:[g1(()=>_1({projectId:"utn-juegos-2025",appId:"1:791436188633:web:1b93df6350919f8b6817c8",storageBucket:"utn-juegos-2025.firebasestorage.app",apiKey:"AIzaSyB3igy4Iq4oE_ISio4Gp4P9cobka9I8S8c",authDomain:"utn-juegos-2025.firebaseapp.com",messagingSenderId:"791436188633"})),fI(()=>mI()),vI(()=>II()),uE(),{provide:Dc,useValue:"es"}],imports:[zc,fd,lT,uT,lE,Z0,PT,kT,AI.forRoot(),sE]})};sv().bootstrapModule(md,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
