var IP=Object.defineProperty,wP=Object.defineProperties;var EP=Object.getOwnPropertyDescriptors;var qu=Object.getOwnPropertySymbols,DP=Object.getPrototypeOf,mD=Object.prototype.hasOwnProperty,gD=Object.prototype.propertyIsEnumerable,bP=Reflect.get;var pD=(n,e,t)=>e in n?IP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})mD.call(e,t)&&pD(n,t,e[t]);if(qu)for(var t of qu(e))gD.call(e,t)&&pD(n,t,e[t]);return n},ne=(n,e)=>wP(n,EP(e));var yD=(n,e)=>{var t={};for(var r in n)mD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&qu)for(var r of qu(n))e.indexOf(r)<0&&gD.call(n,r)&&(t[r]=n[r]);return t};var Vr=(n,e,t)=>bP(DP(n),t,e);var w=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function vD(n,e){return Object.is(n,e)}var tt=null,zu=!1,Gu=1,nr=Symbol("SIGNAL");function Ie(n){let e=tt;return tt=n,e}function _D(){return tt}var Aa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xp(n){if(zu)throw new Error("");if(tt===null)return;tt.consumerOnSignalRead(n);let e=tt.nextProducerIndex++;if(Yu(tt),e<tt.producerNode.length&&tt.producerNode[e]!==n&&Sa(tt)){let t=tt.producerNode[e];Qu(t,tt.producerIndexOfThis[e])}tt.producerNode[e]!==n&&(tt.producerNode[e]=n,tt.producerIndexOfThis[e]=Sa(tt)?DD(n,tt,e):0),tt.producerLastReadVersion[e]=n.version}function TP(){Gu++}function ID(n){if(!(Sa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Gu)){if(!n.producerMustRecompute(n)&&!kp(n)){n.dirty=!1,n.lastCleanEpoch=Gu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Gu}}function wD(n){if(n.liveConsumerNode===void 0)return;let e=zu;zu=!0;try{for(let t of n.liveConsumerNode)t.dirty||CP(t)}finally{zu=e}}function ED(){return tt?.consumerAllowSignalWrites!==!1}function CP(n){n.dirty=!0,wD(n),n.consumerMarkedDirty?.(n)}function Ku(n){return n&&(n.nextProducerIndex=0),Ie(n)}function Op(n,e){if(Ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Sa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Qu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function kp(n){Yu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ID(t),r!==t.version))return!0}return!1}function Fp(n){if(Yu(n),Sa(n))for(let e=0;e<n.producerNode.length;e++)Qu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function DD(n,e,t){if(bD(n),n.liveConsumerNode.length===0&&TD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=DD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Qu(n,e){if(bD(n),n.liveConsumerNode.length===1&&TD(n))for(let r=0;r<n.producerNode.length;r++)Qu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Yu(i),i.producerIndexOfThis[r]=e}}function Sa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function TD(n){return n.producerNode!==void 0}function CD(n){let e=Object.create(SP);e.computation=n;let t=()=>{if(ID(e),xp(e),e.value===Wu)throw e.error;return e.value};return t[nr]=e,t}var Np=Symbol("UNSET"),Pp=Symbol("COMPUTING"),Wu=Symbol("ERRORED"),SP=ne(P({},Aa),{value:Np,dirty:!0,error:null,equal:vD,producerMustRecompute(n){return n.value===Np||n.value===Pp},producerRecomputeValue(n){if(n.value===Pp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Pp;let t=Ku(n),r;try{r=n.computation()}catch(i){r=Wu,n.error=i}finally{Op(n,t)}if(e!==Np&&e!==Wu&&r!==Wu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function AP(){throw new Error}var SD=AP;function AD(){SD()}function RD(n){SD=n}var RP=null;function MD(n){let e=Object.create(PD);e.value=n;let t=()=>(xp(e),e.value);return t[nr]=e,t}function Lp(n,e){ED()||AD(),n.equal(n.value,e)||(n.value=e,MP(n))}function ND(n,e){ED()||AD(),Lp(n,e(n.value))}var PD=ne(P({},Aa),{equal:vD,value:void 0});function MP(n){n.version++,TP(),wD(n),RP?.()}function re(n){return typeof n=="function"}function Ns(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Zu=Ns(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ti(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof Zu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{xD(s)}catch(o){e=e??[],o instanceof Zu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ti(t,e)}remove(e){let{_finalizers:t}=this;t&&Ti(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var Vp=He.EMPTY;function Ju(n){return n instanceof He||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function xD(n){re(n)?n():n.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ps={setTimeout(n,e,...t){let{delegate:r}=Ps;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ps;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xu(n){Ps.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(n);else throw n})}function Ra(){}var OD=Up("C",void 0,void 0);function kD(n){return Up("E",void 0,n)}function FD(n){return Up("N",n,void 0)}function Up(n,e,t){return{kind:n,value:e,error:t}}var Ci=null;function xs(n){if(hn.useDeprecatedSynchronousErrorHandling){let e=!Ci;if(e&&(Ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ci;if(Ci=null,t)throw r}}else n()}function LD(n){hn.useDeprecatedSynchronousErrorHandling&&Ci&&(Ci.errorThrown=!0,Ci.error=n)}var Si=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ju(e)&&e.add(this)):this.destination=xP}static create(e,t,r){return new Os(e,t,r)}next(e){this.isStopped?Bp(FD(e),this):this._next(e)}error(e){this.isStopped?Bp(kD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Bp(OD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NP=Function.prototype.bind;function jp(n,e){return NP.call(n,e)}var $p=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){el(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){el(r)}else el(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){el(t)}}},Os=class extends Si{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&hn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jp(e.next,s),error:e.error&&jp(e.error,s),complete:e.complete&&jp(e.complete,s)}):i=e}this.destination=new $p(i)}};function el(n){hn.useDeprecatedSynchronousErrorHandling?LD(n):Xu(n)}function PP(n){throw n}function Bp(n,e){let{onStoppedNotification:t}=hn;t&&Ps.setTimeout(()=>t(n,e))}var xP={closed:!0,next:Ra,error:PP,complete:Ra};var ks=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(n){return n}function Hp(...n){return qp(n)}function qp(n){return n.length===0?Lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=kP(t)?t:new Os(t,r,i);return xs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=VD(r),new r((i,s)=>{let o=new Os({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ks](){return this}pipe(...t){return qp(t)(this)}toPromise(t){return t=VD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function VD(n){var e;return(e=n??hn.Promise)!==null&&e!==void 0?e:Promise}function OP(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function kP(n){return n&&n instanceof Si||OP(n)&&Ju(n)}function zp(n){return re(n?.lift)}function ve(n){return e=>{if(zp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Gp(n,e,t,r,i)}var Gp=class extends Si{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Fs(){return ve((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ls=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Fs()(this)}};var UD=Ns(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UD}next(t){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Vp:(this.currentObservers=null,s.push(t),new He(()=>{this.currentObservers=null,Ti(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new tl(e,t),n})(),tl=class extends Fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Vp}};var ht=class extends Fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wp={now(){return(Wp.delegate||Date).now()},delegate:void 0};var nl=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Ma={setInterval(n,e,...t){let{delegate:r}=Ma;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ma;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Vs=class extends nl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ma.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ti(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Us=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Us.now=Wp.now;var js=class extends Us{constructor(e,t=Us.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Kp=new js(Vs);var rl=class extends Vs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var il=class extends js{};var Qp=new il(rl);var Vt=new ye(n=>n.complete());function jD(n){return n&&re(n.schedule)}function BD(n){return n[n.length-1]}function sl(n){return re(BD(n))?n.pop():void 0}function Ur(n){return jD(BD(n))?n.pop():void 0}function Yp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function HD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function $D(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(n){return this instanceof Ai?(this.v=n,this):new Ai(n)}function qD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(E){return Promise.resolve(E).then(y,p)}}function a(y,E){r[y]&&(i[y]=function(A){return new Promise(function(M,k){s.push([y,A,M,k])>1||c(y,A)})},E&&(i[y]=E(i[y])))}function c(y,E){try{l(r[y](E))}catch(A){g(s[0][3],A)}}function l(y){y.value instanceof Ai?Promise.resolve(y.value.v).then(h,p):g(s[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,E){y(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function zD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $D=="function"?$D(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ol=n=>n&&typeof n.length=="number"&&typeof n!="function";function al(n){return re(n?.then)}function cl(n){return re(n[ks])}function ul(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function ll(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dl=FP();function hl(n){return re(n?.[dl])}function fl(n){return qD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ai(t.read());if(i)return yield Ai(void 0);yield yield Ai(r)}}finally{t.releaseLock()}})}function pl(n){return re(n?.getReader)}function We(n){if(n instanceof ye)return n;if(n!=null){if(cl(n))return LP(n);if(ol(n))return VP(n);if(al(n))return UP(n);if(ul(n))return GD(n);if(hl(n))return jP(n);if(pl(n))return BP(n)}throw ll(n)}function LP(n){return new ye(e=>{let t=n[ks]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VP(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function UP(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xu)})}function jP(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function GD(n){return new ye(e=>{$P(n,e).catch(t=>e.error(t))})}function BP(n){return GD(fl(n))}function $P(n,e){var t,r,i,s;return HD(this,void 0,void 0,function*(){try{for(t=zD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function jr(n,e=0){return ve((t,r)=>{t.subscribe(he(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function Br(n,e=0){return ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function WD(n,e){return We(n).pipe(Br(e),jr(e))}function KD(n,e){return We(n).pipe(Br(e),jr(e))}function QD(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function YD(n,e){return new ye(t=>{let r;return Ot(t,e,()=>{r=n[dl](),Ot(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function ml(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZD(n,e){return ml(fl(n),e)}function JD(n,e){if(n!=null){if(cl(n))return WD(n,e);if(ol(n))return QD(n,e);if(al(n))return KD(n,e);if(ul(n))return ml(n,e);if(hl(n))return YD(n,e);if(pl(n))return ZD(n,e)}throw ll(n)}function Ve(n,e){return e?JD(n,e):We(n)}function J(...n){let e=Ur(n);return Ve(n,e)}function Bs(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Zp(n){return!!n&&(n instanceof ye||re(n.lift)&&re(n.subscribe))}var rr=Ns(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function le(n,e){return ve((t,r)=>{let i=0;t.subscribe(he(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:HP}=Array;function qP(n,e){return HP(e)?n(...e):n(e)}function gl(n){return le(e=>qP(n,e))}var{isArray:zP}=Array,{getPrototypeOf:GP,prototype:WP,keys:KP}=Object;function yl(n){if(n.length===1){let e=n[0];if(zP(e))return{args:e,keys:null};if(QP(e)){let t=KP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function QP(n){return n&&typeof n=="object"&&GP(n)===WP}function vl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Na(...n){let e=Ur(n),t=sl(n),{args:r,keys:i}=yl(n);if(r.length===0)return Ve([],e);let s=new ye(YP(r,e,i?o=>vl(i,o):Lt));return t?s.pipe(gl(t)):s}function YP(n,e,t=Lt){return r=>{XD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)XD(e,()=>{let l=Ve(n[c],e),h=!1;l.subscribe(he(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function XD(n,e,t){n?Ot(t,n,e):e()}function eb(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=A=>l<r?E(A):c.push(A),E=A=>{s&&e.next(A),l++;let M=!1;We(t(A,h++)).subscribe(he(e,k=>{i?.(k),s?y(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let k=c.shift();o?Ot(e,o,()=>E(k)):E(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ke(n,e,t=1/0){return re(e)?Ke((r,i)=>le((s,o)=>e(r,s,i,o))(We(n(r,i))),t):(typeof e=="number"&&(t=e),ve((r,i)=>eb(r,i,n,t)))}function $s(n=1/0){return Ke(Lt,n)}function tb(){return $s(1)}function Hs(...n){return tb()(Ve(n,Ur(n)))}function _l(n){return new ye(e=>{We(n()).subscribe(e)})}function Jp(...n){let e=sl(n),{args:t,keys:r}=yl(n),i=new ye(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;We(t[h]).subscribe(he(s,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?vl(r,a):a),s.complete())}))}});return e?i.pipe(gl(e)):i}function Xt(n,e){return ve((t,r)=>{let i=0;t.subscribe(he(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $r(n){return ve((e,t)=>{let r=null,i=!1,s;r=e.subscribe(he(t,void 0,void 0,o=>{s=We(n(o,$r(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function nb(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(he(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ri(n,e){return re(e)?Ke(n,e,1):Ke(n,1)}function Hr(n){return ve((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ir(n){return n<=0?()=>Vt:ve((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xp(n){return le(()=>n)}function Il(n=ZP){return ve((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ZP(){return new rr}function Pa(n){return ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Dn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,s)=>n(i,s,r)):Lt,ir(1),t?Hr(e):Il(()=>new rr))}function qs(n){return n<=0?()=>Vt:ve((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function em(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,s)=>n(i,s,r)):Lt,qs(1),t?Hr(e):Il(()=>new rr))}function tm(n,e){return ve(nb(n,e,arguments.length>=2,!0))}function nm(...n){let e=Ur(n);return ve((t,r)=>{(e?Hs(n,t,e):Hs(n,t)).subscribe(r)})}function en(n,e){return ve((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=s++;We(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function rm(n){return ve((e,t)=>{We(n).subscribe(he(t,()=>t.complete(),Ra)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ve((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(he(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var Hb="https://g.co/ng/security#xss",O=class extends Error{constructor(e,t){super(ug(e,t)),this.code=e}};function ug(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function $a(n){return{toString:n}.toString()}var wl="__parameters__";function JP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function qb(n,e,t){return $a(()=>{let r=JP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(wl)?c[wl]:Object.defineProperty(c,wl,{value:[]})[wl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ut=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function XP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ym(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var ex=Ne({__forward_ref__:Ne});function Li(n){return n.__forward_ref__=Li,n.toString=function(){return Rt(this())},n}function At(n){return zb(n)?n():n}function zb(n){return typeof n=="function"&&n.hasOwnProperty(ex)&&n.__forward_ref__===Li}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function sd(n){return rb(n,Wb)||rb(n,Kb)}function Gb(n){return sd(n)!==null}function rb(n,e){return n.hasOwnProperty(e)?n[e]:null}function tx(n){let e=n&&(n[Wb]||n[Kb]);return e||null}function ib(n){return n&&(n.hasOwnProperty(sb)||n.hasOwnProperty(nx))?n[sb]:null}var Wb=Ne({\u0275prov:Ne}),sb=Ne({\u0275inj:Ne}),Kb=Ne({ngInjectableDef:Ne}),nx=Ne({ngInjectorDef:Ne}),$=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Qb(n){return n&&!!n.\u0275providers}var rx=Ne({\u0275cmp:Ne}),ix=Ne({\u0275dir:Ne}),sx=Ne({\u0275pipe:Ne}),ox=Ne({\u0275mod:Ne}),xl=Ne({\u0275fac:Ne}),Oa=Ne({__NG_ELEMENT_ID__:Ne}),ob=Ne({__NG_ENV_ID__:Ne});function od(n){return typeof n=="string"?n:n==null?"":String(n)}function ax(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():od(n)}function cx(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,n)}function lg(n,e){throw new O(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),vm;function Yb(){return vm}function tn(n){let e=vm;return vm=n,e}function Zb(n,e,t){let r=sd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;lg(n,"Injector")}var ux={},Fa=ux,_m="__NG_DI_FLAG__",Ol="ngTempTokenPath",lx="ngTokenPath",dx=/\n/gm,hx="\u0275",ab="__source",Qs;function fx(){return Qs}function qr(n){let e=Qs;return Qs=n,e}function px(n,e=ae.Default){if(Qs===void 0)throw new O(-203,!1);return Qs===null?Zb(n,void 0,e):Qs.get(n,e&ae.Optional?null:void 0,e)}function H(n,e=ae.Default){return(Yb()||px)(At(n),e)}function N(n,e=ae.Default){return H(n,ad(e))}function ad(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Im(n){let e=[];for(let t=0;t<n.length;t++){let r=At(n[t]);if(Array.isArray(r)){if(r.length===0)throw new O(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],c=mx(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(H(i,s))}else e.push(H(r))}return e}function Jb(n,e){return n[_m]=e,n.prototype[_m]=e,n}function mx(n){return n[_m]}function gx(n,e,t,r){let i=n[Ol];throw e[ab]&&i.unshift(e[ab]),n.message=yx(`
`+n.message,i,t,r),n[lx]=i,n[Ol]=null,n}function yx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hx?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dx,`
  `)}`}var Nt=Jb(qb("Optional"),8);var Xb=Jb(qb("SkipSelf"),4);function Zs(n,e){let t=n.hasOwnProperty(xl);return t?n[xl]:null}function dg(n,e){n.forEach(t=>Array.isArray(t)?dg(t,e):e(t))}function eT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function kl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function hg(n,e,t){let r=Ha(n,e);return r>=0?n[r|1]=t:(r=~r,vx(n,r,e,t)),r}function im(n,e){let t=Ha(n,e);if(t>=0)return n[t|1]}function Ha(n,e){return _x(n,e,1)}function _x(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Js={},kt=[],Xs=new $(""),tT=new $("",-1),nT=new $(""),Fl=class{get(e,t=Fa){if(t===Fa){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}},rT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rT||{}),Cn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cn||{}),Wr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wr||{});function Ix(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function wm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Ex(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function wx(n){return n===3||n===4||n===6}function Ex(n){return n.charCodeAt(0)===64}function La(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cb(n,t,i,null,e[++r]):cb(n,t,i,null,null))}}return n}function cb(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var iT="ng-template";function Dx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Ix(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function fg(n){return n.type===4&&n.value!==iT}function bx(n,e,t){let r=n.type===4&&!t?iT:n.value;return e===r}function Tx(n,e,t){let r=4,i=n.attrs,s=i!==null?Ax(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!fn(r)&&!fn(c))return!1;if(o&&fn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!bx(n,c,t)||c===""&&e.length===1){if(fn(r))return!1;o=!0}}else if(r&8){if(i===null||!Dx(n,i,c,t)){if(fn(r))return!1;o=!0}}else{let l=e[++a],h=Cx(c,i,fg(n),t);if(h===-1){if(fn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(fn(r))return!1;o=!0}}}}return fn(r)||o}function fn(n){return(n&1)===0}function Cx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Rx(e,n)}function Sx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Tx(n,e[r],t))return!0;return!1}function Ax(n){for(let e=0;e<n.length;e++){let t=n[e];if(wx(t))return e}return n.length}function Rx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ub(n,e){return n?":not("+e.trim()+")":e}function Mx(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!fn(o)&&(e+=ub(s,i),i=""),r=o,s=s||!fn(r);t++}return i!==""&&(e+=ub(s,i)),e}function Nx(n){return n.map(Mx).join(",")}function Px(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!fn(i))break;i=s}r++}return{attrs:e,classes:t}}function Bt(n){return $a(()=>{let e=uT(n),t=ne(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cn.Emulated,styles:n.styles||kt,_:null,schemas:n.schemas||null,tView:null,id:""});lT(t);let r=n.dependencies;return t.directiveDefs=db(r,!1),t.pipeDefs=db(r,!0),t.id=kx(t),t})}function xx(n){return Kr(n)||sT(n)}function Ox(n){return n!==null}function it(n){return $a(()=>({type:n.type,bootstrap:n.bootstrap||kt,declarations:n.declarations||kt,imports:n.imports||kt,exports:n.exports||kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lb(n,e){if(n==null)return Js;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Wr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Wr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function It(n){return $a(()=>{let e=uT(n);return lT(e),e})}function Kr(n){return n[rx]||null}function sT(n){return n[ix]||null}function oT(n){return n[sx]||null}function aT(n){let e=Kr(n)||sT(n)||oT(n);return e!==null?e.standalone:!1}function cT(n,e){let t=n[ox]||null;if(!t&&e===!0)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function uT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Js,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lb(n.inputs,e),outputs:lb(n.outputs),debugInfo:null}}function lT(n){n.features?.forEach(e=>e(n))}function db(n,e){if(!n)return null;let t=e?oT:xx;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Ox)}function kx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Mn(n){return{\u0275providers:n}}function Fx(...n){return{\u0275providers:dT(!0,n),\u0275fromNgModule:!0}}function dT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return dg(e,o=>{let a=o;Em(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hT(i,s),t}function hT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];pg(i,s=>{e(s,r)})}}function Em(n,e,t,r){if(n=At(n),!n)return!1;let i=null,s=ib(n),o=!s&&Kr(n);if(!s&&!o){let c=n.ngModule;if(s=ib(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Em(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{dg(s.imports,h=>{Em(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&hT(l,e)}if(!a){let l=Zs(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:nT,useValue:i,multi:!0},i),e({provide:Xs,useValue:()=>H(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;pg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function pg(n,e){for(let t of n)Qb(t)&&(t=t.\u0275providers),Array.isArray(t)?pg(t,e):e(t)}var Lx=Ne({provide:String,useValue:Ne});function fT(n){return n!==null&&typeof n=="object"&&Lx in n}function Vx(n){return!!(n&&n.useExisting)}function Ux(n){return!!(n&&n.useFactory)}function eo(n){return typeof n=="function"}function jx(n){return!!n.useClass}var cd=new $(""),Rl={},Bx={},sm;function mg(){return sm===void 0&&(sm=new Fl),sm}var jt=class{},Va=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bm(e,o=>this.processProvider(o)),this.records.set(tT,zs(void 0,this)),i.has("environment")&&this.records.set(jt,zs(void 0,this));let s=this.records.get(cd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nT,kt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=qr(this),r=tn(void 0),i;try{return e()}finally{qr(t),tn(r)}}get(e,t=Fa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ob))return e[ob](this);r=ad(r);let i,s=qr(this),o=tn(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Gx(e)&&sd(e);l&&this.injectableDefInScope(l)?c=zs(Dm(e),Rl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?mg():this.parent;return t=r&ae.Optional&&t===Fa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ol]=a[Ol]||[]).unshift(Rt(e)),s)throw a;return gx(a,e,"R3InjectorError",this.source)}else throw a}finally{tn(o),qr(s)}}resolveInjectorInitializers(){let e=Ie(null),t=qr(this),r=tn(void 0),i;try{let s=this.get(Xs,kt,ae.Self);for(let o of s)o()}finally{qr(t),tn(r),Ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){e=At(e);let t=eo(e)?e:At(e&&e.provide),r=Hx(e);if(!eo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=zs(void 0,Rl,!0),i.factory=()=>Im(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ie(null);try{return t.value===Rl&&(t.value=Bx,t.value=t.factory()),typeof t.value=="object"&&t.value&&zx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=At(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dm(n){let e=sd(n),t=e!==null?e.factory:Zs(n);if(t!==null)return t;if(n instanceof $)throw new O(204,!1);if(n instanceof Function)return $x(n);throw new O(204,!1)}function $x(n){if(n.length>0)throw new O(204,!1);let t=tx(n);return t!==null?()=>t.factory(n):()=>new n}function Hx(n){if(fT(n))return zs(void 0,n.useValue);{let e=pT(n);return zs(e,Rl)}}function pT(n,e,t){let r;if(eo(n)){let i=At(n);return Zs(i)||Dm(i)}else if(fT(n))r=()=>At(n.useValue);else if(Ux(n))r=()=>n.useFactory(...Im(n.deps||[]));else if(Vx(n))r=()=>H(At(n.useExisting));else{let i=At(n&&(n.useClass||n.provide));if(qx(n))r=()=>new i(...Im(n.deps));else return Zs(i)||Dm(i)}return r}function zs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qx(n){return!!n.deps}function zx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Gx(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function bm(n,e){for(let t of n)Array.isArray(t)?bm(t,e):t&&Qb(t)?bm(t.\u0275providers,e):e(t)}function Nn(n,e){n instanceof Va&&n.assertNotDestroyed();let t,r=qr(n),i=tn(void 0);try{return e()}finally{qr(r),tn(i)}}function mT(){return Yb()!==void 0||fx()!=null}function Wx(n){if(!mT())throw new O(-203,!1)}function Kx(n){let e=Ut.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Qx(n){return typeof n=="function"}var Pn=0,fe=1,ee=2,Mt=3,mn=4,yn=5,Ll=6,Vl=7,gn=8,to=9,Sn=10,qe=11,Ua=12,hb=13,uo=14,An=15,no=16,Gs=17,ro=18,ud=19,gT=20,zr=21,om=22,nn=23,sr=25,gg=1;var Ni=7,Ul=8,jl=9,rn=10,Bl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Bl||{});function Gr(n){return Array.isArray(n)&&typeof n[gg]=="object"}function dr(n){return Array.isArray(n)&&n[gg]===!0}function yg(n){return(n.flags&4)!==0}function ld(n){return n.componentOffset>-1}function dd(n){return(n.flags&1)===1}function or(n){return!!n.template}function Tm(n){return(n[ee]&512)!==0}var Cm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Vi(){return vT}function vT(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zx),Yx}Vi.ngInherit=!0;function Yx(){let n=IT(this),e=n?.current;if(e){let t=n.previous;if(t===Js)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Zx(n,e,t,r,i){let s=this.declaredInputs[r],o=IT(n)||Jx(n,{previous:Js,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Cm(l&&l.currentValue,t,c===Js),yT(n,e,i,t)}var _T="__ngSimpleChanges__";function IT(n){return n[_T]||null}function Jx(n,e){return n[_T]=e}var fb=null;var bn=function(n,e,t){fb?.(n,e,t)},Xx="svg",eO="math";function Rn(n){for(;Array.isArray(n);)n=n[Pn];return n}function tO(n){for(;Array.isArray(n);){if(typeof n[gg]=="object")return n;n=n[Pn]}return null}function wT(n,e){return Rn(e[n])}function sn(n,e){return Rn(e[n.index])}function ET(n,e){return n.data[e]}function Xr(n,e){let t=e[n];return Gr(t)?t:t[Pn]}function vg(n){return(n[ee]&128)===128}function nO(n){return dr(n[Mt])}function io(n,e){return e==null?null:n[e]}function DT(n){n[Gs]=0}function bT(n){n[ee]&1024||(n[ee]|=1024,vg(n)&&fd(n))}function rO(n,e){for(;n>0;)e=e[uo],n--;return e}function hd(n){return!!(n[ee]&9216||n[nn]?.dirty)}function Sm(n){n[Sn].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),hd(n)&&fd(n)}function fd(n){n[Sn].changeDetectionScheduler?.notify(0);let e=Pi(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!vg(e)));)e=Pi(e)}function TT(n,e){if((n[ee]&256)===256)throw new O(911,!1);n[zr]===null&&(n[zr]=[]),n[zr].push(e)}function iO(n,e){if(n[zr]===null)return;let t=n[zr].indexOf(e);t!==-1&&n[zr].splice(t,1)}function Pi(n){let e=n[Mt];return dr(e)?e[Mt]:e}var pe={lFrame:FT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var CT=!1;function sO(){return pe.lFrame.elementDepthCount}function oO(){pe.lFrame.elementDepthCount++}function aO(){pe.lFrame.elementDepthCount--}function ST(){return pe.bindingsEnabled}function cO(){return pe.skipHydrationRootTNode!==null}function uO(n){return pe.skipHydrationRootTNode===n}function lO(){pe.skipHydrationRootTNode=null}function Re(){return pe.lFrame.lView}function ft(){return pe.lFrame.tView}function Ui(n){return pe.lFrame.contextLView=n,n[gn]}function ji(n){return pe.lFrame.contextLView=null,n}function Pt(){let n=AT();for(;n!==null&&n.type===64;)n=n.parent;return n}function AT(){return pe.lFrame.currentTNode}function dO(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Bi(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function _g(){return pe.lFrame.isParent}function RT(){pe.lFrame.isParent=!1}function MT(){return CT}function pb(n){CT=n}function hO(n){return pe.lFrame.bindingIndex=n}function qa(){return pe.lFrame.bindingIndex++}function NT(n){let e=pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fO(){return pe.lFrame.inI18n}function pO(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Am(e)}function mO(){return pe.lFrame.currentDirectiveIndex}function Am(n){pe.lFrame.currentDirectiveIndex=n}function PT(n){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xT(n){pe.lFrame.currentQueryIndex=n}function gO(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[yn]:null}function OT(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=gO(s),i===null||(s=s[uo],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=pe.lFrame=kT();return r.currentTNode=e,r.lView=n,!0}function Ig(n){let e=kT(),t=n[fe];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kT(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?FT(n):e}function FT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function LT(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var VT=LT;function wg(){let n=LT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yO(n){return(pe.lFrame.contextLView=rO(n,pe.lFrame.contextLView))[gn]}function $i(){return pe.lFrame.selectedIndex}function xi(n){pe.lFrame.selectedIndex=n}function pd(){let n=pe.lFrame;return ET(n.tView,n.selectedIndex)}function vO(){return pe.lFrame.currentNamespace}var UT=!0;function md(){return UT}function gd(n){UT=n}function _O(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=vT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function yd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ml(n,e,t){jT(n,e,3,t)}function Nl(n,e,t,r){(n[ee]&3)===t&&jT(n,e,t,r)}function am(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function jT(n,e,t,r){let i=r!==void 0?n[Gs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Gs]+=65536),(a<s||s==-1)&&(IO(n,t,e,c),n[Gs]=(n[Gs]&4294901760)+c+2),c++}function mb(n,e){bn(4,n,e);let t=Ie(null);try{e.call(n)}finally{Ie(t),bn(5,n,e)}}function IO(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ee]>>14<n[Gs]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,mb(a,s)):mb(a,s)}var Ys=-1,Oi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function wO(n){return n instanceof Oi}function EO(n){return(n.flags&8)!==0}function DO(n){return(n.flags&16)!==0}var cm={},Rm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ad(r);let i=this.injector.get(e,cm,r);return i!==cm||t===cm?i:this.parentInjector.get(e,t,r)}};function BT(n){return n!==Ys}function $l(n){return n&32767}function bO(n){return n>>16}function Hl(n,e){let t=bO(n),r=e;for(;t>0;)r=r[uo],t--;return r}var Mm=!0;function gb(n){let e=Mm;return Mm=n,e}var TO=256,$T=TO-1,HT=5,CO=0,Tn={};function SO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oa)&&(r=t[Oa]),r==null&&(r=t[Oa]=CO++);let i=r&$T,s=1<<i;e.data[n+(i>>HT)]|=s}function ql(n,e){let t=qT(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,um(r.data,n),um(e,null),um(r.blueprint,null));let i=Eg(n,e),s=n.injectorIndex;if(BT(i)){let o=$l(i),a=Hl(i,e),c=a[fe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function um(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Eg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=QT(i),r===null)return Ys;if(t++,i=i[uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ys}function Nm(n,e,t){SO(n,e,t)}function zT(n,e,t){if(t&ae.Optional||n!==void 0)return n;lg(e,"NodeInjector")}function GT(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[to],s=tn(void 0);try{return i?i.get(e,r,t&ae.Optional):Zb(e,r,t&ae.Optional)}finally{tn(s)}}return zT(r,e,t)}function WT(n,e,t,r=ae.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ae.Self)){let o=PO(n,e,t,r,Tn);if(o!==Tn)return o}let s=KT(n,e,t,r,Tn);if(s!==Tn)return s}return GT(e,t,r,i)}function KT(n,e,t,r,i){let s=MO(t);if(typeof s=="function"){if(!OT(e,n,r))return r&ae.Host?zT(i,t,r):GT(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))lg(t);else return o}finally{VT()}}else if(typeof s=="number"){let o=null,a=qT(n,e),c=Ys,l=r&ae.Host?e[An][yn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Eg(n,e):e[a+8],c===Ys||!vb(r,!1)?a=-1:(o=e[fe],a=$l(c),e=Hl(c,e)));a!==-1;){let h=e[fe];if(yb(s,a,h.data)){let p=AO(a,e,t,o,r,l);if(p!==Tn)return p}c=e[a+8],c!==Ys&&vb(r,e[fe].data[a+8]===l)&&yb(s,a,e)?(o=h,a=$l(c),e=Hl(c,e)):a=-1}}return i}function AO(n,e,t,r,i,s){let o=e[fe],a=o.data[n+8],c=r==null?ld(a)&&Mm:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=RO(a,o,t,c,l);return h!==null?so(e,o,h,a):Tn}function RO(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let E=o[y];if(y<c&&t===E||y>=c&&E.type===t)return y}if(i){let y=o[c];if(y&&or(y)&&y.type===t)return c}return null}function so(n,e,t,r){let i=n[t],s=e.data;if(wO(i)){let o=i;o.resolving&&cx(ax(s[t]));let a=gb(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?tn(o.injectImpl):null,h=OT(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&_O(t,s[t],e)}finally{l!==null&&tn(l),gb(a),o.resolving=!1,VT()}}return i}function MO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oa)?n[Oa]:void 0;return typeof e=="number"?e>=0?e&$T:NO:e}function yb(n,e,t){let r=1<<n;return!!(t[e+(n>>HT)]&r)}function vb(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Mi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return WT(this._tNode,this._lView,e,ad(r),t)}};function NO(){return new Mi(Pt(),Re())}function lo(n){return $a(()=>{let e=n.prototype.constructor,t=e[xl]||Pm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[xl]||Pm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Pm(n){return zb(n)?()=>{let e=Pm(At(n));return e&&e()}:Zs(n)}function PO(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=KT(s,o,t,r|ae.Self,Tn);if(a!==Tn)return a;let c=s.parent;if(!c){let l=o[gT];if(l){let h=l.get(t,Tn,r);if(h!==Tn)return h}c=QT(o),o=o[uo]}s=c}return i}function QT(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[yn]:null}function _b(n,e=null,t=null,r){let i=YT(n,e,t,r);return i.resolveInjectorInitializers(),i}function YT(n,e=null,t=null,r,i=new Set){let s=[t||kt,Fx(n)];return r=r||(typeof n=="object"?void 0:Rt(n)),new Va(s,e||mg(),r||null,i)}var Ue=class n{static{this.THROW_IF_NOT_FOUND=Fa}static{this.NULL=new Fl}static create(e,t){if(Array.isArray(e))return _b({name:""},t,e,"");{let r=e.name??"";return _b({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=U({token:n,providedIn:"any",factory:()=>H(tT)})}static{this.__NG_ELEMENT_ID__=-1}};var xO=new $("");xO.__NG_ELEMENT_ID__=n=>{let e=Pt();if(e===null)throw new O(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new O(204,!1)};var OO="ngOriginalError";function lm(n){return n[OO]}var ZT=!0,Dg=(()=>{class n{static{this.__NG_ELEMENT_ID__=kO}static{this.__NG_ENV_ID__=t=>t}}return n})(),xm=class extends Dg{constructor(e){super(),this._lView=e}onDestroy(e){return TT(this._lView,e),()=>iO(this._lView,e)}};function kO(){return new xm(Re())}var ho=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Om=class extends Fe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,mT()&&(this.destroyRef=N(Dg,{optional:!0})??void 0,this.pendingTasks=N(ho,{optional:!0})??void 0)}emit(e){let t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Qe=Om;function zl(...n){}function JT(n){let e,t;function r(){n=zl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ib(n){return queueMicrotask(()=>n()),()=>{n=zl}}var bg="isAngularZone",Gl=bg+"_ID",FO=0,ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=ZT}=e;if(typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,UO(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new O(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,LO,zl,zl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},LO={};function Tg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function VO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){JT(()=>{n.callbackScheduled=!1,km(n),n.isCheckStableRunning=!0,Tg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),km(n)}function UO(n){let e=()=>{VO(n)},t=FO++;n._inner=n._inner.fork({name:"angular",properties:{[bg]:!0,[Gl]:t,[Gl+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(jO(c))return r.invokeTask(s,o,a,c);try{return wb(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Eb(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return wb(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!BO(c)&&e(),Eb(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,km(n),Tg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function km(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Eb(n){n._nesting--,Tg(n)}var Wl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function jO(n){return XT(n,"__ignore_ng_zone__")}function BO(n){return XT(n,"__scheduler_tick__")}function XT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function $O(n="zone.js",e){return n==="noop"?new Wl:n==="zone.js"?new ce(e):n}var ar=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&lm(e);for(;t&&lm(t);)t=lm(t);return t||null}},HO=new $("",{providedIn:"root",factory:()=>{let n=N(ce),e=N(ar);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qO(){return vd(Pt(),Re())}function vd(n,e){return new ei(sn(n,e))}var ei=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=qO}}return n})();function eC(n){return(n.flags&128)===128}var tC=new Map,zO=0;function GO(){return zO++}function WO(n){tC.set(n[ud],n)}function Fm(n){tC.delete(n[ud])}var Db="__ngContext__";function Qr(n,e){Gr(e)?(n[Db]=e[ud],WO(e)):n[Db]=e}function nC(n){return iC(n[Ua])}function rC(n){return iC(n[mn])}function iC(n){for(;n!==null&&!dr(n);)n=n[mn];return n}var Lm;function sC(n){Lm=n}function oC(){if(Lm!==void 0)return Lm;if(typeof document<"u")return document;throw new O(210,!1)}var _d=new $("",{providedIn:"root",factory:()=>KO}),KO="ng",Cg=new $(""),xn=new $("",{providedIn:"platform",factory:()=>"unknown"});var Sg=new $(""),Ag=new $("",{providedIn:"root",factory:()=>oC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QO="h",YO="b";var ZO=()=>null;function Rg(n,e,t=!1){return ZO(n,e,t)}var aC=!1,JO=new $("",{providedIn:"root",factory:()=>aC});var El;function XO(){if(El===void 0&&(El=null,Ut.trustedTypes))try{El=Ut.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return El}function Id(n){return XO()?.createHTML(n)||n}var Dl;function ek(){if(Dl===void 0&&(Dl=null,Ut.trustedTypes))try{Dl=Ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dl}function bb(n){return ek()?.createHTML(n)||n}var cr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Hb})`}},Vm=class extends cr{getTypeName(){return"HTML"}},Um=class extends cr{getTypeName(){return"Style"}},jm=class extends cr{getTypeName(){return"Script"}},Bm=class extends cr{getTypeName(){return"URL"}},$m=class extends cr{getTypeName(){return"ResourceURL"}};function On(n){return n instanceof cr?n.changingThisBreaksApplicationSecurity:n}function Hi(n,e){let t=tk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Hb})`)}return t===e}function tk(n){return n instanceof cr&&n.getTypeName()||null}function cC(n){return new Vm(n)}function uC(n){return new Um(n)}function lC(n){return new jm(n)}function dC(n){return new Bm(n)}function hC(n){return new $m(n)}function nk(n){let e=new qm(n);return rk()?new Hm(e):e}var Hm=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Id(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},qm=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Id(e),t}};function rk(){try{return!!new window.DOMParser().parseFromString(Id(""),"text/html")}catch{return!1}}var ik=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mg(n){return n=String(n),n.match(ik)?n:"unsafe:"+n}function hr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function za(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var fC=hr("area,br,col,hr,img,wbr"),pC=hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mC=hr("rp,rt"),sk=za(mC,pC),ok=za(pC,hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ak=za(mC,hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tb=za(fC,ok,ak,sk),gC=hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ck=hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),uk=hr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),lk=za(gC,ck,uk),dk=hr("script,style,template"),zm=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=pk(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=fk(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=Cb(e).toLowerCase();if(!Tb.hasOwnProperty(t))return this.sanitizedSomething=!0,!dk.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!lk.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;gC[a]&&(c=Mg(c)),this.buf.push(" ",o,'="',Sb(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=Cb(e).toLowerCase();Tb.hasOwnProperty(t)&&!fC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Sb(e))}};function hk(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function fk(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw yC(e);return e}function pk(n){let e=n.firstChild;if(e&&hk(n,e))throw yC(e);return e}function Cb(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function yC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var mk=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gk=/([^\#-~ |!])/g;function Sb(n){return n.replace(/&/g,"&amp;").replace(mk,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(gk,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var bl;function Ng(n,e){let t=null;try{bl=bl||nk(n);let r=e?String(e):"";t=bl.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=bl.getInertBodyElement(r)}while(r!==s);let a=new zm().sanitizeChildren(Ab(t)||t);return Id(a)}finally{if(t){let r=Ab(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function Ab(n){return"content"in n&&yk(n)?n.content:null}function yk(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var vn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vn||{});function Pg(n){let e=vk();return e?bb(e.sanitize(vn.HTML,n)||""):Hi(n,"HTML")?bb(On(n)):Ng(oC(),od(n))}function vk(){let n=Re();return n&&n[Sn].sanitizer}var _k=/^>|^->|<!--|-->|--!>|<!-$/g,Ik=/(<|>)/g,wk="\u200B$1\u200B";function Ek(n){return n.replace(_k,e=>e.replace(Ik,wk))}function vC(n){return n instanceof Function?n():n}function Dk(n){return(n??N(Ue)).get(xn)==="browser"}var ur=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ur||{}),bk;function xg(n,e){return bk(n,e)}function Ws(n,e,t,r,i){if(r!=null){let s,o=!1;dr(r)?s=r:Gr(r)&&(o=!0,r=r[Pn]);let a=Rn(r);n===0&&t!==null?i==null?DC(e,t,a):Kl(e,t,a,i||null,!0):n===1&&t!==null?Kl(e,t,a,i||null,!0):n===2?jk(e,a,o):n===3&&e.destroyNode(a),s!=null&&$k(e,n,s,t,i)}}function Tk(n,e){return n.createText(e)}function Ck(n,e,t){n.setValue(e,t)}function Sk(n,e){return n.createComment(Ek(e))}function _C(n,e,t){return n.createElement(e,t)}function Ak(n,e){IC(n,e),e[Pn]=null,e[yn]=null}function Rk(n,e,t,r,i,s){r[Pn]=i,r[yn]=e,Ed(n,r,t,1,i,s)}function IC(n,e){e[Sn].changeDetectionScheduler?.notify(9),Ed(n,e,e[qe],2,null,null)}function Mk(n){let e=n[Ua];if(!e)return dm(n[fe],n);for(;e;){let t=null;if(Gr(e))t=e[Ua];else{let r=e[rn];r&&(t=r)}if(!t){for(;e&&!e[mn]&&e!==n;)Gr(e)&&dm(e[fe],e),e=e[Mt];e===null&&(e=n),Gr(e)&&dm(e[fe],e),t=e&&e[mn]}e=t}}function Nk(n,e,t,r){let i=rn+r,s=t.length;r>0&&(t[i-1][mn]=e),r<s-rn?(e[mn]=t[i],eT(t,rn+r,e)):(t.push(e),e[mn]=null),e[Mt]=t;let o=e[no];o!==null&&t!==o&&wC(o,e);let a=e[ro];a!==null&&a.insertView(n),Sm(e),e[ee]|=128}function wC(n,e){let t=n[jl],r=e[Mt];if(Gr(r))n[ee]|=Bl.HasTransplantedViews;else{let i=r[Mt][An];e[An]!==i&&(n[ee]|=Bl.HasTransplantedViews)}t===null?n[jl]=[e]:t.push(e)}function Og(n,e){let t=n[jl],r=t.indexOf(e);t.splice(r,1)}function Gm(n,e){if(n.length<=rn)return;let t=rn+e,r=n[t];if(r){let i=r[no];i!==null&&i!==n&&Og(i,r),e>0&&(n[t-1][mn]=r[mn]);let s=kl(n,rn+e);Ak(r[fe],r);let o=s[ro];o!==null&&o.detachView(s[fe]),r[Mt]=null,r[mn]=null,r[ee]&=-129}return r}function EC(n,e){if(!(e[ee]&256)){let t=e[qe];t.destroyNode&&Ed(n,e,t,3,null,null),Mk(e)}}function dm(n,e){if(e[ee]&256)return;let t=Ie(null);try{e[ee]&=-129,e[ee]|=256,e[nn]&&Fp(e[nn]),xk(n,e),Pk(n,e),e[fe].type===1&&e[qe].destroy();let r=e[no];if(r!==null&&dr(e[Mt])){r!==e[Mt]&&Og(r,e);let i=e[ro];i!==null&&i.detachView(n)}Fm(e)}finally{Ie(t)}}function Pk(n,e){let t=n.cleanup,r=e[Vl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Vl]=null);let i=e[zr];if(i!==null){e[zr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function xk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];bn(4,a,c);try{c.call(a)}finally{bn(5,a,c)}}else{bn(4,i,s);try{s.call(i)}finally{bn(5,i,s)}}}}}function Ok(n,e,t){return kk(n,e.parent,t)}function kk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Cn.None||s===Cn.Emulated)return null}return sn(r,t)}}function Kl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function DC(n,e,t){n.appendChild(e,t)}function Rb(n,e,t,r,i){r!==null?Kl(n,e,t,r,i):DC(n,e,t)}function bC(n,e){return n.parentNode(e)}function Fk(n,e){return n.nextSibling(e)}function Lk(n,e,t){return Uk(n,e,t)}function Vk(n,e,t){return n.type&40?sn(n,t):null}var Uk=Vk,Mb;function wd(n,e,t,r){let i=Ok(n,r,e),s=e[qe],o=r.parent||e[yn],a=Lk(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Rb(s,i,t[c],a,!1);else Rb(s,i,t,a,!1);Mb!==void 0&&Mb(s,r,e,t,i)}function xa(n,e){if(e!==null){let t=e.type;if(t&3)return sn(e,n);if(t&4)return Wm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return xa(n,r);{let i=n[e.index];return dr(i)?Wm(-1,i):Rn(i)}}else{if(t&128)return xa(n,e.next);if(t&32)return xg(e,n)()||Rn(n[e.index]);{let r=TC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pi(n[An]);return xa(i,r)}else return xa(n,e.next)}}}return null}function TC(n,e){if(e!==null){let r=n[An][yn],i=e.projection;return r.projection[i]}return null}function Wm(n,e){let t=rn+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return xa(r,i)}return e[Ni]}function jk(n,e,t){n.removeChild(null,e,t)}function kg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Qr(Rn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)kg(n,e,t.child,r,i,s,!1),Ws(e,n,i,a,s);else if(c&32){let l=xg(t,r),h;for(;h=l();)Ws(e,n,i,h,s);Ws(e,n,i,a,s)}else c&16?Bk(n,e,r,t,i,s):Ws(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Ed(n,e,t,r,i,s){kg(t,r,n.firstChild,e,i,s,!1)}function Bk(n,e,t,r,i,s){let o=t[An],c=o[yn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ws(e,n,i,h,s)}else{let l=c,h=o[Mt];eC(r)&&(l.flags|=128),kg(n,e,l,h,i,s,!0)}}function $k(n,e,t,r,i){let s=t[Ni],o=Rn(t);s!==o&&Ws(e,n,r,s,i);for(let a=rn;a<t.length;a++){let c=t[a];Ed(c[fe],c,n,e,r,s)}}function Hk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ur.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ur.Important),n.setStyle(t,r,i,s))}}function qk(n,e,t){n.setAttribute(e,"style",t)}function CC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function SC(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&wm(n,e,r),i!==null&&CC(n,e,i),s!==null&&qk(n,e,s)}var ti={};function Se(n=1){AC(ft(),Re(),$i()+n,!1)}function AC(n,e,t,r){if(!r)if((e[ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ml(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Nl(e,s,0,t)}xi(t)}function be(n,e=ae.Default){let t=Re();if(t===null)return H(n,e);let r=Pt();return WT(r,t,At(n),e)}function RC(){let n="invalid";throw new Error(n)}function MC(n,e,t,r,i,s){let o=Ie(null);try{let a=null;i&Wr.SignalBased&&(a=e[r][nr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Wr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):yT(e,a,r,s)}finally{Ie(o)}}function zk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)xi(~i);else{let s=i,o=t[++r],a=t[++r];pO(o,s);let c=e[s];a(2,c)}}}finally{xi(-1)}}function Dd(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Pn]=i,p[ee]=r|4|128|8|64,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),DT(p),p[Mt]=p[uo]=n,p[gn]=t,p[Sn]=o||n&&n[Sn],p[qe]=a||n&&n[qe],p[to]=c||n&&n[to]||null,p[yn]=s,p[ud]=GO(),p[Ll]=h,p[gT]=l,p[An]=e.type==2?n[An]:p,p}function Ga(n,e,t,r,i){let s=n.data[e];if(s===null)s=Gk(n,e,t,r,i),fO()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=dO();s.injectorIndex=o===null?-1:o.injectorIndex}return Bi(s,!0),s}function Gk(n,e,t,r,i){let s=AT(),o=_g(),a=o?s:s&&s.parent,c=n.data[e]=Zk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function NC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function PC(n,e,t,r,i){let s=$i(),o=r&2;try{xi(-1),o&&e.length>sr&&AC(n,e,sr,!1),bn(o?2:0,i),t(r,i)}finally{xi(s),bn(o?3:1,i)}}function Fg(n,e,t){if(yg(e)){let r=Ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ie(r)}}}function Lg(n,e,t){ST()&&(rF(n,e,t,sn(t,e)),(t.flags&64)===64&&kC(n,e,t))}function Vg(n,e,t=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function xC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ug(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ug(n,e,t,r,i,s,o,a,c,l,h){let p=sr+r,g=p+i,y=Wk(p,g),E=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:h}}function Wk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ti);return t}function Kk(n,e,t,r){let s=r.get(JO,aC)||t===Cn.ShadowDom,o=n.selectRootElement(e,s);return Qk(o),o}function Qk(n){Yk(n)}var Yk=()=>null;function Zk(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return cO()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Nb(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Wr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?Pb(r,t,l,a,c):Pb(r,t,l,a)}return r}function Pb(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function Jk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],g=t?t.get(p):null,y=g?g.inputs:null,E=g?g.outputs:null;c=Nb(0,p.inputs,h,c,y),l=Nb(1,p.outputs,h,l,E);let A=c!==null&&o!==null&&!fg(e)?pF(c,h,o):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Xk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function jg(n,e,t,r,i,s,o,a){let c=sn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?($g(n,t,h,r,i),ld(e)&&eF(t,e.index)):e.type&3?(r=Xk(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function eF(n,e){let t=Xr(e,n);t[ee]&16||(t[ee]|=64)}function Bg(n,e,t,r){if(ST()){let i=r===null?null:{"":-1},s=sF(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&OC(n,e,t,o,i,a),i&&oF(t,r,i)}t.mergedAttrs=La(t.mergedAttrs,t.attrs)}function OC(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Nm(ql(t,e),n,r[l].type);cF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=NC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=La(t.mergedAttrs,h.hostAttrs),uF(n,t,e,c,h),aF(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Jk(n,t,s)}function tF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;nF(o)!=a&&o.push(a),o.push(t,r,s)}}function nF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function rF(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;ld(t)&&lF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ql(t,e),Qr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=so(e,n,a,t);if(Qr(l,e),o!==null&&fF(e,a-i,l,c,t,o),or(c)){let h=Xr(t.index,e);h[gn]=so(e,n,a,t)}}}function kC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=mO();try{xi(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Am(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iF(c,l)}}finally{xi(-1),Am(o)}}function iF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function sF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(Sx(e,o.selectors,!1))if(r||(r=[]),or(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Km(n,e,c)}else r.unshift(o),Km(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Km(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new O(-301,!1);r.push(e[i],s)}}}function aF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;or(e)&&(t[""]=n)}}function cF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function uF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Zs(i.type,!0)),o=new Oi(s,or(i),be);n.blueprint[r]=o,t[r]=o,tF(n,e,r,NC(n,t,i.hostVars,ti),i)}function lF(n,e,t){let r=sn(e,n),i=xC(t),s=n[Sn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=bd(n,Dd(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function dF(n,e,t,r,i,s){let o=sn(n,e);hF(e[qe],o,s,n.value,t,r,i)}function hF(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?od(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function fF(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];MC(r,t,c,l,h,p)}}function pF(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function FC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function LC(n,e){let t=n.contentQueries;if(t!==null){let r=Ie(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];xT(s),a.contentQueries(2,e[o],o)}}}finally{Ie(r)}}}function bd(n,e){return n[Ua]?n[hb][mn]=e:n[Ua]=e,n[hb]=e,e}function Qm(n,e,t){xT(0);let r=Ie(null);try{e(n,t)}finally{Ie(r)}}function mF(n){return n[Vl]??=[]}function gF(n){return n.cleanup??=[]}function yF(n,e,t){return(n===null||or(n))&&(t=tO(t[e.index])),t[qe]}function VC(n,e){let t=n[to],r=t?t.get(ar,null):null;r&&r.handleError(e)}function $g(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];MC(h,l,r,a,c,i)}}function vF(n,e,t){let r=wT(e,n);Ck(n[qe],r,t)}function _F(n,e){let t=Xr(e,n),r=t[fe];IF(r,t);let i=t[Pn];i!==null&&t[Ll]===null&&(t[Ll]=Rg(i,t[to])),Hg(r,t,t[gn])}function IF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hg(n,e,t){Ig(e);try{let r=n.viewQuery;r!==null&&Qm(1,r,t);let i=n.template;i!==null&&PC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ro]?.finishViewCreation(n),n.staticContentQueries&&LC(n,e),n.staticViewQueries&&Qm(2,n.viewQuery,t);let s=n.components;s!==null&&wF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,wg()}}function wF(n,e){for(let t=0;t<e.length;t++)_F(n,e[t])}function EF(n,e,t,r){let i=Ie(null);try{let s=e.tView,a=n[ee]&4096?4096:16,c=Dd(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[no]=l;let h=n[ro];return h!==null&&(c[ro]=h.createEmbeddedView(s)),Hg(s,c,t),c}finally{Ie(i)}}function xb(n,e){return!e||e.firstChild===null||eC(n)}function DF(n,e,t,r=!0){let i=e[fe];if(Nk(i,e,n,t),r){let o=Wm(t,n),a=e[qe],c=bC(a,n[Ni]);c!==null&&Rk(i,n[yn],a,e,c,o)}let s=e[Ll];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ql(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Rn(s)),dr(s)&&bF(s,r);let o=t.type;if(o&8)Ql(n,e,t.child,r);else if(o&32){let a=xg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=TC(e,t);if(Array.isArray(a))r.push(...a);else{let c=Pi(e[An]);Ql(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bF(n,e){for(let t=rn;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Ql(r[fe],r,i,e)}n[Ni]!==n[Pn]&&e.push(n[Ni])}var UC=[];function TF(n){return n[nn]??CF(n)}function CF(n){let e=UC.pop()??Object.create(AF);return e.lView=n,e}function SF(n){n.lView[nn]!==n&&(n.lView=null,UC.push(n))}var AF=ne(P({},Aa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{fd(n.lView)},consumerOnSignalRead(){this.lView[nn]=this}});function RF(n){let e=n[nn]??Object.create(MF);return e.lView=n,e}var MF=ne(P({},Aa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Pi(n.lView);for(;e&&!jC(e[fe]);)e=Pi(e);e&&bT(e)},consumerOnSignalRead(){this.lView[nn]=this}});function jC(n){return n.type!==2}var NF=100;function BC(n,e=!0,t=0){let r=n[Sn],i=r.rendererFactory,s=!1;s||i.begin?.();try{PF(n,t)}catch(o){throw e&&VC(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function PF(n,e){let t=MT();try{pb(!0),Ym(n,e);let r=0;for(;hd(n);){if(r===NF)throw new O(103,!1);r++,Ym(n,1)}}finally{pb(t)}}function xF(n,e,t,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Sn].inlineEffectRunner?.flush(),Ig(e);let a=!0,c=null,l=null;s||(jC(n)?(l=TF(e),c=Ku(l)):_D()===null?(a=!1,l=RF(e),c=Ku(l)):e[nn]&&(Fp(e[nn]),e[nn]=null));try{DT(e),hO(n.bindingStartIndex),t!==null&&PC(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let y=n.preOrderCheckHooks;y!==null&&Ml(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Nl(e,y,0,null),am(e,0)}if(o||OF(e),$C(e,0),n.contentQueries!==null&&LC(n,e),!s)if(h){let y=n.contentCheckHooks;y!==null&&Ml(e,y)}else{let y=n.contentHooks;y!==null&&Nl(e,y,1),am(e,1)}zk(n,e);let p=n.components;p!==null&&qC(e,p,0);let g=n.viewQuery;if(g!==null&&Qm(2,g,r),!s)if(h){let y=n.viewCheckHooks;y!==null&&Ml(e,y)}else{let y=n.viewHooks;y!==null&&Nl(e,y,2),am(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[om]){for(let y of e[om])y();e[om]=null}s||(e[ee]&=-73)}catch(h){throw s||fd(e),h}finally{l!==null&&(Op(l,c),a&&SF(l)),wg()}}function $C(n,e){for(let t=nC(n);t!==null;t=rC(t))for(let r=rn;r<t.length;r++){let i=t[r];HC(i,e)}}function OF(n){for(let e=nC(n);e!==null;e=rC(e)){if(!(e[ee]&Bl.HasTransplantedViews))continue;let t=e[jl];for(let r=0;r<t.length;r++){let i=t[r];bT(i)}}}function kF(n,e,t){let r=Xr(e,n);HC(r,t)}function HC(n,e){vg(n)&&Ym(n,e)}function Ym(n,e){let r=n[fe],i=n[ee],s=n[nn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&kp(s)),o||=!1,s&&(s.dirty=!1),n[ee]&=-9217,o)xF(r,n,r.template,n[gn]);else if(i&8192){$C(n,1);let a=r.components;a!==null&&qC(n,a,1)}}function qC(n,e,t){for(let r=0;r<e.length;r++)kF(n,e[r],t)}function qg(n,e){let t=MT()?64:1088;for(n[Sn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Pi(n);if(Tm(n)&&!r)return n;n=r}return null}var ki=class{get rootNodes(){let e=this._lView,t=e[fe];return Ql(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if(dr(e)){let t=e[Ul],r=t?t.indexOf(this):-1;r>-1&&(Gm(e,r),kl(t,r))}this._attachedToViewContainer=!1}EC(this._lView[fe],this._lView)}onDestroy(e){TT(this._lView,e)}markForCheck(){qg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Sm(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,BC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Tm(this._lView),t=this._lView[no];t!==null&&!e&&Og(t,this._lView),IC(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e;let t=Tm(this._lView),r=this._lView[no];r!==null&&!t&&wC(r,this._lView),Sm(this._lView)}},zg=(()=>{class n{static{this.__NG_ELEMENT_ID__=VF}}return n})(),FF=zg,LF=class extends FF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=EF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ki(i)}};function VF(){return UF(Pt(),Re())}function UF(n,e){return n.type&4?new LF(e,n,vd(n,e)):null}var uK=new RegExp(`^(\\d+)*(${YO}|${QO})*(.*)`);var jF=()=>null;function Ob(n,e){return jF(n,e)}var oo=class{},Gg=new $("",{providedIn:"root",factory:()=>!1});var zC=new $(""),GC=new $(""),Zm=class{},Yl=class{};function BF(n){let e=Error(`No component factory found for ${Rt(n)}.`);return e[$F]=n,e}var $F="ngComponent";var Jm=class{resolveComponentFactory(e){throw BF(e)}},Yr=class{static{this.NULL=new Jm}},Zr=class{},fo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>HF()}}return n})();function HF(){let n=Re(),e=Pt(),t=Xr(e.index,n);return(Gr(t)?t:n)[qe]}var qF=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>null})}}return n})();function Zl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ym(i,a);else if(s==2){let c=a,l=e[++o];r=ym(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Jl=class extends Yr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kr(e);return new ao(t,this.ngModule)}};function kb(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Wr.None;e?t.push({propName:o,templateName:r,isSignal:(a&Wr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function zF(n){let e=n.toLowerCase();return e==="svg"?Xx:e==="math"?eO:null}var ao=class extends Yl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=kb(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return kb(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Nx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ie(null);try{i=i||this.ngModule;let o=i instanceof jt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Rm(e,o):e,c=a.get(Zr,null);if(c===null)throw new O(407,!1);let l=a.get(qF,null),h=a.get(oo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?Kk(g,r,this.componentDef.encapsulation,a):_C(g,y,zF(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;E!==null&&(M=Rg(E,a,!0));let k=Ug(0,null,null,1,0,null,null,null,null,null,null),V=Dd(null,k,null,A,null,null,p,g,a,null,M);Ig(V);let j,G,Ce=null;try{let K=this.componentDef,D,v=null;K.findHostDirectiveDefs?(D=[],v=new Map,K.findHostDirectiveDefs(K,D,v),D.push(K)):D=[K];let _=GF(V,E);Ce=WF(_,E,K,D,V,p,g),G=ET(k,sr),E&&YF(g,K,E,r),t!==void 0&&ZF(G,this.ngContentSelectors,t),j=QF(Ce,K,D,v,V,[JF]),Hg(k,V,null)}catch(K){throw Ce!==null&&Fm(Ce),Fm(V),K}finally{wg()}return new Xm(this.componentType,j,vd(G,V),V,G)}finally{Ie(s)}}},Xm=class extends Zm{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;$g(s[fe],s,i,e,t),this.previousInputValues.set(e,t);let o=Xr(this._tNode.index,s);qg(o,1)}}get injector(){return new Mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GF(n,e){let t=n[fe],r=sr;return n[r]=e,Ga(t,r,2,"#host",null)}function WF(n,e,t,r,i,s,o){let a=i[fe];KF(r,n,e,o);let c=null;e!==null&&(c=Rg(e,i[to]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Dd(i,xC(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Km(a,n,r.length-1),bd(i,p),i[n.index]=p}function KF(n,e,t,r){for(let i of n)e.mergedAttrs=La(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Zl(e,e.mergedAttrs,!0),t!==null&&SC(r,t,e))}function QF(n,e,t,r,i,s){let o=Pt(),a=i[fe],c=sn(o,i);OC(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,g=so(i,a,p,o);Qr(g,i)}kC(a,i,o),c&&Qr(c,i);let l=so(i,a,o.directiveStart+o.componentOffset,o);if(n[gn]=i[gn]=l,s!==null)for(let h of s)h(l,e);return Fg(a,o,i),l}function YF(n,e,t,r){if(r)wm(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=Px(e.selectors[0]);i&&wm(n,t,i),s&&s.length>0&&CC(n,t,s.join(" "))}}function ZF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function JF(){let n=Pt();yd(Re()[fe],n)}var Wa=(()=>{class n{static{this.__NG_ELEMENT_ID__=XF}}return n})();function XF(){let n=Pt();return t1(n,Re())}var e1=Wa,WC=class extends e1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vd(this._hostTNode,this._hostLView)}get injector(){return new Mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Eg(this._hostTNode,this._hostLView);if(BT(e)){let t=Hl(e,this._hostLView),r=$l(e),i=t[fe].data[r+8];return new Mi(i,t)}else return new Mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Fb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ob(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,xb(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!Qx(e),a;if(o)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new ao(Kr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let A=(o?l:this.parentInjector).get(jt,null);A&&(s=A)}let h=Kr(c.componentType??{}),p=Ob(this._lContainer,h?.id??null),g=p?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,xb(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(nO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Mt],l=new WC(c,c[yn],c[Mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return DF(o,i,s,r),e.attachToViewContainerRef(),eT(hm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Fb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Gm(this._lContainer,t);r&&(kl(hm(this._lContainer),t),EC(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Gm(this._lContainer,t);return r&&kl(hm(this._lContainer),t)!=null?new ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Fb(n){return n[Ul]}function hm(n){return n[Ul]||(n[Ul]=[])}function t1(n,e){let t,r=e[n.index];return dr(r)?t=r:(t=FC(r,e,null,n),e[n.index]=t,bd(e,t)),r1(t,e,n,r),new WC(t,n,e)}function n1(n,e){let t=n[qe],r=t.createComment(""),i=sn(e,n),s=bC(t,i);return Kl(t,s,r,Fk(t,i),!1),r}var r1=o1,i1=()=>!1;function s1(n,e,t){return i1(n,e,t)}function o1(n,e,t,r){if(n[Ni])return;let i;t.type&8?i=Rn(r):i=n1(e,t),n[Ni]=i}var Lb=new Set;function po(n){Lb.has(n)||(Lb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function a1(n){return typeof n=="function"&&n[nr]!==void 0}function kn(n,e){po("NgSignals");let t=MD(n),r=t[nr];return e?.equal&&(r.equal=e.equal),t.set=i=>Lp(r,i),t.update=i=>ND(r,i),t.asReadonly=c1.bind(t),t}function c1(){let n=this[nr];if(n.readonlyFn===void 0){let e=()=>this();e[nr]=n,n.readonlyFn=e}return n.readonlyFn}function KC(n){return a1(n)&&typeof n.set=="function"}function u1(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(f1))}return s}return Xl.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,g)=>{a.push(""),o.push(r(p).then(y=>{a[l+g]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>p1(s));e.push(c)}),d1(),Promise.all(e).then(()=>{})}var Xl=new Map,l1=new Set;function d1(){let n=Xl;return Xl=new Map,n}function h1(){return Xl.size===0}function f1(n){return typeof n=="string"?n:n.text()}function p1(n){l1.delete(n)}function m1(n){return Object.getPrototypeOf(n.prototype).constructor}function fr(n){let e=m1(n.type),t=!0,r=[n];for(;e;){let i;if(or(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Tl(n.inputs),o.inputTransforms=Tl(n.inputTransforms),o.declaredInputs=Tl(n.declaredInputs),o.outputs=Tl(n.outputs);let a=i.hostBindings;a&&I1(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&v1(n,c),l&&_1(n,l),g1(n,i),XP(n.outputs,i.outputs),or(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===fr&&(t=!1)}}e=Object.getPrototypeOf(e)}y1(r)}function g1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function y1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=La(i.hostAttrs,t=La(t,i.hostAttrs))}}function Tl(n){return n===Js?{}:n===kt?[]:n}function v1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function _1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function I1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Jr=class{},ja=class{};var ed=class extends Jr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jl(this);let s=cT(e);this._bootstrapComponents=vC(s.bootstrap),this._r3Injector=YT(e,t,[{provide:Jr,useValue:this},{provide:Yr,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},td=class extends ja{constructor(e){super(),this.moduleType=e}create(e){return new ed(this.moduleType,e,[])}};function w1(n,e,t){return new ed(n,e,t,!1)}var eg=class extends Jr{constructor(e){super(),this.componentFactoryResolver=new Jl(this),this.instance=null;let t=new Va([...e.providers,{provide:Jr,useValue:this},{provide:Yr,useValue:this.componentFactoryResolver}],e.parent||mg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Td(n,e,t=null){return new eg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function qi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function E1(n){return(n.flags&32)===32}function D1(n,e,t,r,i,s,o,a,c){let l=e.consts,h=Ga(e,n,4,o||null,a||null);Bg(e,t,h,io(l,c)),yd(e,h);let p=h.tView=Ug(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function b1(n,e,t,r,i,s,o,a,c,l){let h=t+sr,p=e.firstCreatePass?D1(h,e,n,r,i,s,o,a,c):e.data[h];Bi(p,!1);let g=T1(e,n,p,t);md()&&wd(e,n,g,p),Qr(g,n);let y=FC(g,n,g,p);return n[h]=y,bd(n,y),s1(y,p,n),dd(p)&&Lg(e,n,p),c!=null&&Vg(n,p,l),p}function ni(n,e,t,r,i,s,o,a){let c=Re(),l=ft(),h=io(l.consts,s);return b1(c,l,n,e,t,r,i,h,o,a),ni}var T1=C1;function C1(n,e,t,r){return gd(!0),e[qe].createComment("")}var Ks=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ks||{}),QC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})(),tg=class n{constructor(){this.ngZone=N(ce),this.scheduler=N(oo),this.errorHandler=N(ar,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ks.EarlyRead,Ks.Write,Ks.MixedReadWrite,Ks.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}},ng=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Wg(n,e){!e?.injector&&Wx(Wg);let t=e?.injector??N(Ue);return Dk(t)?(po("NgAfterNextRender"),A1(n,t,e,!0)):R1}function S1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function A1(n,e,t,r){let i=e.get(QC);i.impl??=e.get(tg);let s=t?.phase??Ks.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(Dg):null,a=new ng(i.impl,S1(n,s),r,o);return i.impl.register(a),a}var R1={destroy(){}};function pr(n,e,t,r){let i=Re(),s=qa();if(qi(i,s,e)){let o=ft(),a=pd();dF(a,i,n,e,t,r)}return pr}function M1(n,e,t,r){return qi(n,qa(),t)?e+od(t)+r:ti}function Cl(n,e){return n<<17|e<<2}function Fi(n){return n>>17&32767}function N1(n){return(n&2)==2}function P1(n,e){return n&131071|e<<17}function rg(n){return n|2}function co(n){return(n&131068)>>2}function fm(n,e){return n&-131069|e<<2}function x1(n){return(n&1)===1}function ig(n){return n|1}function O1(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Fi(o),c=co(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ha(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let g=Fi(n[a+1]);n[r+1]=Cl(g,a),g!==0&&(n[g+1]=fm(n[g+1],r)),n[a+1]=P1(n[a+1],r)}else n[r+1]=Cl(a,0),a!==0&&(n[a+1]=fm(n[a+1],r)),a=r;else n[r+1]=Cl(c,0),a===0?a=r:n[c+1]=fm(n[c+1],r),c=r;l&&(n[r+1]=rg(n[r+1])),Vb(n,h,r,!0),Vb(n,h,r,!1),k1(e,h,n,r,s),o=Cl(a,c),s?e.classBindings=o:e.styleBindings=o}function k1(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ha(s,e)>=0&&(t[r+1]=ig(t[r+1]))}function Vb(n,e,t,r){let i=n[t+1],s=e===null,o=r?Fi(i):co(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];F1(c,e)&&(a=!0,n[o+1]=r?ig(l):rg(l)),o=r?Fi(l):co(l)}a&&(n[t+1]=r?rg(i):ig(i))}function F1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ha(n,e)>=0:!1}var pn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function L1(n){return n.substring(pn.key,pn.keyEnd)}function V1(n){return U1(n),YC(n,ZC(n,0,pn.textEnd))}function YC(n,e){let t=pn.textEnd;return t===e?-1:(e=pn.keyEnd=j1(n,pn.key=e,t),ZC(n,e,t))}function U1(n){pn.key=0,pn.keyEnd=0,pn.value=0,pn.valueEnd=0,pn.textEnd=n.length}function ZC(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function j1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function st(n,e,t){let r=Re(),i=qa();if(qi(r,i,e)){let s=ft(),o=pd();jg(s,o,r,n,e,r[qe],t,!1)}return st}function sg(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";$g(n,t,s[o],o,r)}function zi(n,e,t){return JC(n,e,t,!1),zi}function Cd(n,e){return JC(n,e,null,!0),Cd}function mr(n){$1(K1,B1,n,!0)}function B1(n,e){for(let t=V1(e);t>=0;t=YC(e,t))hg(n,L1(e),!0)}function JC(n,e,t,r){let i=Re(),s=ft(),o=NT(2);if(s.firstUpdatePass&&eS(s,n,o,r),e!==ti&&qi(i,o,e)){let a=s.data[$i()];tS(s,a,i,i[qe],n,i[o+1]=Y1(e,t),r,o)}}function $1(n,e,t,r){let i=ft(),s=NT(2);i.firstUpdatePass&&eS(i,null,s,r);let o=Re();if(t!==ti&&qi(o,s,t)){let a=i.data[$i()];if(nS(a,r)&&!XC(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ym(c,t||"")),sg(i,a,o,t,r)}else Q1(i,a,o,o[qe],o[s+1],o[s+1]=W1(n,e,t),r,s)}}function XC(n,e){return e>=n.expandoStartIndex}function eS(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[$i()],o=XC(n,t);nS(s,r)&&e===null&&!o&&(e=!1),e=H1(i,s,e,r),O1(i,s,e,t,o,r)}}function H1(n,e,t,r){let i=PT(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=pm(null,n,e,t,r),t=Ba(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=pm(i,n,e,t,r),s===null){let c=q1(n,e,r);c!==void 0&&Array.isArray(c)&&(c=pm(null,n,e,c[1],r),c=Ba(c,e.attrs,r),z1(n,e,r,c))}else s=G1(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function q1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(co(r)!==0)return n[Fi(r)]}function z1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Fi(i)]=r}function G1(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ba(r,o,t)}return Ba(r,e.attrs,t)}function pm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ba(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ba(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),hg(n,o,t?!0:e[++s]))}return n===void 0?null:n}function W1(n,e,t){if(t==null||t==="")return kt;let r=[],i=On(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function K1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&hg(n,r,t)}function Q1(n,e,t,r,i,s,o,a){i===ti&&(i=kt);let c=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let g=c<i.length?i[c+1]:void 0,y=l<s.length?s[l+1]:void 0,E=null,A;h===p?(c+=2,l+=2,g!==y&&(E=p,A=y)):p===null||h!==null&&h<p?(c+=2,E=h):(l+=2,E=p,A=y),E!==null&&tS(n,e,t,r,E,A,o,a),h=c<i.length?i[c]:null,p=l<s.length?s[l]:null}}function tS(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=x1(l)?Ub(c,e,t,i,co(l),o):void 0;if(!nd(h)){nd(s)||N1(l)&&(s=Ub(c,null,t,i,a,o));let p=wT($i(),t);Hk(r,o,p,i,s)}}function Ub(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=t[i+1];g===ti&&(g=p?kt:void 0);let y=p?im(g,r):h===r?g:void 0;if(l&&!nd(y)&&(y=im(c,r)),nd(y)&&(a=y,o))return a;let E=n[i+1];i=o?Fi(E):co(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=im(c,r))}return a}function nd(n){return n!==void 0}function Y1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rt(On(n)))),n}function nS(n,e){return(n.flags&(e?8:16))!==0}function Z1(n,e,t,r,i,s){let o=e.consts,a=io(o,i),c=Ga(e,n,2,r,a);return Bg(e,t,c,io(o,s)),c.attrs!==null&&Zl(c,c.attrs,!1),c.mergedAttrs!==null&&Zl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function de(n,e,t,r){let i=Re(),s=ft(),o=sr+n,a=i[qe],c=s.firstCreatePass?Z1(o,s,i,e,t,r):s.data[o],l=J1(s,i,c,a,e,n);i[o]=l;let h=dd(c);return Bi(c,!0),SC(a,l,c),!E1(c)&&md()&&wd(s,i,l,c),sO()===0&&Qr(l,i),oO(),h&&(Lg(s,i,c),Fg(s,c,i)),r!==null&&Vg(i,c),de}function we(){let n=Pt();_g()?RT():(n=n.parent,Bi(n,!1));let e=n;uO(e)&&lO(),aO();let t=ft();return t.firstCreatePass&&(yd(t,n),yg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&EO(e)&&sg(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&DO(e)&&sg(t,e,Re(),e.stylesWithoutHost,!1),we}function wt(n,e,t,r){return de(n,e,t,r),we(),wt}var J1=(n,e,t,r,i,s)=>(gd(!0),_C(r,i,vO()));function X1(n,e,t,r,i){let s=e.consts,o=io(s,r),a=Ga(e,n,8,"ng-container",o);o!==null&&Zl(a,o,!0);let c=io(s,i);return Bg(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Sd(n,e,t){let r=Re(),i=ft(),s=n+sr,o=i.firstCreatePass?X1(s,i,r,e,t):i.data[s];Bi(o,!0);let a=eL(i,r,o,n);return r[s]=a,md()&&wd(i,r,a,o),Qr(a,r),dd(o)&&(Lg(i,r,o),Fg(i,o,r)),t!=null&&Vg(r,o),Sd}function Ad(){let n=Pt(),e=ft();return _g()?RT():(n=n.parent,Bi(n,!1)),e.firstCreatePass&&(yd(e,n),yg(n)&&e.queries.elementEnd(n)),Ad}var eL=(n,e,t,r)=>(gd(!0),Sk(e[qe],""));function mo(){return Re()}function Kg(n,e,t){let r=Re(),i=qa();if(qi(r,i,e)){let s=ft(),o=pd(),a=PT(s.data),c=yF(a,o,r);jg(s,o,r,n,e,c,t,!0)}return Kg}var rd="en-US";var tL=rd;function nL(n){typeof n=="string"&&(tL=n.toLowerCase().replace(/_/g,"-"))}var rL=(n,e,t)=>{};function ot(n,e,t,r){let i=Re(),s=ft(),o=Pt();return rS(s,i,i[qe],o,n,e,r),ot}function iL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Vl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function rS(n,e,t,r,i,s,o){let a=dd(r),l=n.firstCreatePass&&gF(n),h=e[gn],p=mF(e),g=!0;if(r.type&3||o){let A=sn(r,e),M=o?o(A):A,k=p.length,V=o?G=>o(Rn(G[r.index])):r.index,j=null;if(!o&&a&&(j=iL(n,e,i,r.index)),j!==null){let G=j.__ngLastListenerFn__||j;G.__ngNextListenerFn__=s,j.__ngLastListenerFn__=s,g=!1}else{s=Bb(r,e,h,s),rL(A,i,s);let G=t.listen(M,i,s);p.push(s,G),l&&l.push(i,V,k,k+1)}}else s=Bb(r,e,h,s);let y=r.outputs,E;if(g&&y!==null&&(E=y[i])){let A=E.length;if(A)for(let M=0;M<A;M+=2){let k=E[M],V=E[M+1],Ce=e[k][V].subscribe(s),K=p.length;p.push(s,Ce),l&&l.push(i,r.index,K,-(K+1))}}}function jb(n,e,t,r){let i=Ie(null);try{return bn(6,e,t),t(r)!==!1}catch(s){return VC(n,s),!1}finally{bn(7,e,t),Ie(i)}}function Bb(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Xr(n.index,e):e;qg(o,5);let a=jb(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=jb(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function pt(n=1){return yO(n)}function Pe(n,e=""){let t=Re(),r=ft(),i=n+sr,s=r.firstCreatePass?Ga(r,i,1,e,null):r.data[i],o=sL(r,t,s,e,n);t[i]=o,md()&&wd(r,t,o,s),Bi(s,!1)}var sL=(n,e,t,r,i)=>(gd(!0),Tk(e[qe],r));function Fn(n,e,t){let r=Re(),i=M1(r,n,e,t);return i!==ti&&vF(r,$i(),i),Fn}function Gi(n,e,t){KC(e)&&(e=e());let r=Re(),i=qa();if(qi(r,i,e)){let s=ft(),o=pd();jg(s,o,r,n,e,r[qe],t,!1)}return Gi}function go(n,e){let t=KC(n);return t&&n.set(e),t}function Wi(n,e){let t=Re(),r=ft(),i=Pt();return rS(r,t,t[qe],i,n,e),Wi}function oL(n,e,t){let r=ft();if(r.firstCreatePass){let i=or(n);og(t,r.data,r.blueprint,i,!0),og(e,r.data,r.blueprint,i,!1)}}function og(n,e,t,r,i){if(n=At(n),Array.isArray(n))for(let s=0;s<n.length;s++)og(n[s],e,t,r,i);else{let s=ft(),o=Re(),a=Pt(),c=eo(n)?n:At(n.provide),l=pT(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(eo(n)||!n.multi){let y=new Oi(l,i,be),E=gm(c,e,i?h:h+g,p);E===-1?(Nm(ql(a,o),s,c),mm(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{let y=gm(c,e,h+g,p),E=gm(c,e,h,h+g),A=y>=0&&t[y],M=E>=0&&t[E];if(i&&!M||!i&&!A){Nm(ql(a,o),s,c);let k=uL(i?cL:aL,t.length,i,r,l);!i&&M&&(t[E].providerFactory=k),mm(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=iS(t[i?E:y],l,!i&&r);mm(s,n,y>-1?y:E,k)}!i&&r&&M&&t[E].componentProviders++}}}function mm(n,e,t,r){let i=eo(e),s=jx(e);if(i||s){let c=(s?At(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function iS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function aL(n,e,t,r){return ag(this.multi,[])}function cL(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=so(t,t[fe],this.providerFactory.index,r);s=a.slice(0,o),ag(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],ag(i,s);return s}function ag(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uL(n,e,t,r,i){let s=new Oi(n,t,be);return s.multi=[],s.index=e,s.componentProviders=0,iS(s,i,r&&!t),s}function Ka(n,e=[]){return t=>{t.providersResolver=(r,i)=>oL(r,i?i(n):n,e)}}var lL=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dT(!1,t.type),i=r.length>0?Td([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(H(jt))})}}return n})();function Qa(n){po("NgStandalone"),n.getStandaloneInjector=e=>e.get(lL).getOrCreateStandaloneInjector(n)}var Sl=null;function dL(n){Sl!==null&&(n.defaultEncapsulation!==Sl.defaultEncapsulation||n.preserveWhitespaces!==Sl.preserveWhitespaces)||(Sl=n)}var lr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},sS=new lr("18.2.13");var Rd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Qg=new $(""),Ya=new $(""),Md=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Yg||(hL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(H(ce),H(Nd),H(Ya))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Nd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Yg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function hL(n){Yg=n}var Yg;function Ki(n){return!!n&&typeof n.then=="function"}function oS(n){return!!n&&typeof n.subscribe=="function"}var Pd=new $(""),aS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=N(Pd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ki(s))t.push(s);else if(oS(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zg=new $("");function fL(){RD(()=>{throw new O(600,!1)})}function pL(n){return n.isBoundToModule}var mL=10;function gL(n,e,t){try{let r=t();return Ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function cS(n,e){return Array.isArray(e)?e.reduce(cS,n):P(P({},n),e)}var on=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(HO),this.afterRenderManager=N(QC),this.zonelessEnabled=N(Gg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Fe,this.afterTick=new Fe,this.componentTypes=[],this.components=[],this.isStable=N(ho).hasPendingTasks.pipe(le(t=>!t)),this._injector=N(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Yl;if(!this._injector.get(aS).done){let g=!i&&aT(t),y=!1;throw new O(405,y)}let o;i?o=t:o=this._injector.get(Yr).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=pL(o)?void 0:this._injector.get(Jr),c=r||o.selector,l=o.create(Ue.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(Qg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Pl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new O(101,!1);let t=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ie(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Zr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<mL;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)yL(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Pl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Zg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new O(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function yL(n,e,t,r){if(!t&&!hd(n))return;BC(n,e,t&&!r?0:1)}var cg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xd=(()=>{class n{compileModuleSync(t){return new td(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=cT(t),s=vC(i.declarations).reduce((o,a)=>{let c=Kr(a);return c&&o.push(new ao(c)),o},[]);return new cg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vL=new $("");function _L(n,e,t){let r=new td(t);return Promise.resolve(r)}function $b(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var IL=(()=>{class n{constructor(){this.zone=N(ce),this.changeDetectionScheduler=N(oo),this.applicationRef=N(on)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ce(ne(P({},uS()),{scheduleInRootZone:t})),[{provide:ce,useFactory:n},{provide:Xs,multi:!0,useFactory:()=>{let r=N(IL,{optional:!0});return()=>r.initialize()}},{provide:Xs,multi:!0,useFactory:()=>{let r=N(EL);return()=>{r.initialize()}}},e===!0?{provide:zC,useValue:!0}:[],{provide:GC,useValue:t??ZT}]}function uS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var EL=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=N(ce),this.pendingTasks=N(ho)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DL=(()=>{class n{constructor(){this.appRef=N(on),this.taskService=N(ho),this.ngZone=N(ce),this.zonelessEnabled=N(Gg),this.disableScheduling=N(zC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new He,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Gl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(GC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ib:JT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Gl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ib(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bL(){return typeof $localize<"u"&&$localize.locale||rd}var Jg=new $("",{providedIn:"root",factory:()=>N(Jg,ae.Optional|ae.SkipSelf)||bL()});var id=new $("");function Al(n){return!n.moduleRef}function TL(n){let e=Al(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ce);return t.run(()=>{Al(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ar,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Al(n)){let s=()=>e.destroy(),o=n.platformInjector.get(id);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(id);o.add(s),n.moduleRef.onDestroy(()=>{Pl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return gL(r,t,()=>{let s=e.get(aS);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Jg,rd);if(nL(o||rd),Al(n)){let a=e.get(on);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return CL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function CL(n,e){let t=n.injector.get(on);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new O(-403,!1);e.push(n)}var lS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,s=()=>$O(r?.ngZone,ne(P({},uS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),o=r?.ignoreChangesOutsideZone,a=[wL({ngZoneFactory:s,ignoreChangesOutsideZone:o}),{provide:oo,useExisting:DL}],c=w1(t.moduleType,this.injector,a);return TL({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=cS({},r);return _L(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(id,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(H(Ue))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ka=null,dS=new $("");function SL(n){if(ka&&!ka.get(dS,!1))throw new O(400,!1);fL(),ka=n;let e=n.get(lS);return ML(n),e}function Xg(n,e,t=[]){let r=`Platform: ${e}`,i=new $(r);return(s=[])=>{let o=hS();if(!o||o.injector.get(dS,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):SL(AL(a,r))}return RL(i)}}function AL(n=[],e){return Ue.create({name:e,providers:[{provide:cd,useValue:"platform"},{provide:id,useValue:new Set([()=>ka=null])},...n]})}function RL(n){let e=hS();if(!e)throw new O(401,!1);return e}function hS(){return ka?.get(lS)??null}function ML(n){n.get(Cg,null)?.forEach(t=>t())}var Qi=(()=>{class n{static{this.__NG_ELEMENT_ID__=NL}}return n})();function NL(n){return PL(Pt(),Re(),(n&16)===16)}function PL(n,e,t){if(ld(n)&&!t){let r=Xr(n.index,e);return new ki(r,r)}else if(n.type&175){let r=e[An];return new ki(r,e)}return null}var fS=Xg(null,"core",[]),pS=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(H(on))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();function Za(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ja(n,e){po("NgSignals");let t=CD(n);return e?.equal&&(t[nr].equal=e.equal),t}function gr(n){let e=Ie(null);try{return n()}finally{Ie(e)}}function mS(n){let e=Kr(n);if(!e)return null;let t=new ao(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _S=null;function Ln(){return _S}function IS(n){_S??=n}var Od=class{};var Ye=new $(""),ry=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(kL),providedIn:"platform"})}}return n})(),wS=new $(""),kL=(()=>{class n extends ry{constructor(){super(),this._doc=N(Ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function iy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function gS(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function yr(n){return n&&n[0]!=="?"?"?"+n:n}var Yi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(sy),providedIn:"root"})}}return n})(),ES=new $(""),sy=(()=>{class n extends Yi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(Ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return iy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+yr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+yr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+yr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(H(ry),H(ES,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DS=(()=>{class n extends Yi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=iy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+yr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+yr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(H(ry),H(ES,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),yo=(()=>{class n{constructor(t){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=VL(gS(yS(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yr(r))}normalize(t){return n.stripTrailingSlash(LL(this._basePath,yS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=yr}static{this.joinWithSlash=iy}static{this.stripTrailingSlash=gS}static{this.\u0275fac=function(r){return new(r||n)(H(Yi))}}static{this.\u0275prov=U({token:n,factory:()=>FL(),providedIn:"root"})}}return n})();function FL(){return new yo(H(Yi))}function LL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function yS(n){return n.replace(/\/index.html$/,"")}function VL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function bS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Xa=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ey,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(be(Wa),be(zg))}}static{this.\u0275dir=It({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),ey=class{constructor(){this.$implicit=null,this.ngIf=null}};function vS(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Rt(e)}'.`)}var TS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})(),oy="browser",UL="server";function jL(n){return n===oy}function ay(n){return n===UL}var CS=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>jL(N(xn))?new ty(N(Ye),window):new ny})}}return n})(),ty=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=BL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function BL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var ny=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},kd=class{};var ly=class extends Od{constructor(){super(...arguments),this.supportsDOMEvents=!0}},dy=class n extends ly{static makeCurrent(){IS(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=HL();return t==null?null:qL(t)}resetBaseElement(){ec=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bS(document.cookie,e)}},ec=null;function HL(){return ec=ec||document.querySelector("base"),ec?ec.getAttribute("href"):null}function qL(n){return new URL(n,document.baseURI).pathname}var hy=class{addToWindow(e){Ut.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new O(5103,!1);return s},Ut.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ut.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Ut.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ln().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},zL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),fy=new $(""),RS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(H(fy),H(ce))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Fd=class{constructor(e){this._doc=e}},cy="ng-app-id",MS=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ay(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${cy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(cy),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(cy,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(H(Ye),H(_d),H(Ag,8),H(xn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),uy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},my=/%COMP%/g,NS="%COMP%",GL=`_nghost-${NS}`,WL=`_ngcontent-${NS}`,KL=!0,QL=new $("",{providedIn:"root",factory:()=>KL});function YL(n){return WL.replace(my,n)}function ZL(n){return GL.replace(my,n)}function PS(n,e){return e.map(t=>t.replace(my,n))}var Ld=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ay(a),this.defaultRenderer=new tc(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cn.ShadowDom&&(r=ne(P({},r),{encapsulation:Cn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Vd?i.applyToHost(t):i instanceof nc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Cn.Emulated:s=new Vd(c,l,r,this.appId,h,o,a,p);break;case Cn.ShadowDom:return new py(c,l,t,r,o,a,this.nonce,p);default:s=new nc(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(H(RS),H(MS),H(_d),H(QL),H(Ye),H(xn),H(ce),H(Ag))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),tc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=uy[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=uy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ur.DashCase|ur.Important)?e.style.setProperty(t,r,i&ur.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ur.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function SS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var py=class extends tc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=PS(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nc=class extends tc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?PS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vd=class extends nc{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=YL(l),this.hostAttr=ZL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},JL=(()=>{class n extends Fd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(H(Ye))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),AS=["alt","control","meta","shift"],XL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},tV=(()=>{class n extends Fd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),AS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=XL[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AS.forEach(o=>{if(o!==i){let a=eV[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(H(Ye))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function nV(){dy.makeCurrent()}function rV(){return new ar}function iV(){return sC(document),document}var sV=[{provide:xn,useValue:oy},{provide:Cg,useValue:nV,multi:!0},{provide:Ye,useFactory:iV,deps:[]}],xS=Xg(fS,"browser",sV),oV=new $(""),aV=[{provide:Ya,useClass:hy,deps:[]},{provide:Qg,useClass:Md,deps:[ce,Nd,Ya]},{provide:Md,useClass:Md,deps:[ce,Nd,Ya]}],cV=[{provide:cd,useValue:"root"},{provide:ar,useFactory:rV,deps:[]},{provide:fy,useClass:JL,multi:!0,deps:[Ye,ce,xn]},{provide:fy,useClass:tV,multi:!0,deps:[Ye]},Ld,MS,RS,{provide:Zr,useExisting:Ld},{provide:kd,useClass:zL,deps:[]},[]],Ud=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:_d,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(H(oV,12))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({providers:[...cV,...aV],imports:[TS,pS]})}}return n})();var OS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(H(Ye))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=H(uV),i},providedIn:"root"})}}return n})(),uV=(()=>{class n extends gy{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case vn.NONE:return r;case vn.HTML:return Hi(r,"HTML")?On(r):Ng(this._doc,String(r)).toString();case vn.STYLE:return Hi(r,"Style")?On(r):r;case vn.SCRIPT:if(Hi(r,"Script"))return On(r);throw new O(5200,!1);case vn.URL:return Hi(r,"URL")?On(r):Mg(String(r));case vn.RESOURCE_URL:if(Hi(r,"ResourceURL"))return On(r);throw new O(5201,!1);default:throw new O(5202,!1)}}bypassSecurityTrustHtml(t){return cC(t)}bypassSecurityTrustStyle(t){return uC(t)}bypassSecurityTrustScript(t){return lC(t)}bypassSecurityTrustUrl(t){return dC(t)}bypassSecurityTrustResourceUrl(t){return hC(t)}static{this.\u0275fac=function(r){return new(r||n)(H(Ye))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",yc=Symbol("RouteTitle"),Ey=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Do(n){return new Ey(n)}function lV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function dV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vn(n[t],e[t]))return!1;return!0}function Vn(n,e){let t=n?Dy(n):void 0,r=e?Dy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!zS(n[i],e[i]))return!1;return!0}function Dy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function GS(n){return n.length>0?n[n.length-1]:null}function ii(n){return Zp(n)?n:Ki(n)?Ve(Promise.resolve(n)):J(n)}var hV={exact:KS,subset:QS},WS={exact:fV,subset:pV,ignored:()=>!0};function kS(n,e,t){return hV[t.paths](n.root,e.root,t.matrixParams)&&WS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function fV(n,e){return Vn(n,e)}function KS(n,e,t){if(!Ji(n.segments,e.segments)||!$d(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!KS(n.children[r],e.children[r],t))return!1;return!0}function pV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zS(n[t],e[t]))}function QS(n,e,t){return YS(n,e,e.segments,t)}function YS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ji(i,t)||e.hasChildren()||!$d(i,t,r))}else if(n.segments.length===t.length){if(!Ji(n.segments,t)||!$d(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!QS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ji(n.segments,i)||!$d(n.segments,i,r)||!n.children[oe]?!1:YS(n.children[oe],e,s,r)}}function $d(n,e,t){return e.every((r,i)=>WS[t](n[i].parameters,r.parameters))}var _r=class{constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){return yV.serialize(this)}},Te=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hd(this)}},Zi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Do(this.parameters),this._parameterMap}toString(){return JS(this)}};function mV(n,e){return Ji(n,e)&&n.every((t,r)=>Vn(t.parameters,e[r].parameters))}function Ji(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function gV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var vc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new bo,providedIn:"root"})}}return n})(),bo=class{parse(e){let t=new Ty(e);return new _r(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${rc(e.root,!0)}`,r=IV(e.queryParams),i=typeof e.fragment=="string"?`#${vV(e.fragment)}`:"";return`${t}${r}${i}`}},yV=new bo;function Hd(n){return n.segments.map(e=>JS(e)).join("/")}function rc(n,e){if(!n.hasChildren())return Hd(n);if(e){let t=n.children[oe]?rc(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${rc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=gV(n,(r,i)=>i===oe?[rc(n.children[oe],!1)]:[`${i}:${rc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Hd(n)}/${t[0]}`:`${Hd(n)}/(${t.join("//")})`}}function ZS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jd(n){return ZS(n).replace(/%3B/gi,";")}function vV(n){return encodeURI(n)}function by(n){return ZS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qd(n){return decodeURIComponent(n)}function FS(n){return qd(n.replace(/\+/g,"%20"))}function JS(n){return`${by(n.path)}${_V(n.parameters)}`}function _V(n){return Object.entries(n).map(([e,t])=>`;${by(e)}=${by(t)}`).join("")}function IV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${jd(t)}=${jd(i)}`).join("&"):`${jd(t)}=${jd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var wV=/^[^\/()?;#]+/;function vy(n){let e=n.match(wV);return e?e[0]:""}var EV=/^[^\/()?;=#]+/;function DV(n){let e=n.match(EV);return e?e[0]:""}var bV=/^[^=?&#]+/;function TV(n){let e=n.match(bV);return e?e[0]:""}var CV=/^[^&#]+/;function SV(n){let e=n.match(CV);return e?e[0]:""}var Ty=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Te(e,t)),r}parseSegment(){let e=vy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new Zi(qd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=DV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vy(this.remaining);i&&(r=i,this.capture(r))}e[qd(t)]=qd(r)}parseQueryParam(e){let t=TV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=SV(this.remaining);o&&(r=o,this.capture(r))}let i=FS(t),s=FS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new O(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[oe]:new Te([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}};function XS(n){return n.segments.length>0?new Te([],{[oe]:n}):n}function e0(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=e0(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Te(n.segments,e);return AV(t)}function AV(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Te(n.segments.concat(e.segments),e.children)}return n}function uc(n){return n instanceof _r}function RV(n,e,t=null,r=null){let i=t0(n);return n0(i,e,t,r)}function t0(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Te(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=XS(r);return e??i}function n0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _y(i,i,i,t,r);let s=MV(e);if(s.toRoot())return _y(i,i,new Te([],{}),t,r);let o=NV(s,i,n),a=o.processChildren?oc(o.segmentGroup,o.index,s.commands):i0(o.segmentGroup,o.index,s.commands);return _y(i,o.segmentGroup,a,t,r)}function zd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function lc(n){return typeof n=="object"&&n!=null&&n.outlets}function _y(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=r0(n,e,t);let a=XS(e0(o));return new _r(a,s,i)}function r0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=r0(s,e,t)}),new Te(n.segments,r)}var Gd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zd(r[0]))throw new O(4003,!1);let i=r.find(lc);if(i&&i!==GS(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MV(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Gd(t,e,r)}var Io=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function NV(n,e,t){if(n.isAbsolute)return new Io(e,!0,0);if(!t)return new Io(e,!1,NaN);if(t.parent===null)return new Io(t,!0,0);let r=zd(n.commands[0])?0:1,i=t.segments.length-1+r;return PV(t,i,n.numberOfDoubleDots)}function PV(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Io(r,!1,i-s)}function xV(n){return lc(n[0])?n[0].outlets:{[oe]:n}}function i0(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return oc(n,e,t);let r=OV(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Te(n.segments.slice(0,r.pathIndex),{});return s.children[oe]=new Te(n.segments.slice(r.pathIndex),n.children),oc(s,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?Cy(n,e,t):r.match?oc(n,0,i):Cy(n,e,t)}function oc(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=xV(t),i={};if(Object.keys(r).some(s=>s!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let s=oc(n.children[oe],e,t);return new Te(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=i0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Te(n.segments,i)}}function OV(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(lc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!VS(c,l,o))return s;r+=2}else{if(!VS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(lc(s)){let c=kV(s.outlets);return new Te(r,c)}if(i===0&&zd(t[0])){let c=n.segments[e];r.push(new Zi(c.path,LS(t[0]))),i++;continue}let o=lc(s)?s.outlets[oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&zd(a)?(r.push(new Zi(o,LS(a))),i+=2):(r.push(new Zi(o,{})),i++)}return new Te(r,{})}function kV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cy(new Te([],{}),0,r))}),e}function LS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function VS(n,e,t){return n==t.path&&Vn(e,t.parameters)}var ac="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),an=class{constructor(e,t){this.id=e,this.url=t}},To=class extends an{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ir=class extends an{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ht=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ht||{}),Wd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wd||{}),vr=class extends an{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends an{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},dc=class extends an{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kd=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sy=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ay=class extends an{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ry=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Py=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xy=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oy=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ky=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fy=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hc=class{},Co=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function FV(n,e){return n.providers&&!n._injector&&(n._injector=Td(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _n(n){return n.outlet||oe}function LV(n,e){let t=n.filter(r=>_n(r)===e);return t.push(...n.filter(r=>_n(r)!==e)),t}function _c(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ly=class{get injector(){return _c(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ic(this.rootInjector),this.attachRef=null}},Ic=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ly(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(H(jt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Vy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Uy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Uy(e,this._root).map(t=>t.value)}};function Vy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Vy(n,t);if(r)return r}return null}function Uy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Uy(n,t);if(r.length)return r.unshift(e),r}return[]}var $t=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function _o(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zd=class extends Yd{constructor(e,t){super(e),this.snapshot=t,Ky(this,e)}toString(){return this.snapshot.toString()}};function s0(n){let e=VV(n),t=new ht([new Zi("",{})]),r=new ht({}),i=new ht({}),s=new ht({}),o=new ht(""),a=new So(t,r,s,o,i,oe,n,e.root);return a.snapshot=e.root,new Zd(new $t(a,[]),e)}function VV(n){let e={},t={},r={},i="",s=new wo([],e,r,i,t,oe,n,null,{});return new Xd("",new $t(s,[]))}var So=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(l=>l[yc]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Do(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Do(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&a0(i)&&(r.resolve[yc]=i.title),r}var wo=class{get title(){return this.data?.[yc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Do(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xd=class extends Yd{constructor(e,t){super(t),this.url=e,Ky(this,t)}toString(){return o0(this._root)}};function Ky(n,e){e.value._routerState=n,e.children.forEach(t=>Ky(n,t))}function o0(n){let e=n.children.length>0?` { ${n.children.map(o0).join(", ")} } `:"";return`${n.value}${e}`}function Iy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vn(e.params,t.params)||n.paramsSubject.next(t.params),dV(e.url,t.url)||n.urlSubject.next(t.url),Vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jy(n,e){let t=Vn(n.params,e.params)&&mV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||jy(n.parent,e.parent))}function a0(n){return typeof n.title=="string"||n.title===null}var Qy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=N(Ic),this.location=N(Wa),this.changeDetector=N(Qi),this.inputBinder=N(ih,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new By(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vi]})}}return n})(),By=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===So?this.route:e===Ic?this.childContexts:this.parent.get(e,t)}},ih=new $(""),US=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Na([r.queryParams,r.params,r.data]).pipe(en(([s,o,a],c)=>(a=P(P(P({},s),o),a),c===0?J(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=mS(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function UV(n,e,t){let r=fc(n,e._root,t?t._root:void 0);return new Zd(r,e)}function fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=jV(n,e,t);return new $t(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fc(n,a)),o}}let r=BV(e.value),i=e.children.map(s=>fc(n,s));return new $t(r,i)}}function jV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fc(n,r,i);return fc(n,r)})}function BV(n){return new So(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var pc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},c0="ngNavigationCancelingError";function eh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=uc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=u0(!1,Ht.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function u0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[c0]=!0,t.cancellationCode=e,t}function $V(n){return l0(n)&&uc(n.url)}function l0(n){return!!n&&n[c0]}var HV=(n,e,t,r)=>le(i=>(new $y(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),$y=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Iy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=_o(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_o(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_o(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=_o(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Fy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Oy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Iy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Iy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},th=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Eo=class{constructor(e,t){this.component=e,this.route=t}};function qV(n,e,t){let r=n._root,i=e?e._root:null;return ic(r,i,t,[r.value])}function zV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ro(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Gb(n)?n:e.get(n):r}function ic(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=_o(e);return n.children.forEach(o=>{GV(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>cc(a,t.getContext(o),i)),i}function GV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=WV(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new th(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ic(n,e,a?a.children:null,r,i):ic(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Eo(a.outlet.component,o))}else o&&cc(e,a,i),i.canActivateChecks.push(new th(r)),s.component?ic(n,null,a?a.children:null,r,i):ic(n,null,t,r,i);return i}function WV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ji(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ji(n.url,e.url)||!Vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jy(n,e)||!Vn(n.queryParams,e.queryParams);case"paramsChange":default:return!jy(n,e)}}function cc(n,e,t){let r=_o(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?cc(o,e.children.getContext(s),t):cc(o,null,t):cc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Eo(e.outlet.component,i)):t.canDeactivateChecks.push(new Eo(null,i)):t.canDeactivateChecks.push(new Eo(null,i))}function wc(n){return typeof n=="function"}function KV(n){return typeof n=="boolean"}function QV(n){return n&&wc(n.canLoad)}function YV(n){return n&&wc(n.canActivate)}function ZV(n){return n&&wc(n.canActivateChild)}function JV(n){return n&&wc(n.canDeactivate)}function XV(n){return n&&wc(n.canMatch)}function d0(n){return n instanceof rr||n?.name==="EmptyError"}var Bd=Symbol("INITIAL_VALUE");function Ao(){return en(n=>Na(n.map(e=>e.pipe(ir(1),nm(Bd)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===Bd)return Bd;if(t===!1||eU(t))return t}return!0}),Xt(e=>e!==Bd),ir(1)))}function eU(n){return uc(n)||n instanceof pc}function tU(n,e){return Ke(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?J(ne(P({},t),{guardsResult:!0})):nU(o,r,i,n).pipe(Ke(a=>a&&KV(a)?rU(r,s,n,e):J(a)),le(a=>ne(P({},t),{guardsResult:a})))})}function nU(n,e,t,r){return Ve(n).pipe(Ke(i=>cU(i.component,i.route,t,e,r)),Dn(i=>i!==!0,!0))}function rU(n,e,t,r){return Ve(e).pipe(Ri(i=>Hs(sU(i.route.parent,r),iU(i.route,r),aU(n,i.path,t),oU(n,i.route,t))),Dn(i=>i!==!0,!0))}function iU(n,e){return n!==null&&e&&e(new ky(n)),J(!0)}function sU(n,e){return n!==null&&e&&e(new xy(n)),J(!0)}function oU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>_l(()=>{let o=_c(e)??t,a=Ro(s,o),c=YV(a)?a.canActivate(e,n):Nn(o,()=>a(e,n));return ii(c).pipe(Dn())}));return J(i).pipe(Ao())}function aU(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>zV(o)).filter(o=>o!==null).map(o=>_l(()=>{let a=o.guards.map(c=>{let l=_c(o.node)??t,h=Ro(c,l),p=ZV(h)?h.canActivateChild(r,n):Nn(l,()=>h(r,n));return ii(p).pipe(Dn())});return J(a).pipe(Ao())}));return J(s).pipe(Ao())}function cU(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(a=>{let c=_c(e)??i,l=Ro(a,c),h=JV(l)?l.canDeactivate(n,e,t,r):Nn(c,()=>l(n,e,t,r));return ii(h).pipe(Dn())});return J(o).pipe(Ao())}function uU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let a=Ro(o,n),c=QV(a)?a.canLoad(e,t):Nn(n,()=>a(e,t));return ii(c)});return J(s).pipe(Ao(),h0(r))}function h0(n){return Hp(nt(e=>{if(typeof e!="boolean")throw eh(n,e)}),le(e=>e===!0))}function lU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let a=Ro(o,n),c=XV(a)?a.canMatch(e,t):Nn(n,()=>a(e,t));return ii(c)});return J(s).pipe(Ao(),h0(r))}var mc=class{constructor(e){this.segmentGroup=e||null}},gc=class extends Error{constructor(e){super(),this.urlTree=e}};function vo(n){return Bs(new mc(n))}function dU(n){return Bs(new O(4e3,!1))}function hU(n){return Bs(u0(!1,Ht.GuardRejected))}var Hy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return dU(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:E,title:A}=i,M=Nn(s,()=>a({params:y,data:E,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:g,title:A}));if(M instanceof _r)throw new gc(M);t=M}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new gc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new _r(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Te(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new O(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fU(n,e,t,r,i){let s=f0(n,e,t);return s.matched?(r=FV(e,r),lU(r,e,t,i).pipe(le(o=>o===!0?s:P({},qy)))):J(s)}function f0(n,e,t){if(e.path==="**")return pU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},qy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lV)(t,n,e);if(!i)return P({},qy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?P(P({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function pU(n){return{matched:!0,parameters:n.length>0?GS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function jS(n,e,t,r){return t.length>0&&yU(n,t,r)?{segmentGroup:new Te(e,gU(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&vU(n,t,r)?{segmentGroup:new Te(n.segments,mU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function mU(n,e,t,r){let i={};for(let s of t)if(sh(n,e,s)&&!r[_n(s)]){let o=new Te([],{});i[_n(s)]=o}return P(P({},r),i)}function gU(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&_n(r)!==oe){let i=new Te([],{});t[_n(r)]=i}return t}function yU(n,e,t){return t.some(r=>sh(n,e,r)&&_n(r)!==oe)}function vU(n,e,t){return t.some(r=>sh(n,e,r))}function sh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function _U(n,e,t){return e.length===0&&!n.children[t]}var zy=class{};function IU(n,e,t,r,i,s,o="emptyOnly"){return new Gy(n,e,t,r,i,o,s).recognize()}var wU=31,Gy=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Hy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new O(4002,`'${e.segmentGroup}'`)}recognize(){let e=jS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new $t(r,t),s=new Xd("",i),o=RV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new wo([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(le(r=>({children:r,rootSnapshot:t})),$r(r=>{if(r instanceof gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(le(o=>o instanceof $t?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ve(s).pipe(Ri(o=>{let a=r.children[o],c=LV(t,o);return this.processSegmentGroup(e,c,a,o,i)}),tm((o,a)=>(o.push(...a),o)),Hr(null),em(),Ke(o=>{if(o===null)return vo(r);let a=p0(o);return EU(a),J(a)}))}processSegment(e,t,r,i,s,o,a){return Ve(t).pipe(Ri(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe($r(l=>{if(l instanceof mc)return J(null);throw l}))),Dn(c=>!!c),$r(c=>{if(d0(c))return _U(r,i,s)?J(new zy):vo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return _n(r)!==o&&(o===oe||!sh(i,s,r))?vo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):vo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=f0(t,i,s);if(!c)return vo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wU&&(this.allowRedirects=!1));let y=new wo(s,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,BS(i),_n(i),i.component??i._loadedComponent??null,i,$S(i)),E=Jd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(E.params),y.data=Object.freeze(E.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Ke(M=>this.processSegment(e,r,t,M.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=fU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(en(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(en(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,E=new wo(g,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,BS(r),_n(r),r.component??r._loadedComponent??null,r,$S(r)),A=Jd(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:k}=jS(t,g,y,l);if(k.length===0&&M.hasChildren())return this.processChildren(h,l,M,E).pipe(le(j=>new $t(E,j)));if(l.length===0&&k.length===0)return J(new $t(E,[]));let V=_n(r)===s;return this.processSegment(h,l,M,k,V?oe:s,!0,E).pipe(le(j=>new $t(E,j instanceof $t?[j]:[])))}))):vo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):uU(e,t,r,this.urlSerializer).pipe(Ke(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):hU(t))):J({routes:[],injector:e})}};function EU(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function DU(n){let e=n.value.routeConfig;return e&&e.path===""}function p0(n){let e=[],t=new Set;for(let r of n){if(!DU(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=p0(r.children);e.push(new $t(r.value,i))}return e.filter(r=>!t.has(r))}function BS(n){return n.data||{}}function $S(n){return n.resolve||{}}function bU(n,e,t,r,i,s){return Ke(o=>IU(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:c})=>ne(P({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function TU(n,e){return Ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of m0(c))o.add(l);let a=0;return Ve(o).pipe(Ri(c=>s.has(c)?CU(c,r,n,e):(c.data=Jd(c,c.parent,n).resolve,J(void 0))),nt(()=>a++),qs(1),Ke(c=>a===o.size?J(t):Vt))})}function m0(n){let e=n.children.map(t=>m0(t)).flat();return[n,...e]}function CU(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!a0(i)&&(s[yc]=i.title),SU(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=Jd(n,n.parent,t).resolve,null)))}function SU(n,e,t,r){let i=Dy(n);if(i.length===0)return J({});let s={};return Ve(i).pipe(Ke(o=>AU(n[o],e,t,r).pipe(Dn(),nt(a=>{if(a instanceof pc)throw eh(new bo,a);s[o]=a}))),qs(1),Xp(s),$r(o=>d0(o)?Vt:Bs(o)))}function AU(n,e,t,r){let i=_c(e)??r,s=Ro(n,i),o=s.resolve?s.resolve(e,t):Nn(i,()=>s(e,t));return ii(o)}function wy(n){return en(e=>{let t=n(e);return t?Ve(t).pipe(le(()=>e)):J(e)})}var g0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[yc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(RU),providedIn:"root"})}}return n})(),RU=(()=>{class n extends g0{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(H(OS))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ec=new $("",{providedIn:"root",factory:()=>({})}),MU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Bt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Qa],decls:1,vars:0,template:function(r,i){r&1&&wt(0,"router-outlet")},dependencies:[Qy],encapsulation:2})}}return n})();function Yy(n){let e=n.children&&n.children.map(Yy),t=e?ne(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=MU),t}var nh=new $(""),Zy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(xd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ii(t.loadComponent()).pipe(le(y0),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Pa(()=>{this.componentLoaders.delete(t)})),i=new Ls(r,()=>new Fe).pipe(Fs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=NU(r,this.compiler,t,this.onLoadEndListener).pipe(Pa(()=>{this.childrenLoaders.delete(r)})),o=new Ls(s,()=>new Fe).pipe(Fs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NU(n,e,t,r){return ii(n.loadChildren()).pipe(le(y0),Ke(i=>i instanceof ja||Array.isArray(i)?J(i):Ve(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(nh,[],{optional:!0,self:!0}).flat()),{routes:o.map(Yy),injector:s}}))}function PU(n){return n&&typeof n=="object"&&"default"in n}function y0(n){return PU(n)?n.default:n}var Jy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(xU),providedIn:"root"})}}return n})(),xU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),v0=new $(""),_0=new $("");function OU(n,e,t){let r=n.get(_0),i=n.get(Ye);return n.get(ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),kU(n))),{onViewTransitionCreated:c}=r;return c&&Nn(n,()=>c({transition:a,from:e,to:t})),o})}function kU(n){return new Promise(e=>{Wg({read:()=>setTimeout(e)},{injector:n})})}var FU=new $(""),Xy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fe,this.transitionAbortSubject=new Fe,this.configLoader=N(Zy),this.environmentInjector=N(jt),this.urlSerializer=N(vc),this.rootContexts=N(Ic),this.location=N(yo),this.inputBindingEnabled=N(ih,{optional:!0})!==null,this.titleStrategy=N(g0),this.options=N(Ec,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(Jy),this.createViewTransition=N(v0,{optional:!0}),this.navigationErrorHandler=N(FU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Ny(i)),r=i=>this.events.next(new Py(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ne(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ht({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ac,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(s=>s.id!==0),le(s=>ne(P({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),en(s=>{let o=!1,a=!1;return J(s).pipe(en(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ht.SupersededByNewNavigation),Vt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ne(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ri(c.id,this.urlSerializer.serialize(c.rawUrl),p,Wd.IgnoredSameUrlNavigation)),c.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(en(p=>{let g=this.transitions?.getValue();return this.events.next(new To(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?Vt:Promise.resolve(p)}),bU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ne(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new Kd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:g,source:y,restoredState:E,extras:A}=c,M=new To(p,this.urlSerializer.serialize(g),y,E);this.events.next(M);let k=s0(this.rootComponentType).snapshot;return this.currentTransition=s=ne(P({},c),{targetSnapshot:k,urlAfterRedirects:g,extras:ne(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,J(s)}else{let p="";return this.events.next(new ri(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Wd.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Vt}}),nt(c=>{let l=new Sy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),le(c=>(this.currentTransition=s=ne(P({},c),{guards:qV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),tU(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw eh(this.urlSerializer,c.guardsResult);let l=new Ay(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Xt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ht.GuardRejected),!1)),wy(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(nt(l=>{let h=new Ry(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),en(l=>{let h=!1;return J(l).pipe(TU(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ht.NoDataFromResolver)}}))}),nt(l=>{let h=new My(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),wy(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(g=>{h.component=g}),le(()=>{})));for(let g of h.children)p.push(...l(g));return p};return Na(l(c.targetSnapshot.root)).pipe(Hr(null),ir(1))}),wy(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ve(h).pipe(le(()=>s)):J(s)}),le(c=>{let l=UV(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ne(P({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),nt(()=>{this.events.next(new hc)}),HV(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ir(1),nt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ir(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),rm(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),Pa(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ht.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),$r(c=>{if(a=!0,l0(c))this.events.next(new vr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),$V(c)?this.events.next(new Co(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new dc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=Nn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof pc){let{message:p,cancellationCode:g}=eh(this.urlSerializer,h);this.events.next(new vr(s.id,this.urlSerializer.serialize(s.extractedUrl),p,g)),this.events.next(new Co(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Vt}))}))}cancelNavigationTransition(t,r,i){let s=new vr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LU(n){return n!==ac}var VU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(UU),providedIn:"root"})}}return n})(),Wy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},UU=(()=>{class n extends Wy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lo(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>N(jU),providedIn:"root"})}}return n})(),jU=(()=>{class n extends I0{constructor(){super(...arguments),this.location=N(yo),this.urlSerializer=N(vc),this.options=N(Ec,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(Jy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=s0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof To)this.stateMemento=this.createStateMemento();else if(t instanceof ri)this.rawUrlTree=r.initialUrl;else if(t instanceof Kd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof hc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof vr&&(t.code===Ht.GuardRejected||t.code===Ht.NoDataFromResolver)?this.restoreHistory(r):t instanceof dc?this.restoreHistory(r,!0):t instanceof Ir&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof _r?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=P(P({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lo(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(sc||{});function w0(n,e){n.events.pipe(Xt(t=>t instanceof Ir||t instanceof vr||t instanceof dc||t instanceof ri),le(t=>t instanceof Ir||t instanceof ri?sc.COMPLETE:(t instanceof vr?t.code===Ht.Redirect||t.code===Ht.SupersededByNewNavigation:!1)?sc.REDIRECTING:sc.FAILED),Xt(t=>t!==sc.REDIRECTING),ir(1)).subscribe(()=>{e()})}function BU(n){throw n}var $U={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N(Rd),this.stateManager=N(I0),this.options=N(Ec,{optional:!0})||{},this.pendingTasks=N(ho),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(Xy),this.urlSerializer=N(vc),this.location=N(yo),this.urlHandlingStrategy=N(Jy),this._events=new Fe,this.errorHandler=this.options.errorHandler||BU,this.navigated=!1,this.routeReuseStrategy=N(VU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(nh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(ih,{optional:!0}),this.eventsSubscription=new He,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof vr&&r.code!==Ht.Redirect&&r.code!==Ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ir)this.navigated=!0;else if(r instanceof Co){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LU(i.source)},o);this.scheduleNavigation(a,ac,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}zU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ac,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=P({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=t0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return n0(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=uc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ac,null,r)}navigate(t,r={skipLocationChange:!1}){return qU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},$U):r===!1?i=P({},HU):i=r,uc(t))return kS(this.currentUrlTree,t,i);let s=this.parseUrl(t);return kS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return w0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new O(4008,!1)}function zU(n){return!(n instanceof hc)&&!(n instanceof Co)}var rh=class{};var GU=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Ir),Ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Td(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ve(i).pipe($s())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let s=i.pipe(Ke(o=>o===null?J(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ve([s,o]).pipe($s())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(H(qt),H(xd),H(jt),H(rh),H(Zy))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),E0=new $(""),WU=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ir?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ri&&t.code===Wd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){RC()}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function KU(n){return n.routerState.root}function Dc(n,e){return{\u0275kind:n,\u0275providers:e}}function QU(){let n=N(Ue);return e=>{let t=n.get(on);if(e!==t.components[0])return;let r=n.get(qt),i=n.get(D0);n.get(ev)===1&&r.initialNavigation(),n.get(b0,null,ae.Optional)?.setUpPreloading(),n.get(E0,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var D0=new $("",{factory:()=>new Fe}),ev=new $("",{providedIn:"root",factory:()=>1});function YU(){return Dc(2,[{provide:ev,useValue:0},{provide:Pd,multi:!0,deps:[Ue],useFactory:e=>{let t=e.get(wS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(qt),s=e.get(D0);w0(i,()=>{r(!0)}),e.get(Xy).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))}}])}function ZU(){return Dc(3,[{provide:Pd,multi:!0,useFactory:()=>{let e=N(qt);return()=>{e.setUpLocationChangeListener()}}},{provide:ev,useValue:2}])}var b0=new $("");function JU(n){return Dc(0,[{provide:b0,useExisting:GU},{provide:rh,useExisting:n}])}function XU(){return Dc(8,[US,{provide:ih,useExisting:US}])}function ej(n){let e=[{provide:v0,useValue:OU},{provide:_0,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Dc(9,e)}var HS=new $("ROUTER_FORROOT_GUARD"),tj=[yo,{provide:vc,useClass:bo},qt,Ic,{provide:So,useFactory:KU,deps:[qt]},Zy,[]],tv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tj,[],{provide:nh,multi:!0,useValue:t},{provide:HS,useFactory:sj,deps:[[qt,new Nt,new Xb]]},{provide:Ec,useValue:r||{}},r?.useHash?rj():ij(),nj(),r?.preloadingStrategy?JU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oj(r):[],r?.bindToComponentInputs?XU().\u0275providers:[],r?.enableViewTransitions?ej().\u0275providers:[],aj()]}}static forChild(t){return{ngModule:n,providers:[{provide:nh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(H(HS,8))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();function nj(){return{provide:E0,useFactory:()=>{let n=N(CS),e=N(ce),t=N(Ec),r=N(Xy),i=N(vc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new WU(i,r,n,e,t)}}}function rj(){return{provide:Yi,useClass:DS}}function ij(){return{provide:Yi,useClass:sy}}function sj(n){return"guarded"}function oj(n){return[n.initialNavigation==="disabled"?ZU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?YU().\u0275providers:[]]}var qS=new $("");function aj(){return[{provide:qS,useFactory:QU},{provide:Zg,multi:!0,useExisting:qS}]}var C0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},uj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},S0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(C0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new rv;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let E=l<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lj=function(n){let e=C0(n);return S0.encodeByteArray(e,!0)},bc=function(n){return lj(n).replace(/\./g,"")},sv=function(n){try{return S0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hj=()=>dj().__FIREBASE_DEFAULTS__,fj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&sv(n[1]);return e&&JSON.parse(e)},ah=()=>{try{return hj()||fj()||pj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ov=n=>{var e,t;return(t=(e=ah())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},A0=n=>{let e=ov(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},av=()=>{var n;return(n=ah())===null||n===void 0?void 0:n.config},cv=n=>{var e;return(e=ah())===null||e===void 0?void 0:e[`_${n}`]};var oh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function R0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bc(JSON.stringify(t)),bc(JSON.stringify(o)),""].join(".")}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function mj(){var n;let e=(n=ah())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function x0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O0(){let n=ut();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k0(){return!mj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uv(){try{return typeof indexedDB=="object"}catch{return!1}}function F0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var gj="FirebaseError",zt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wr.prototype.create)}},wr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zt(i,a,r)}};function yj(n,e){return n.replace(vj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var vj=/\{\$([^}]+)}/g;function L0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(T0(s)&&T0(o)){if(!Xi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function T0(n){return n!==null&&typeof n=="object"}function Tc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function No(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function V0(n,e){let t=new iv(n,e);return t.subscribe.bind(t)}var iv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_j(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nv),i.error===void 0&&(i.error=nv),i.complete===void 0&&(i.complete=nv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _j(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nv(){}var vQ=4*60*60*1e3;function mt(n){return n&&n._delegate?n._delegate:n}var cn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var es="[DEFAULT]";var lv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new oh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wj(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ij(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ij(n){return n===es?void 0:n}function wj(n){return n.instantiationMode==="EAGER"}var ch=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Ej=[],me=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(me||{}),Dj={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},bj=me.INFO,Tj={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Cj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Tj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},si=class{constructor(e){this.name=e,this._logLevel=bj,this._logHandler=Cj,this._userLogHandler=null,Ej.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var Sj=(n,e)=>e.some(t=>n instanceof t),U0,j0;function Aj(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rj(){return j0||(j0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var B0=new WeakMap,hv=new WeakMap,$0=new WeakMap,dv=new WeakMap,pv=new WeakMap;function Mj(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Un(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&B0.set(t,n)}).catch(()=>{}),pv.set(e,n),e}function Nj(n){if(hv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hv.set(n,e)}var fv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Un(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function H0(n){fv=n(fv)}function Pj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(uh(this),e,...t);return $0.set(r,e.sort?e.sort():[e]),Un(r)}:Rj().includes(n)?function(...e){return n.apply(uh(this),e),Un(B0.get(this))}:function(...e){return Un(n.apply(uh(this),e))}}function xj(n){return typeof n=="function"?Pj(n):(n instanceof IDBTransaction&&Nj(n),Sj(n,Aj())?new Proxy(n,fv):n)}function Un(n){if(n instanceof IDBRequest)return Mj(n);if(dv.has(n))return dv.get(n);let e=xj(n);return e!==n&&(dv.set(n,e),pv.set(e,n)),e}var uh=n=>pv.get(n);function z0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Un(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Un(o.result),c.oldVersion,c.newVersion,Un(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Oj=["get","getKey","getAll","getAllKeys","count"],kj=["put","add","delete","clear"],mv=new Map;function q0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mv.get(e))return mv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=kj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Oj.includes(t)))return;let s=function(o,...a){return w(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return mv.set(e,s),s}H0(n=>ne(P({},n),{get:(e,t,r)=>q0(e,t)||n.get(e,t,r),has:(e,t)=>!!q0(e,t)||n.has(e,t)}));var yv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Fj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Fj(n){let e=n.getComponent();return e?.type==="VERSION"}var vv="@firebase/app",G0="0.10.13";var Er=new si("@firebase/app"),Lj="@firebase/app-compat",Vj="@firebase/analytics-compat",Uj="@firebase/analytics",jj="@firebase/app-check-compat",Bj="@firebase/app-check",$j="@firebase/auth",Hj="@firebase/auth-compat",qj="@firebase/database",zj="@firebase/data-connect",Gj="@firebase/database-compat",Wj="@firebase/functions",Kj="@firebase/functions-compat",Qj="@firebase/installations",Yj="@firebase/installations-compat",Zj="@firebase/messaging",Jj="@firebase/messaging-compat",Xj="@firebase/performance",e2="@firebase/performance-compat",t2="@firebase/remote-config",n2="@firebase/remote-config-compat",r2="@firebase/storage",i2="@firebase/storage-compat",s2="@firebase/firestore",o2="@firebase/vertexai-preview",a2="@firebase/firestore-compat",c2="firebase",u2="10.14.1";var _v="[DEFAULT]",l2={[vv]:"fire-core",[Lj]:"fire-core-compat",[Uj]:"fire-analytics",[Vj]:"fire-analytics-compat",[Bj]:"fire-app-check",[jj]:"fire-app-check-compat",[$j]:"fire-auth",[Hj]:"fire-auth-compat",[qj]:"fire-rtdb",[zj]:"fire-data-connect",[Gj]:"fire-rtdb-compat",[Wj]:"fire-fn",[Kj]:"fire-fn-compat",[Qj]:"fire-iid",[Yj]:"fire-iid-compat",[Zj]:"fire-fcm",[Jj]:"fire-fcm-compat",[Xj]:"fire-perf",[e2]:"fire-perf-compat",[t2]:"fire-rc",[n2]:"fire-rc-compat",[r2]:"fire-gcs",[i2]:"fire-gcs-compat",[s2]:"fire-fst",[a2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[c2]:"fire-js-all"};var Cc=new Map,d2=new Map,Iv=new Map;function W0(n,e){try{n.container.addComponent(e)}catch(t){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ai(n){let e=n.name;if(Iv.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Iv.set(e,n);for(let t of Cc.values())W0(t,n);for(let t of d2.values())W0(t,n);return!0}function Ac(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function In(n){return n.settings!==void 0}var h2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new wr("app","Firebase",h2);var wv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}};var ci=u2;function bv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_v,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(t||(t=av()),!t)throw oi.create("no-options");let s=Cc.get(i);if(s){if(Xi(t,s.options)&&Xi(r,s.config))return s;throw oi.create("duplicate-app",{appName:i})}let o=new ch(i);for(let c of Iv.values())o.addComponent(c);let a=new wv(t,r,o);return Cc.set(i,a),a}function ts(n=_v){let e=Cc.get(n);if(!e&&n===_v&&av())return bv();if(!e)throw oi.create("no-app",{appName:n});return e}function Rc(){return Array.from(Cc.values())}function Ze(n,e,t){var r;let i=(r=l2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(a.join(" "));return}ai(new cn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var f2="firebase-heartbeat-database",p2=1,Sc="firebase-heartbeat-store",gv=null;function Z0(){return gv||(gv=z0(f2,p2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Sc)}catch(t){console.warn(t)}}}}).catch(n=>{throw oi.create("idb-open",{originalErrorMessage:n.message})})),gv}function m2(n){return w(this,null,function*(){try{let t=(yield Z0()).transaction(Sc),r=yield t.objectStore(Sc).get(J0(n));return yield t.done,r}catch(e){if(e instanceof zt)Er.warn(e.message);else{let t=oi.create("idb-get",{originalErrorMessage:e?.message});Er.warn(t.message)}}})}function K0(n,e){return w(this,null,function*(){try{let r=(yield Z0()).transaction(Sc,"readwrite");yield r.objectStore(Sc).put(e,J0(n)),yield r.done}catch(t){if(t instanceof zt)Er.warn(t.message);else{let r=oi.create("idb-set",{originalErrorMessage:t?.message});Er.warn(r.message)}}})}function J0(n){return`${n.name}!${n.options.appId}`}var g2=1024,y2=30*24*60*60*1e3,Ev=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Dv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Q0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=y2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Er.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Q0(),{heartbeatsToSend:r,unsentEntries:i}=v2(this._heartbeatsCache.heartbeats),s=bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Er.warn(t),""}})}};function Q0(){return new Date().toISOString().substring(0,10)}function v2(n,e=g2){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Y0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Y0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Dv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return uv()?F0().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield m2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return K0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return K0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Y0(n){return bc(JSON.stringify({version:2,heartbeats:n})).length}function _2(n){ai(new cn("platform-logger",e=>new yv(e),"PRIVATE")),ai(new cn("heartbeat",e=>new Ev(e),"PRIVATE")),Ze(vv,G0,n),Ze(vv,G0,"esm2017"),Ze("fire-js","")}_2("");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eA={};var ui,Tv;(function(){var n;function e(D,v){function _(){}_.prototype=v.prototype,D.D=v.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(b,T,S){for(var I=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)I[Zt-2]=arguments[Zt];return v.prototype[T].apply(b,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,_){_||(_=0);var b=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)b[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;16>T;++T)b[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=D.g[0],_=D.g[1],T=D.g[2];var S=D.g[3],I=v+(S^_&(T^S))+b[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=S+(T^v&(_^T))+b[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=T+(_^S&(v^_))+b[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(v^T&(S^v))+b[3]+3250441966&4294967295,_=T+(I<<22&4294967295|I>>>10),I=v+(S^_&(T^S))+b[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(T^v&(_^T))+b[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=T+(_^S&(v^_))+b[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(v^T&(S^v))+b[7]+4249261313&4294967295,_=T+(I<<22&4294967295|I>>>10),I=v+(S^_&(T^S))+b[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(T^v&(_^T))+b[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=T+(_^S&(v^_))+b[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(v^T&(S^v))+b[11]+2304563134&4294967295,_=T+(I<<22&4294967295|I>>>10),I=v+(S^_&(T^S))+b[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(T^v&(_^T))+b[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=T+(_^S&(v^_))+b[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(v^T&(S^v))+b[15]+1236535329&4294967295,_=T+(I<<22&4294967295|I>>>10),I=v+(T^S&(_^T))+b[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(v^_))+b[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=T+(v^_&(S^v))+b[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(T^S))+b[0]+3921069994&4294967295,_=T+(I<<20&4294967295|I>>>12),I=v+(T^S&(_^T))+b[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(v^_))+b[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=T+(v^_&(S^v))+b[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(T^S))+b[4]+3889429448&4294967295,_=T+(I<<20&4294967295|I>>>12),I=v+(T^S&(_^T))+b[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(v^_))+b[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=T+(v^_&(S^v))+b[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(T^S))+b[8]+1163531501&4294967295,_=T+(I<<20&4294967295|I>>>12),I=v+(T^S&(_^T))+b[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(v^_))+b[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=T+(v^_&(S^v))+b[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(T^S))+b[12]+2368359562&4294967295,_=T+(I<<20&4294967295|I>>>12),I=v+(_^T^S)+b[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^T)+b[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=T+(S^v^_)+b[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^v)+b[14]+4259657740&4294967295,_=T+(I<<23&4294967295|I>>>9),I=v+(_^T^S)+b[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^T)+b[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=T+(S^v^_)+b[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^v)+b[10]+3200236656&4294967295,_=T+(I<<23&4294967295|I>>>9),I=v+(_^T^S)+b[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^T)+b[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=T+(S^v^_)+b[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^v)+b[6]+76029189&4294967295,_=T+(I<<23&4294967295|I>>>9),I=v+(_^T^S)+b[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^T)+b[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=T+(S^v^_)+b[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^v)+b[2]+3299628645&4294967295,_=T+(I<<23&4294967295|I>>>9),I=v+(T^(_|~S))+b[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~T))+b[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=T+(v^(S|~_))+b[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~v))+b[5]+4237533241&4294967295,_=T+(I<<21&4294967295|I>>>11),I=v+(T^(_|~S))+b[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~T))+b[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=T+(v^(S|~_))+b[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~v))+b[1]+2240044497&4294967295,_=T+(I<<21&4294967295|I>>>11),I=v+(T^(_|~S))+b[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~T))+b[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=T+(v^(S|~_))+b[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~v))+b[13]+1309151649&4294967295,_=T+(I<<21&4294967295|I>>>11),I=v+(T^(_|~S))+b[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~T))+b[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=T+(v^(S|~_))+b[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~v))+b[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var _=v-this.blockSize,b=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=_;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(b[T++]=D.charCodeAt(S++),T==this.blockSize){i(this,b),T=0;break}}else for(;S<v;)if(b[T++]=D[S++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var _=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=_&255,_/=256;for(this.u(D),D=Array(16),v=_=0;4>v;++v)for(var b=0;32>b;b+=8)D[_++]=this.g[v]>>>b&255;return D};function s(D,v){var _=a;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=v(D)}function o(D,v){this.h=v;for(var _=[],b=!0,T=D.length-1;0<=T;T--){var S=D[T]|0;b&&S==v||(_[T]=S,b=!1)}this.g=_}var a={};function c(D){return-128<=D&&128>D?s(D,function(v){return new o([v|0],0>v?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var v=[],_=1,b=0;D>=_;b++)v[b]=D/_|0,_*=4294967296;return new o(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return M(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),b=p,T=0;T<D.length;T+=8){var S=Math.min(8,D.length-T),I=parseInt(D.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),b=b.j(S).add(l(I))):(b=b.j(_),b=b.add(l(I)))}return b}var p=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(A(this))return-M(this).m();for(var D=0,v=1,_=0;_<this.g.length;_++){var b=this.i(_);D+=(0<=b?b:4294967296+b)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(A(this))return"-"+M(this).toString(D);for(var v=l(Math.pow(D,6)),_=this,b="";;){var T=G(_,v).g;_=k(_,T.j(v));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=T,E(_))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function A(D){return D.h==-1}n.l=function(D){return D=k(this,D),A(D)?-1:E(D)?0:1};function M(D){for(var v=D.g.length,_=[],b=0;b<v;b++)_[b]=~D.g[b];return new o(_,~D.h).add(g)}n.abs=function(){return A(this)?M(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),_=[],b=0,T=0;T<=v;T++){var S=b+(this.i(T)&65535)+(D.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);b=I>>>16,S&=65535,I&=65535,_[T]=I<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(M(v))}n.j=function(D){if(E(this)||E(D))return p;if(A(this))return A(D)?M(this).j(M(D)):M(M(this).j(D));if(A(D))return M(this.j(M(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,_=[],b=0;b<2*v;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<D.g.length;T++){var S=this.i(b)>>>16,I=this.i(b)&65535,Zt=D.i(T)>>>16,Pr=D.i(T)&65535;_[2*b+2*T]+=I*Pr,V(_,2*b+2*T),_[2*b+2*T+1]+=S*Pr,V(_,2*b+2*T+1),_[2*b+2*T+1]+=I*Zt,V(_,2*b+2*T+1),_[2*b+2*T+2]+=S*Zt,V(_,2*b+2*T+2)}for(b=0;b<v;b++)_[b]=_[2*b+1]<<16|_[2*b];for(b=v;b<2*v;b++)_[b]=0;return new o(_,0)};function V(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function j(D,v){this.g=D,this.h=v}function G(D,v){if(E(v))throw Error("division by zero");if(E(D))return new j(p,p);if(A(D))return v=G(M(D),v),new j(M(v.g),M(v.h));if(A(v))return v=G(D,M(v)),new j(M(v.g),v.h);if(30<D.g.length){if(A(D)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,b=v;0>=b.l(D);)_=Ce(_),b=Ce(b);var T=K(_,1),S=K(b,1);for(b=K(b,2),_=K(_,2);!E(b);){var I=S.add(b);0>=I.l(D)&&(T=T.add(_),S=I),b=K(b,1),_=K(_,1)}return v=k(D,T.j(v)),new j(T,v)}for(T=p;0<=D.l(v);){for(_=Math.max(1,Math.floor(D.m()/v.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=l(_),I=S.j(v);A(I)||0<I.l(D);)_-=b,S=l(_),I=S.j(v);E(S)&&(S=g),T=T.add(S),D=k(D,I)}return new j(T,D)}n.A=function(D){return G(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)&D.i(b);return new o(_,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)|D.i(b);return new o(_,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)^D.i(b);return new o(_,this.h^D.h)};function Ce(D){for(var v=D.g.length+1,_=[],b=0;b<v;b++)_[b]=D.i(b)<<1|D.i(b-1)>>>31;return new o(_,D.h)}function K(D,v){var _=v>>5;v%=32;for(var b=D.g.length-_,T=[],S=0;S<b;S++)T[S]=0<v?D.i(S+_)>>>v|D.i(S+_+1)<<32-v:D.i(S+_);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Tv=eA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,ui=eA.Integer=o}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dr={};var Cv,I2,Po,Sv,Mc,dh,Av,Rv,Mv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var C=u[m];if(!(C in f))break e;f=f[C]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,m=!1,C={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,C,R){for(var L=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)L[Me-2]=arguments[Me];return d.prototype[C].apply(m,L)}}function A(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let C=u.length||0,R=m.length||0;u.length=C+R;for(let L=0;L<R;L++)u[C+L]=m[L]}else u.push(m)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(u){return/^[\s\xa0]*$/.test(u)}function j(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var Ce=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function K(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function D(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)u[f]=m[f];for(let R=0;R<_.length;R++)f=_[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function T(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=ue;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Zt{constructor(){this.h=this.g=null}add(d,f){let m=Pr.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Pr=new k(()=>new B,u=>u.reset());class B{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,ue=new Zt,Ge=()=>{let u=a.Promise.resolve(void 0);z=()=>{u.then(Jt)}};var Jt=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(f){S(f)}var d=Pr;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}W=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function xr(u,d){if(xe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Ce){e:{try{G(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:op[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xr.aa.h.call(this)}}E(xr,xe);var op={2:"touch",3:"pen",4:"mouse"};xr.prototype.h=function(){xr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Jn=0;function xt(u,d,f,m,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++Jn,this.da=this.fa=!1}function Xn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Or(u){this.src=u,this.g={},this.h=0}Or.prototype.add=function(u,d,f,m,C){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var L=cp(u,d,m,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new xt(d,this.src,R,!!m,C),d.fa=f,u.push(d)),d};function ap(u,d){var f=d.type;if(f in u.g){var m=u.g[f],C=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(Xn(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function cp(u,d,f,m){for(var C=0;C<u.length;++C){var R=u[C];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return C}return-1}var up="closure_lm_"+(1e6*Math.random()|0),lp={};function pE(u,d,f,m,C){if(m&&m.once)return gE(u,d,f,m,C);if(Array.isArray(d)){for(var R=0;R<d.length;R++)pE(u,d[R],f,m,C);return null}return f=pp(f),u&&u[Be]?u.K(d,f,l(m)?!!m.capture:!!m,C):mE(u,d,f,!1,m,C)}function mE(u,d,f,m,C,R){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Me=hp(u);if(Me||(u[up]=Me=new Or(u)),f=Me.add(d,f,m,L,R),f.proxy)return f;if(m=GN(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Oe||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),m,C);else if(u.attachEvent)u.attachEvent(vE(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function GN(){function u(f){return d.call(u.src,u.listener,f)}let d=WN;return u}function gE(u,d,f,m,C){if(Array.isArray(d)){for(var R=0;R<d.length;R++)gE(u,d[R],f,m,C);return null}return f=pp(f),u&&u[Be]?u.L(d,f,l(m)?!!m.capture:!!m,C):mE(u,d,f,!0,m,C)}function yE(u,d,f,m,C){if(Array.isArray(d))for(var R=0;R<d.length;R++)yE(u,d[R],f,m,C);else m=l(m)?!!m.capture:!!m,f=pp(f),u&&u[Be]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=cp(R,f,m,C),-1<f&&(Xn(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=hp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=cp(d,f,m,C)),(f=-1<u?d[u]:null)&&dp(f))}function dp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Be])ap(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(vE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=hp(d))?(ap(f,u),f.h==0&&(f.src=null,d[up]=null)):Xn(u)}}}function vE(u){return u in lp?lp[u]:lp[u]="on"+u}function WN(u,d){if(u.da)u=!0;else{d=new xr(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&dp(u),u=f.call(m,d)}return u}function hp(u){return u=u[up],u instanceof Or?u:null}var fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function pp(u){return typeof u=="function"?u:(u[fp]||(u[fp]=function(d){return u.handleEvent(d)}),u[fp])}function yt(){je.call(this),this.i=new Or(this),this.M=this,this.F=null}E(yt,je),yt.prototype[Be]=!0,yt.prototype.removeEventListener=function(u,d,f,m){yE(this,u,d,f,m)};function Ct(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new xe(d,u);else if(d instanceof xe)d.target=d.target||u;else{var C=d;d=new xe(m,u),b(d,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var L=d.g=f[R];C=Ru(L,m,!0,d)&&C}if(L=d.g=u,C=Ru(L,m,!0,d)&&C,C=Ru(L,m,!1,d)&&C,f)for(R=0;R<f.length;R++)L=d.g=f[R],C=Ru(L,m,!1,d)&&C}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)Xn(f[m]);delete u.g[d],u.h--}}this.F=null},yt.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},yt.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function Ru(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,R=0;R<d.length;++R){var L=d[R];if(L&&!L.da&&L.capture==f){var Me=L.listener,dt=L.ha||L.src;L.fa&&ap(u.i,L),C=Me.call(dt,m)!==!1&&C}}return C&&!m.defaultPrevented}function _E(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function IE(u){u.g=_E(()=>{u.g=null,u.i&&(u.i=!1,IE(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class KN extends je{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:IE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fa(u){je.call(this),this.h=u,this.g={}}E(fa,je);var wE=[];function EE(u){K(u.g,function(d,f){this.g.hasOwnProperty(f)&&dp(d)},u),u.g={}}fa.prototype.N=function(){fa.aa.N.call(this),EE(this)},fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mp=a.JSON.stringify,QN=a.JSON.parse,YN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gp(){}gp.prototype.h=null;function DE(u){return u.h||(u.h=u.i())}function bE(){}var pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yp(){xe.call(this,"d")}E(yp,xe);function vp(){xe.call(this,"c")}E(vp,xe);var wi={},TE=null;function Mu(){return TE=TE||new yt}wi.La="serverreachability";function CE(u){xe.call(this,wi.La,u)}E(CE,xe);function ma(u){let d=Mu();Ct(d,new CE(d))}wi.STAT_EVENT="statevent";function SE(u,d){xe.call(this,wi.STAT_EVENT,u),this.stat=d}E(SE,xe);function St(u){let d=Mu();Ct(d,new SE(d,u))}wi.Ma="timingevent";function AE(u,d){xe.call(this,wi.Ma,u),this.size=d}E(AE,xe);function ga(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ya(){this.g=!0}ya.prototype.xa=function(){this.g=!1};function ZN(u,d,f,m,C,R){u.info(function(){if(u.g)if(R)for(var L="",Me=R.split("&"),dt=0;dt<Me.length;dt++){var Ee=Me[dt].split("=");if(1<Ee.length){var vt=Ee[0];Ee=Ee[1];var _t=vt.split("_");L=2<=_t.length&&_t[1]=="type"?L+(vt+"="+Ee+"&"):L+(vt+"=redacted&")}}else L=null;else L=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function JN(u,d,f,m,C,R,L){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+R+" "+L})}function Ss(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+eP(u,f)+(m?" "+m:"")})}function XN(u,d){u.info(function(){return"TIMEOUT: "+d})}ya.prototype.info=function(){};function eP(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return mp(f)}catch{return d}}var Nu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},RE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_p;function Pu(){}E(Pu,gp),Pu.prototype.g=function(){return new XMLHttpRequest},Pu.prototype.i=function(){return{}},_p=new Pu;function kr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new fa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ME}function ME(){this.i=null,this.g="",this.h=!1}var NE={},Ip={};function wp(u,d,f){u.L=1,u.v=Fu(er(d)),u.m=f,u.P=!0,PE(u,null)}function PE(u,d){u.F=Date.now(),xu(u),u.A=er(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),GE(f.i,"t",m),u.C=0,f=u.j.J,u.h=new ME,u.g=lD(u.j,f?d:null,!u.m),0<u.O&&(u.M=new KN(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(wE[0]=C.toString()),C=wE);for(var R=0;R<C.length;R++){var L=pE(f,C[R],m||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),ma(),ZN(u.i,u.u,u.A,u.l,u.R,u.m)}kr.prototype.ca=function(u){u=u.target;let d=this.M;d&&tr(u)==3?d.j():this.Y(u)},kr.prototype.Y=function(u){try{if(u==this.g)e:{let _t=tr(this.g);var d=this.g.Ba();let Ms=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||XE(this.g)))){this.J||_t!=4||d==7||(d==8||0>=Ms?ma(3):ma(2)),Ep(this);var f=this.g.Z();this.X=f;t:if(xE(this)){var m=XE(this.g);u="";var C=m.length,R=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ei(this),va(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==C-1)});m.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,JN(this.i,this.u,this.A,this.l,this.R,_t,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,dt=this.g;if((Me=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Me)){var Ee=Me;break t}}Ee=null}if(f=Ee)Ss(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,f);else{this.o=!1,this.s=3,St(12),Ei(this),va(this);break e}}if(this.P){f=!0;let dn;for(;!this.J&&this.C<L.length;)if(dn=tP(this,L),dn==Ip){_t==4&&(this.s=4,St(14),f=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==NE){this.s=4,St(15),Ss(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Ss(this.i,this.l,dn,null),Dp(this,dn);if(xE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||L.length!=0||this.h.h||(this.s=1,St(16),f=!1),this.o=this.o&&f,!f)Ss(this.i,this.l,L,"[Invalid Chunked Response]"),Ei(this),va(this);else if(0<L.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Rp(vt),vt.M=!0,St(11))}}else Ss(this.i,this.l,L,null),Dp(this,L);_t==4&&Ei(this),this.o&&!this.J&&(_t==4?oD(this.j,this):(this.o=!1,xu(this)))}else vP(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Ei(this),va(this)}}}catch{}finally{}};function xE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function tP(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?Ip:(f=Number(d.substring(f,m)),isNaN(f)?NE:(m+=1,m+f>d.length?Ip:(d=d.slice(m,m+f),u.C=m+f,d)))}kr.prototype.cancel=function(){this.J=!0,Ei(this)};function xu(u){u.S=Date.now()+u.I,OE(u,u.I)}function OE(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ga(g(u.ba,u),d)}function Ep(u){u.B&&(a.clearTimeout(u.B),u.B=null)}kr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(XN(this.i,this.A),this.L!=2&&(ma(),St(17)),Ei(this),this.s=2,va(this)):OE(this,this.S-u)};function va(u){u.j.G==0||u.J||oD(u.j,u)}function Ei(u){Ep(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,EE(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Dp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||bp(f.h,u))){if(!u.K&&bp(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Bu(f),Uu(f);else break e;Ap(f),St(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ga(g(f.Za,f),6e3));if(1>=LE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bi(f,11)}else if((u.K||f.g==u)&&Bu(f),!V(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ee=C[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let vt=Ee[3];vt!=null&&(f.la=vt,f.j.info("VER="+f.la));let _t=Ee[4];_t!=null&&(f.Aa=_t,f.j.info("SVER="+f.Aa));let Ms=Ee[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(m=1.5*Ms,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let dn=u.g;if(dn){let Hu=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var R=m.h;R.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Tp(R,R.h),R.h=null))}if(m.D){let Mp=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mp&&(m.ya=Mp,ke(m.I,m.D,Mp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=u;if(m.qa=uD(m,m.J?m.ia:null,m.W),L.K){VE(m.h,L);var Me=L,dt=m.L;dt&&(Me.I=dt),Me.B&&(Ep(Me),xu(Me)),m.g=L}else iD(m);0<f.i.length&&ju(f)}else Ee[0]!="stop"&&Ee[0]!="close"||bi(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?bi(f,7):Sp(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}ma(4)}catch{}}var nP=class{constructor(u,d){this.g=u,this.map=d}};function kE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function FE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function LE(u){return u.h?1:u.g?u.g.size:0}function bp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Tp(u,d){u.g?u.g.add(d):u.h=d}function VE(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}kE.prototype.cancel=function(){if(this.i=UE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function UE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return A(u.i)}function rP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function iP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function jE(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=iP(u),m=rP(u),C=m.length,R=0;R<C;R++)d.call(void 0,m[R],f&&f[R],u)}var BE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sP(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),C=null;if(0<=m){var R=u[f].substring(0,m);C=u[f].substring(m+1)}else R=u[f];d(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Di(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Di){this.h=u.h,Ou(this,u.j),this.o=u.o,this.g=u.g,ku(this,u.s),this.l=u.l;var d=u.i,f=new wa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),$E(this,f),this.m=u.m}else u&&(d=String(u).match(BE))?(this.h=!1,Ou(this,d[1]||"",!0),this.o=_a(d[2]||""),this.g=_a(d[3]||"",!0),ku(this,d[4]),this.l=_a(d[5]||"",!0),$E(this,d[6]||"",!0),this.m=_a(d[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}Di.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ia(d,HE,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ia(d,HE,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ia(f,f.charAt(0)=="/"?cP:aP,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ia(f,lP)),u.join("")};function er(u){return new Di(u)}function Ou(u,d,f){u.j=f?_a(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function ku(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function $E(u,d,f){d instanceof wa?(u.i=d,dP(u.i,u.h)):(f||(d=Ia(d,uP)),u.i=new wa(d,u.h))}function ke(u,d,f){u.i.set(d,f)}function Fu(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function _a(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ia(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,oP),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function oP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var HE=/[#\/\?@]/g,aP=/[#\?:]/g,cP=/[#\?]/g,uP=/[#\?@]/g,lP=/#/g;function wa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Fr(u){u.g||(u.g=new Map,u.h=0,u.i&&sP(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=wa.prototype,n.add=function(u,d){Fr(this),this.i=null,u=As(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function qE(u,d){Fr(u),d=As(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function zE(u,d){return Fr(u),d=As(u,d),u.g.has(d)}n.forEach=function(u,d){Fr(this),this.g.forEach(function(f,m){f.forEach(function(C){u.call(d,C,m,this)},this)},this)},n.na=function(){Fr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=u[m];for(let R=0;R<C.length;R++)f.push(d[m])}return f},n.V=function(u){Fr(this);let d=[];if(typeof u=="string")zE(this,u)&&(d=d.concat(this.g.get(As(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Fr(this),this.i=null,u=As(this,u),zE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function GE(u,d,f){qE(u,d),0<f.length&&(u.i=null,u.g.set(As(u,d),A(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=R;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),u.push(C)}}return this.i=u.join("&")};function As(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function dP(u,d){d&&!u.j&&(Fr(u),u.i=null,u.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(qE(this,m),GE(this,C,f))},u)),u.j=d}function hP(u,d){let f=new ya;if(a.Image){let m=new Image;m.onload=y(Lr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Lr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Lr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Lr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function fP(u,d){let f=new ya,m=new AbortController,C=setTimeout(()=>{m.abort(),Lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?Lr(f,"TestPingServer: ok",!0,d):Lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Lr(f,"TestPingServer: error",!1,d)})}function Lr(u,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function pP(){this.g=new YN}function mP(u,d,f){let m=f||"";try{jE(u,function(C,R){let L=C;l(C)&&(L=mp(C)),d.push(m+R+"="+encodeURIComponent(L))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ea(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Ea,gp),Ea.prototype.g=function(){return new Lu(this.l,this.j)},Ea.prototype.i=function(u){return function(){return u}}({});function Lu(u,d){yt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Lu,yt),n=Lu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ba(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;WE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function WE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Da(this):ba(this),this.readyState==3&&WE(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Da(this))},n.Qa=function(u){this.g&&(this.response=u,Da(this))},n.ga=function(){this.g&&Da(this)};function Da(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ba(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ba(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function KE(u){let d="";return K(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Cp(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=KE(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):ke(u,d,f))}function $e(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E($e,yt);var gP=/^https?$/i,yP=["POST","PUT"];n=$e.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_p.g(),this.v=this.o?DE(this.o):DE(_p),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){QE(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yP,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,L]of f)this.g.setRequestHeader(R,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{JE(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){QE(this,R)}};function QE(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,YE(u),Vu(u)}function YE(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ct(this,"complete"),Ct(this,"abort"),Vu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vu(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ZE(this):this.bb())},n.bb=function(){ZE(this)};function ZE(u){if(u.h&&typeof o<"u"&&(!u.v[1]||tr(u)!=4||u.Z()!=2)){if(u.u&&tr(u)==4)_E(u.Ea,0,u);else if(Ct(u,"readystatechange"),tr(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=L===0){var C=String(u.D).match(BE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!gP.test(C?C.toLowerCase():"")}f=m}if(f)Ct(u,"complete"),Ct(u,"success");else{u.m=6;try{var R=2<tr(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",YE(u)}}finally{Vu(u)}}}}function Vu(u,d){if(u.g){JE(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ct(u,"ready");try{f.onreadystatechange=m}catch{}}}function JE(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),QN(d)}};function XE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vP(u){let d={};u=(u.g&&2<=tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(V(u[m]))continue;var f=T(u[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[C]||[];d[C]=R,R.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function eD(u){this.Aa=0,this.i=[],this.j=new ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,u),this.cb=Ta("retryDelaySeedMs",1e4,u),this.Wa=Ta("forwardChannelMaxRetries",2,u),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kE(u&&u.concurrentRequestLimit),this.Da=new pP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=eD.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,m){St(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=uD(this,null,this.W),ju(this)};function Sp(u){if(tD(u),u.G==3){var d=u.U++,f=er(u.I);if(ke(f,"SID",u.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),Ca(u,f),d=new kr(u,u.j,d),d.L=2,d.v=Fu(er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=lD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xu(d)}cD(u)}function Uu(u){u.g&&(Rp(u),u.g.cancel(),u.g=null)}function tD(u){Uu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Bu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ju(u){if(!FE(u.h)&&!u.s){u.s=!0;var d=u.Ga;z||Ge(),W||(z(),W=!0),ue.add(d,u),u.B=0}}function _P(u,d){return LE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ga(g(u.Ga,u,d),aD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new kr(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),b(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=rD(this,C,d),f=er(this.I),ke(f,"RID",u),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),Ca(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(KE(R)))+"&"+d:this.m&&Cp(f,this.m,R)),Tp(this.h,C),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),C.T=!0,wp(C,f,null)):wp(C,f,d),this.G=2}}else this.G==3&&(u?nD(this,u):this.i.length==0||FE(this.h)||nD(this))};function nD(u,d){var f;d?f=d.l:f=u.U++;let m=er(u.I);ke(m,"SID",u.K),ke(m,"RID",f),ke(m,"AID",u.T),Ca(u,m),u.m&&u.o&&Cp(m,u.m,u.o),f=new kr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=rD(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tp(u.h,f),wp(f,m,d)}function Ca(u,d){u.H&&K(u.H,function(f,m){ke(d,m,f)}),u.l&&jE({},function(f,m){ke(d,m,f)})}function rD(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let R=-1;for(;;){let L=["count="+f];R==-1?0<f?(R=C[0].g,L.push("ofs="+R)):R=0:L.push("ofs="+R);let Me=!0;for(let dt=0;dt<f;dt++){let Ee=C[dt].g,vt=C[dt].map;if(Ee-=R,0>Ee)R=Math.max(0,C[dt].g-100),Me=!1;else try{mP(vt,L,"req"+Ee+"_")}catch{m&&m(vt)}}if(Me){m=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function iD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;z||Ge(),W||(z(),W=!0),ue.add(d,u),u.v=0}}function Ap(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ga(g(u.Fa,u),aD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,sD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ga(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Uu(this),sD(this))};function Rp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function sD(u){u.g=new kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=er(u.qa);ke(d,"RID","rpc"),ke(d,"SID",u.K),ke(d,"AID",u.T),ke(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(d,"TO",u.ja),ke(d,"TYPE","xmlhttp"),Ca(u,d),u.m&&u.o&&Cp(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Fu(er(d)),f.m=null,f.P=!0,PE(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Uu(this),Ap(this),St(19))};function Bu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function oD(u,d){var f=null;if(u.g==d){Bu(u),Rp(u),u.g=null;var m=2}else if(bp(u.h,d))f=d.D,VE(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;m=Mu(),Ct(m,new AE(m,f)),ju(u)}else iD(u);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&_P(u,d)||m==2&&Ap(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:bi(u,5);break;case 4:bi(u,10);break;case 3:bi(u,6);break;default:bi(u,2)}}}function aD(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function bi(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let C=!m;m=new Di(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ou(m,"https"),Fu(m),C?hP(m.toString(),f):fP(m.toString(),f)}else St(2);u.G=0,u.l&&u.l.sa(d),cD(u),tD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function cD(u){if(u.G=0,u.ka=[],u.l){let d=UE(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function uD(u,d,f){var m=f instanceof Di?er(f):new Di(f);if(m.g!="")d&&(m.g=d+"."+m.g),ku(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var R=new Di(null);m&&Ou(R,m),d&&(R.g=d),C&&ku(R,C),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&ke(m,f,d),ke(m,"VER",u.la),Ca(u,m),m}function lD(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new $e(new Ea({eb:f})):new $e(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dD(){}n=dD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $u(){}$u.prototype.g=function(u,d){return new Ft(u,d)};function Ft(u,d){yt.call(this),this.g=new eD(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!V(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Rs(this)}E(Ft,yt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Sp(this.g)},Ft.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=mp(u),u=f);d.i.push(new nP(d.Ya++,u)),d.G==3&&ju(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Sp(this.g),delete this.g,Ft.aa.N.call(this)};function hD(u){yp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(hD,yp);function fD(){vp.call(this),this.status=1}E(fD,vp);function Rs(u){this.g=u}E(Rs,dD),Rs.prototype.ua=function(){Ct(this.g,"a")},Rs.prototype.ta=function(u){Ct(this.g,new hD(u))},Rs.prototype.sa=function(u){Ct(this.g,new fD)},Rs.prototype.ra=function(){Ct(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Mv=Dr.createWebChannelTransport=function(){return new $u},Rv=Dr.getStatEventTarget=function(){return Mu()},Av=Dr.Event=wi,dh=Dr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nu.NO_ERROR=0,Nu.TIMEOUT=8,Nu.HTTP_ERROR=6,Mc=Dr.ErrorCode=Nu,RE.COMPLETE="complete",Sv=Dr.EventType=RE,bE.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Po=Dr.WebChannel=bE,I2=Dr.FetchXmlHttpFactory=Ea,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Cv=Dr.XhrIo=$e}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});var tA="@firebase/firestore";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var Jo="10.14.0";var is=new si("@firebase/firestore");function Nc(){return is.logLevel}function q(n,...e){if(is.logLevel<=me.DEBUG){let t=e.map(yI);is.debug(`Firestore (${Jo}): ${n}`,...t)}}function br(n,...e){if(is.logLevel<=me.ERROR){let t=e.map(yI);is.error(`Firestore (${Jo}): ${n}`,...t)}}function Vo(n,...e){if(is.logLevel<=me.WARN){let t=e.map(yI);is.warn(`Firestore (${Jo}): ${n}`,...t)}}function yI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n="Unexpected state"){let e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function Ae(n,e){n||X()}function te(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lt.UNAUTHENTICATED))}shutdown(){}},Fv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lv=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>w(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new lt(e)}},Vv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Vv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ae(this.o===void 0);let r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function w2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=w2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function Uo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},et=class n extends vh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},E2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wt=class n extends vh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return E2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Q(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(et.fromString(e))}static fromName(e){return new n(et.fromString(e).popFirst(5))}static empty(){return new n(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new et(e.slice()))}};var $v=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$v.UNKNOWN_ID=-1;function D2(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new ss(i,Y.empty(),e)}function b2(n){return new ss(n.readTime,n.key,-1)}var ss=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),Y.empty(),-1)}static max(){return new n(ie.max(),Y.empty(),-1)}};function T2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var C2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qc(n){return w(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==C2)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function S2(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yc(n){return n.name==="IndexedDbTransactionError"}var NA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Gh(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function A2(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var R2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZQ=[...R2,"documentOverlays"],M2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],N2=M2,P2=[...N2,"indexConfiguration","indexState","indexEntries"];var JQ=[...P2,"globals"];function nA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ze=class n{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}},Fo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$n=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var bt=class n{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _h(this.data.getIterator())}getIteratorFrom(e){return new _h(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_h=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var un=class n{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new bt(Wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ih=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ih("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var x2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(n){if(Ae(!!n),typeof n=="string"){let e=0,t=x2.exec(n);if(Ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function di(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}function vI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function _I(n){let e=n.mapValue.fields.__previous_value__;return vI(e)?_I(e):e}function Vc(n){let e=Tr(n.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var qv=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},wh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var hh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vI(n)?4:OA(n)?9007199254740991:xA(n)?10:11:X()}function zn(n,e){if(n===e)return!0;let t=os(n);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vc(n).isEqual(Vc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Tr(i.timestampValue),a=Tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return di(i.bytesValue).isEqual(di(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Le(i.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Le(i.integerValue)===Le(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Le(i.doubleValue),a=Le(s.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Uo(n.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(nA(o)!==nA(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!zn(o[c],a[c])))return!1;return!0}(n,e);default:return X()}}function Uc(n,e){return(n.values||[]).find(t=>zn(t,e))!==void 0}function jo(n,e){if(n===e)return 0;let t=os(n),r=os(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Le(s.integerValue||s.doubleValue),c=Le(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return rA(n.timestampValue,e.timestampValue);case 4:return rA(Vc(n),Vc(e));case 5:return De(n.stringValue,e.stringValue);case 6:return function(s,o){let a=di(s),c=di(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=De(a[l],c[l]);if(h!==0)return h}return De(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=De(Le(s.latitude),Le(o.latitude));return a!==0?a:De(Le(s.longitude),Le(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return iA(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,A=De(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=E?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:iA(y,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===hh.mapValue&&o===hh.mapValue)return 0;if(s===hh.mapValue)return 1;if(o===hh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=De(c[p],h[p]);if(g!==0)return g;let y=jo(a[c[p]],l[h[p]]);if(y!==0)return y}return De(c.length,h.length)}(n.mapValue,e.mapValue);default:throw X()}}function rA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=Tr(n),r=Tr(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function iA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=jo(t[i],r[i]);if(s)return s}return De(t.length,r.length)}function Bo(n){return zv(n)}function zv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Tr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return di(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=zv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${zv(t.fields[o])}`;return i+"}"}(n.mapValue):X()}function Gv(n){return!!n&&"integerValue"in n}function II(n){return!!n&&"arrayValue"in n}function sA(n){return!!n&&"nullValue"in n}function oA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function xA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return hs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Gt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(t)}setAll(e){let t=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=xc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hs(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(xc(this.value))}};function kA(n){let e=[];return hs(n.fields,(t,r)=>{let i=new Wt([t]);if(ph(r)){let s=kA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new un(e)}var wn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),Gt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),Gt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),Gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $o=class{constructor(e,t){this.position=e,this.inclusive=t}};function aA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),t.key):r=jo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zn(n.position[t],e.position[t]))return!1;return!0}var Ho=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function O2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Eh=class{},at=class n extends Eh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kv(e,t,r):t==="array-contains"?new Zv(e,r):t==="in"?new Jv(e,r):t==="not-in"?new Xv(e,r):t==="array-contains-any"?new e_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Qv(e,r):new Yv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jo(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gn=class n extends Eh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return FA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function FA(n){return n.op==="and"}function LA(n){return k2(n)&&FA(n)}function k2(n){for(let e of n.filters)if(e instanceof Gn)return!1;return!0}function Wv(n){if(n instanceof at)return n.field.canonicalString()+n.op.toString()+Bo(n.value);if(LA(n))return n.filters.map(e=>Wv(e)).join(",");{let e=n.filters.map(t=>Wv(t)).join(",");return`${n.op}(${e})`}}function VA(n,e){return n instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(n,e):n instanceof Gn?function(r,i){return i instanceof Gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VA(o,i.filters[a]),!0):!1}(n,e):void X()}function UA(n){return n instanceof at?function(t){return`${t.field.canonicalString()} ${t.op} ${Bo(t.value)}`}(n):n instanceof Gn?function(t){return t.op.toString()+" {"+t.getFilters().map(UA).join(" ,")+"}"}(n):"Filter"}var Kv=class extends at{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},Qv=class extends at{constructor(e,t){super(e,"in",t),this.keys=jA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Yv=class extends at{constructor(e,t){super(e,"not-in",t),this.keys=jA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function jA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var Zv=class extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return II(t)&&Uc(t.arrayValue,this.value)}},Jv=class extends at{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}},Xv=class extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Uc(this.value.arrayValue,t)}},e_=class extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!II(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uc(this.value.arrayValue,r))}};var t_=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function uA(n,e=null,t=[],r=[],i=null,s=null,o=null){return new t_(n,e,t,r,i,s,o)}function wI(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=t}return e.ue}function EI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cA(n.startAt,e.startAt)&&cA(n.endAt,e.endAt)}function n_(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function F2(n,e,t,r,i,s,o,a){return new qo(n,e,t,r,i,s,o,a)}function DI(n){return new qo(n)}function lA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function L2(n){return n.collectionGroup!==null}function Oc(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(Wt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ho(s,r))}),t.has(Wt.keyField().canonicalString())||e.ce.push(new Ho(Wt.keyField(),r))}return e.ce}function Hn(n){let e=te(n);return e.le||(e.le=V2(e,Oc(n))),e.le}function V2(n,e){if(n.limitType==="F")return uA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ho(i.field,s)});let t=n.endAt?new $o(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $o(n.startAt.position,n.startAt.inclusive):null;return uA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function r_(n,e,t){return new qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wh(n,e){return EI(Hn(n),Hn(e))&&n.limitType===e.limitType}function BA(n){return`${wI(Hn(n))}|lt:${n.limitType}`}function xo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UA(i)).join(", ")}]`),Gh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(Hn(n))}; limitType=${n.limitType})`}function Kh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Oc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=aA(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Oc(r),i)||r.endAt&&!function(o,a,c){let l=aA(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Oc(r),i))}(n,e)}function U2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $A(n){return(e,t)=>{let r=!1;for(let i of Oc(n)){let s=j2(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function j2(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?jo(c,l):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var hi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return PA(this.inner)}size(){return this.innerSize}};var B2=new ze(Y.comparator);function Cr(){return B2}var HA=new ze(Y.comparator);function Pc(...n){let e=HA;for(let t of n)e=e.insert(t.key,t);return e}function qA(n){let e=HA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ns(){return kc()}function zA(){return kc()}function kc(){return new hi(n=>n.toString(),(n,e)=>n.isEqual(e))}var $2=new ze(Y.comparator),H2=new bt(Y.comparator);function ge(...n){let e=H2;for(let t of n)e=e.add(t);return e}var q2=new bt(De);function z2(){return q2}function bI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function GA(n){return{integerValue:""+n}}function G2(n,e){return A2(e)?GA(e):bI(n,e)}var zo=class{constructor(){this._=void 0}};function W2(n,e,t){return n instanceof as?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vI(s)&&(s=_I(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof cs?KA(n,e):n instanceof us?QA(n,e):function(i,s){let o=WA(i,s),a=dA(o)+dA(i.Pe);return Gv(o)&&Gv(i.Pe)?GA(a):bI(i.serializer,a)}(n,e)}function K2(n,e,t){return n instanceof cs?KA(n,e):n instanceof us?QA(n,e):t}function WA(n,e){return n instanceof Go?function(r){return Gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var as=class extends zo{},cs=class extends zo{constructor(e){super(),this.elements=e}};function KA(n,e){let t=YA(e);for(let r of n.elements)t.some(i=>zn(i,r))||t.push(r);return{arrayValue:{values:t}}}var us=class extends zo{constructor(e){super(),this.elements=e}};function QA(n,e){let t=YA(e);for(let r of n.elements)t=t.filter(i=>!zn(i,r));return{arrayValue:{values:t}}}var Go=class extends zo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function dA(n){return Le(n.integerValue||n.doubleValue)}function YA(n){return II(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var i_=class{constructor(e,t){this.field=e,this.transform=t}};function Q2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof cs&&i instanceof cs||r instanceof us&&i instanceof us?Uo(r.elements,i.elements,zn):r instanceof Go&&i instanceof Go?zn(r.Pe,i.Pe):r instanceof as&&i instanceof as}(n.transform,e.transform)}var s_=class{constructor(e,t){this.version=e,this.transformResults=t}},li=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Wo=class{};function ZA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dh(n.key,li.none()):new ls(n.key,n.data,li.none());{let t=n.data,r=Gt.empty(),i=new bt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wn(n.key,r,new un(i.toArray()),li.none())}}function Y2(n,e,t){n instanceof ls?function(i,s,o){let a=i.value.clone(),c=fA(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Wn?function(i,s,o){if(!mh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=fA(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(JA(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Fc(n,e,t,r){return n instanceof ls?function(s,o,a,c){if(!mh(s.precondition,o))return a;let l=s.value.clone(),h=pA(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wn?function(s,o,a,c){if(!mh(s.precondition,o))return a;let l=pA(s.fieldTransforms,c,o),h=o.data;return h.setAll(JA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return mh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Z2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=WA(r.transform,i||null);s!=null&&(t===null&&(t=Gt.empty()),t.set(r.field,s))}return t||null}function hA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Uo(r,i,(s,o)=>Q2(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ls=class extends Wo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wn=class extends Wo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function JA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function fA(n,e,t){let r=new Map;Ae(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K2(o,a,t[i]))}return r}function pA(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,W2(s,o,e))}return r}var Dh=class extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},o_=class extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var a_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Y2(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=zA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=ZA(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(t,r)=>hA(t,r))&&Uo(this.baseMutations,e.baseMutations,(t,r)=>hA(t,r))}},c_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length);let i=function(){return $2}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var u_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var l_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,_e;function J2(n){switch(n){default:return X();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function XA(n){if(n===void 0)return br("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return X()}}(_e=Je||(Je={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var mA=null;function X2(){return new TextEncoder}var eB=new ui([4294967295,4294967295],0);function gA(n){let e=X2().encode(n),t=new Tv;return t.update(e),new Uint8Array(t.digest())}function yA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ui([t,r],0),new ui([i,s],0)]}var d_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rs(`Invalid padding: ${t}`);if(r<0)throw new rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ui.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ui.fromNumber(r)));return i.compare(eB)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=gA(e),[r,i]=yA(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=gA(e),[r,i]=yA(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},rs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new ze(De),Cr(),ge())}},jc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var Lo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Th=class{constructor(e,t){this.targetId=e,this.me=t}},Ch=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sh=class{constructor(){this.fe=0,this.ge=_A(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new jc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=_A()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},h_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=vA(),this.Qe=new ze(De)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(n_(s))if(r===0){let o=new Y(s.path);this.Ue(t,o,wn.newNoDocument(o,ie.min()))}else Ae(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}mA?.et(function(h,p,g,y,E){var A,M,k,V,j,G;let Ce={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},K=p.unchangedNames;return K&&(Ce.bloomFilter={applied:E===0,hashCount:(A=K?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(V=(k=(M=K?.bits)===null||M===void 0?void 0:M.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(G=(j=K?.bits)===null||j===void 0?void 0:j.padding)!==null&&G!==void 0?G:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Ce}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=di(r).toUint8Array()}catch(c){if(c instanceof Ih)return Vo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new d_(o,i,s)}catch(c){return Vo(c instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&n_(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,wn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new bh(e,t,this.Qe,this.ke,r);return this.ke=Cr(),this.qe=vA(),this.Qe=new ze(De),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Sh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new bt(De),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function vA(){return new ze(Y.comparator)}function _A(){return new ze(Y.comparator)}var tB={asc:"ASCENDING",desc:"DESCENDING"},nB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rB={and:"AND",or:"OR"},f_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function p_(n,e){return n.useProto3Json||Gh(e)?e:{value:e}}function Ah(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iB(n,e){return Ah(n,e.toTimestamp())}function qn(n){return Ae(!!n),ie.fromTimestamp(function(t){let r=Tr(t);return new gt(r.seconds,r.nanos)}(n))}function TI(n,e){return m_(n,e).canonicalString()}function m_(n,e){let t=function(i){return new et(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function tR(n){let e=et.fromString(n);return Ae(oR(e)),e}function g_(n,e){return TI(n.databaseId,e.path)}function Nv(n,e){let t=tR(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(rR(t))}function nR(n,e){return TI(n.databaseId,e)}function sB(n){let e=tR(n);return e.length===4?et.emptyPath():rR(e)}function y_(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rR(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function IA(n,e,t){return{name:g_(n,e),fields:t.value.mapValue.fields}}function oB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(h===void 0||typeof h=="string"),Tt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Tt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:XA(l.code);return new Q(h,l.message||"")}(o);t=new Ch(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nv(n,r.document.name),s=qn(r.document.updateTime),o=r.document.createTime?qn(r.document.createTime):ie.min(),a=new Gt({mapValue:{fields:r.document.fields}}),c=wn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Lo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nv(n,r.document),s=r.readTime?qn(r.readTime):ie.min(),o=wn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Lo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nv(n,r.document),s=r.removedTargetIds||[];t=new Lo([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new l_(i,s),a=r.targetId;t=new Th(a,o)}}return t}function aB(n,e){let t;if(e instanceof ls)t={update:IA(n,e.key,e.value)};else if(e instanceof Dh)t={delete:g_(n,e.key)};else if(e instanceof Wn)t={update:IA(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof o_))return X();t={verify:g_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof as)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof us)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Go)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(n,e.precondition)),t}function cB(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?qn(i.updateTime):qn(s);return o.isEqual(ie.min())&&(o=qn(s)),new s_(o,i.transformResults||[])}(t,e))):[]}function uB(n,e){return{documents:[nR(n,e.path)]}}function lB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nR(n,i);let s=function(l){if(l.length!==0)return sR(Gn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Oo(g.field),direction:fB(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=p_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function dB(n){let e=sB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ae(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let g=iR(p);return g instanceof Gn&&LA(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(E){return new Ho(ko(E.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Gh(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new $o(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new $o(y,g)}(t.endAt)),F2(e,i,o,s,a,"F",c,l)}function hB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ko(t.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ko(t.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ko(t.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ko(t.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return at.create(ko(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Gn.create(t.compositeFilter.filters.map(r=>iR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function fB(n){return tB[n]}function pB(n){return nB[n]}function mB(n){return rB[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function ko(n){return Wt.fromServerFormat(n.fieldPath)}function sR(n){return n instanceof at?function(t){if(t.op==="=="){if(oA(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(sA(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oA(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(sA(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:pB(t.op),value:t.value}}}(n):n instanceof Gn?function(t){let r=t.getFilters().map(i=>sR(i));return r.length===1?r[0]:{compositeFilter:{op:mB(t.op),filters:r}}}(n):X()}function gB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bc=class n{constructor(e,t,r,i,s=ie.min(),o=ie.min(),a=Tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var v_=class{constructor(e){this.ct=e}};function yB(n){let e=dB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?r_(e,e.limit,"L"):e}var Rh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Lc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Tr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(di(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?OA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):xA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):X()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Le(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Y.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Rh.vt=new Rh;var __=class{constructor(){this.un=new I_}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(ss.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},I_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bt(et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(et.comparator)).toArray()}};var e7=new Uint8Array(0);var jn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(41943040,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);var $c=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var w_=class{constructor(){this.changes=new hi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var E_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var D_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fc(r.mutation,i,un.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=ns();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Pc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ns();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Cr(),o=kc(),a=function(){return kc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Wn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Fc(h.mutation,l,h.mutation.getFieldMask(),gt.now())):o.set(l.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new E_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kc(),i=new ze((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||un.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=zA();h.forEach(g=>{if(!s.has(g)){let y=ZA(t.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):F.resolve(ns()),a=-1,c=s;return o.next(l=>F.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ge())).next(h=>({batchId:a,changes:qA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=Pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Pc();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,c=>{let l=function(p,g){return new qo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,wn.newInvalidDocument(h)))});let a=Pc();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Fc(h.mutation,l,un.empty(),gt.now()),Kh(t,l)&&(a=a.insert(c,l))}),a})}};var b_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:yB(i.bundledQuery),readTime:qn(i.readTime)}}(t)),F.resolve()}};var T_=class{constructor(){this.overlays=new ze(Y.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ns();return F.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=ns(),s=t.length+1,o=new Y(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ze((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ns(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ns(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return F.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new u_(t,r));let s=this.Ir.get(t);s===void 0&&(s=ge(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var C_=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Hc=class{constructor(){this.Tr=new bt(Xe.Er),this.dr=new bt(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Y(new et([])),r=new Xe(t,e),i=new Xe(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Y(new et([])),r=new Xe(t,e),i=new Xe(t,e+1),s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Y.comparator(e.key,t.key)||De(e.wr,t.wr)}static Ar(e,t){return De(e.wr,t.wr)||Y.comparator(e.key,t.key)}};var S_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new bt(Xe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new a_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Xe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(De);return t.forEach(i=>{let s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new Xe(new Y(s),0),a=new bt(De);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(t.mutations,i=>{let s=new Xe(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var A_=class{constructor(e){this.Mr=e,this.docs=function(){return new ze(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Cr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wn.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Cr(),o=t.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||T2(b2(h),r)<=0||(i.has(h.key)||Kh(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}Or(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new R_(this)}getSize(e){return F.resolve(this.size)}},R_=class extends w_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var M_=class{constructor(e){this.persistence=e,this.Nr=new hi(t=>wI(t),EI),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hc,this.targetCount=0,this.kr=$c.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new $c(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var N_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new NA(0),this.Kr=!1,this.Kr=!0,this.$r=new C_,this.referenceDelegate=e(this),this.Ur=new M_(this),this.indexManager=new __,this.remoteDocumentCache=function(i){return new A_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new v_(t),this.Gr=new b_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new S_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new P_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},P_=class extends Hv{constructor(e){super(),this.currentSequenceNumber=e}},x_=class n{constructor(e){this.persistence=e,this.Jr=new Hc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var O_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var k_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var F_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return k0()?8:S2(ut())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new k_;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Nc()<=me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Nc()<=me.DEBUG&&q("QueryEngine","Query:",xo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nc()<=me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(t))):F.resolve())}Yi(e,t){if(lA(t))return F.resolve(null);let r=Hn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=r_(t,null,"F"),r=Hn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ge(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,r_(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return lA(t)||i.isEqual(ie.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?F.resolve(null):(Nc()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xo(t)),this.rs(e,o,t,D2(i,-1)).next(a=>a))})}ts(e,t){let r=new bt($A(e));return t.forEach((i,s)=>{Kh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Nc()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",xo(t)),this.Ji.getDocumentsMatchingQuery(e,t,ss.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var L_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ze(De),this._s=new hi(s=>wI(s),EI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function vB(n,e,t,r){return new L_(n,e,t,r)}function aR(n,e){return w(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ge();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function _B(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=F.resolve();return g.forEach(E=>{y=y.next(()=>h.getEntry(c,E)).next(A=>{let M=l.docVersions.get(E);Ae(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cR(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function IB(n,e){let t=te(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Tt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,k){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(s,y))});let c=Cr(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(wB(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ie.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function wB(n,e,t){let r=ge(),i=ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Cr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function EB(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DB(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Bc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function V_(n,e,t){return w(this,null,function*(){let r=te(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Yc(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function wA(n,e,t){let r=te(n),i=ie.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=te(c),g=p._s.get(h);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,o,Hn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ie.min(),t?s:ge())).next(a=>(bB(r,U2(e),a),{documents:a,Ts:s})))}function bB(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Mh=class{constructor(){this.activeTargetIds=z2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var U_=class{constructor(){this.so=new Mh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Mh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var j_=class{_o(e){}shutdown(){}};var Nh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fh=null;function Pv(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}var TB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var B_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dt="WebChannelConnection",$_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Pv(),c=this.xo(t,r.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(q("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Vo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=TB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Pv();return new Promise((o,a)=>{let c=new Cv;c.setWithCredentials(!0),c.listenOnce(Sv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mc.NO_ERROR:let h=c.getResponseJson();q(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Mc.TIMEOUT:q(Dt,`RPC '${e}' ${s} timed out`),a(new Q(x.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:let p=c.getStatus();if(q(Dt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let E=function(M){let k=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(k)>=0?k:x.UNKNOWN}(y.status);a(new Q(E,y.message))}else a(new Q(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(x.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{q(Dt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);q(Dt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Pv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mv(),a=Rv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");q(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),g=!1,y=!1,E=new B_({Io:M=>{y?q(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||(q(Dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),q(Dt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,k,V)=>{M.listen(k,j=>{try{V(j)}catch(G){setTimeout(()=>{throw G},0)}})};return A(p,Po.EventType.OPEN,()=>{y||(q(Dt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),A(p,Po.EventType.CLOSE,()=>{y||(y=!0,q(Dt,`RPC '${e}' stream ${i} transport closed`),E.So())}),A(p,Po.EventType.ERROR,M=>{y||(y=!0,Vo(Dt,`RPC '${e}' stream ${i} transport errored:`,M),E.So(new Q(x.UNAVAILABLE,"The operation could not be completed")))}),A(p,Po.EventType.MESSAGE,M=>{var k;if(!y){let V=M.data[0];Ae(!!V);let j=V,G=j.error||((k=j[0])===null||k===void 0?void 0:k.error);if(G){q(Dt,`RPC '${e}' stream ${i} received error:`,G);let Ce=G.status,K=function(_){let b=Je[_];if(b!==void 0)return XA(b)}(Ce),D=G.message;K===void 0&&(K=x.INTERNAL,D="Unknown error status: "+Ce+" with message "+G.message),y=!0,E.So(new Q(K,D)),p.close()}else q(Dt,`RPC '${e}' stream ${i} received:`,V),E.bo(V)}}),A(a,Av.STAT_EVENT,M=>{M.stat===dh.PROXY?q(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===dh.NOPROXY&&q(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function xv(){return typeof document<"u"?document:null}function Qh(n){return new f_(n,!0)}var Ph=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var xh=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ph(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new Q(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},H_=class extends xh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=oB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?qn(o.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=y_(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=n_(c)?{documents:uB(s,c)}:{query:lB(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eR(s,o.resumeToken);let l=p_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=Ah(s,o.snapshotVersion.toTimestamp());let l=p_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=hB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=y_(this.serializer),t.removeTarget=e,this.a_(t)}},q_=class extends xh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=cB(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=y_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>aB(this.serializer,r))};this.a_(t)}};var z_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,m_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(x.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,m_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},G_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(br(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var W_=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){fs(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return w(this,null,function*(){let l=te(c);l.L_.add(4),yield Zc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Yh(l)})}(this))}))}),this.q_=new G_(r,i)}};function Yh(n){return w(this,null,function*(){if(fs(n))for(let e of n.B_)yield e(!0)})}function Zc(n){return w(this,null,function*(){for(let e of n.B_)yield e(!1)})}function uR(n,e){let t=te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),RI(t)?AI(t):Xo(t).r_()&&SI(t,e))}function CI(n,e){let t=te(n),r=Xo(t);t.N_.delete(e),r.r_()&&lR(t,e),t.N_.size===0&&(r.r_()?r.o_():fs(t)&&t.q_.set("Unknown"))}function SI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(n).A_(e)}function lR(n,e){n.Q_.xe(e),Xo(n).R_(e)}function AI(n){n.Q_=new h_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Xo(n).start(),n.q_.v_()}function RI(n){return fs(n)&&!Xo(n).n_()&&n.N_.size>0}function fs(n){return te(n).L_.size===0}function dR(n){n.Q_=void 0}function CB(n){return w(this,null,function*(){n.q_.set("Online")})}function SB(n){return w(this,null,function*(){n.N_.forEach((e,t)=>{SI(n,e)})})}function AB(n,e){return w(this,null,function*(){dR(n),RI(n)?(n.q_.M_(e),AI(n)):n.q_.set("Unknown")})}function RB(n,e,t){return w(this,null,function*(){if(n.q_.set("Online"),e instanceof Ch&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Oh(n,r)}else if(e instanceof Lo?n.Q_.Ke(e):e instanceof Th?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield cR(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),lR(s,c);let p=new Bc(h.target,c,l,h.sequenceNumber);SI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield Oh(n,r)}})}function Oh(n,e,t){return w(this,null,function*(){if(!Yc(e))throw e;n.L_.add(1),yield Zc(n),n.q_.set("Offline"),t||(t=()=>cR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Yh(n)}))})}function hR(n,e){return e().catch(t=>Oh(n,t,e))}function Zh(n){return w(this,null,function*(){let e=te(n),t=fi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MB(e);)try{let i=yield EB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,NB(e,i)}catch(i){yield Oh(e,i)}fR(e)&&pR(e)})}function MB(n){return fs(n)&&n.O_.length<10}function NB(n,e){n.O_.push(e);let t=fi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function fR(n){return fs(n)&&!fi(n).n_()&&n.O_.length>0}function pR(n){fi(n).start()}function PB(n){return w(this,null,function*(){fi(n).p_()})}function xB(n){return w(this,null,function*(){let e=fi(n);for(let t of n.O_)e.m_(t.mutations)})}function OB(n,e,t){return w(this,null,function*(){let r=n.O_.shift(),i=c_.from(r,e,t);yield hR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zh(n)})}function kB(n,e){return w(this,null,function*(){e&&fi(n).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return J2(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();fi(r).s_(),yield hR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Zh(r)}})}(n,e)),fR(n)&&pR(n)})}function EA(n,e){return w(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=fs(t);t.L_.add(3),yield Zc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Yh(t)})}function FB(n,e){return w(this,null,function*(){let t=te(n);e?(t.L_.delete(2),yield Yh(t)):e||(t.L_.add(2),yield Zc(t),t.q_.set("Unknown"))})}function Xo(n){return n.K_||(n.K_=function(t,r,i){let s=te(t);return s.w_(),new H_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:CB.bind(null,n),Ro:SB.bind(null,n),mo:AB.bind(null,n),d_:RB.bind(null,n)}),n.B_.push(e=>w(this,null,function*(){e?(n.K_.s_(),RI(n)?AI(n):n.q_.set("Unknown")):(yield n.K_.stop(),dR(n))}))),n.K_}function fi(n){return n.U_||(n.U_=function(t,r,i){let s=te(t);return s.w_(),new q_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PB.bind(null,n),mo:kB.bind(null,n),f_:xB.bind(null,n),g_:OB.bind(null,n)}),n.B_.push(e=>w(this,null,function*(){e?(n.U_.s_(),yield Zh(n)):(yield n.U_.stop(),n.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var K_=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function MI(n,e){if(br("AsyncQueue",`${e}: ${n}`),Yc(n))return new Q(x.UNAVAILABLE,`${e}: ${n}`);throw n}var kh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=Pc(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fh=class{constructor(){this.W_=new ze(Y.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ko=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,kh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Q_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Y_=class{constructor(){this.queries=DA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=te(t),s=i.queries;i.queries=DA(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new Q(x.ABORTED,"Firestore shutting down"))}};function DA(){return new hi(n=>BA(n),Wh)}function LB(n,e){return w(this,null,function*(){let t=te(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Q_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=MI(o,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&NI(t)})}function VB(n,e){return w(this,null,function*(){let t=te(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function UB(n,e){let t=te(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&NI(t)}function jB(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function NI(n){n.Y_.forEach(e=>{e.next()})}var Z_,bA;(bA=Z_||(Z_={})).ea="default",bA.Cache="cache";var J_=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Z_.Cache}};var Lh=class{constructor(e){this.key=e}},Vh=class{constructor(e){this.key=e}},X_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=$A(e),this.Ra=new kh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Fh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Kh(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(g,y)||(r.track({type:2,doc:y}),M=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(c||l)&&(a=!0)),M&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,E){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return A(y)-A(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ko(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Vh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Lh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},eI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},tI=class{constructor(e){this.key=e,this.va=!1}},nI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new hi(a=>BA(a),Wh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(Y.comparator),this.Na=new Map,this.La=new Hc,this.Ba={},this.ka=new Map,this.qa=$c.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function BB(n,e,t=!0){return w(this,null,function*(){let r=IR(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield mR(r,e,t,!0),i})}function $B(n,e){return w(this,null,function*(){let t=IR(n);yield mR(t,e,!0,!1)})}function mR(n,e,t,r){return w(this,null,function*(){let i=yield DB(n.localStore,Hn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield HB(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&uR(n.remoteStore,i),a})}function HB(n,e,t,r,i){return w(this,null,function*(){n.Ka=(p,g,y)=>function(A,M,k,V){return w(this,null,function*(){let j=M.view.ma(k);j.ns&&(j=yield wA(A.localStore,M.query,!1).then(({documents:D})=>M.view.ma(D,j)));let G=V&&V.targetChanges.get(M.targetId),Ce=V&&V.targetMismatches.get(M.targetId)!=null,K=M.view.applyChanges(j,A.isPrimaryClient,G,Ce);return CA(A,M.targetId,K.wa),K.snapshot})}(n,p,g,y);let s=yield wA(n.localStore,e,!0),o=new X_(e,s.Ts),a=o.ma(s.documents),c=jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);CA(n,t,l.wa);let h=new eI(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function qB(n,e,t){return w(this,null,function*(){let r=te(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Wh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield V_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&CI(r.remoteStore,i.targetId),rI(r,i.targetId)}).catch(Qc))):(rI(r,i.targetId),yield V_(r.localStore,i.targetId,!0))})}function zB(n,e){return w(this,null,function*(){let t=te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),CI(t.remoteStore,r.targetId))})}function GB(n,e,t){return w(this,null,function*(){let r=XB(n);try{let i=yield function(o,a){let c=te(o),l=gt.now(),h=a.reduce((y,E)=>y.add(E.key),ge()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Cr(),A=ge();return c.cs.getEntries(y,h).next(M=>{E=M,E.forEach((k,V)=>{V.isValidDocument()||(A=A.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(M=>{p=M;let k=[];for(let V of a){let j=Z2(V,p.get(V.key).overlayedDocument);j!=null&&k.push(new Wn(V.key,j,kA(j.value.mapValue),li.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,k,a)}).next(M=>{g=M;let k=M.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,M.batchId,k)})}).then(()=>({batchId:g.batchId,changes:qA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new ze(De)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Jc(r,i.changes),yield Zh(r.remoteStore)}catch(i){let s=MI(i,"Failed to persist write");t.reject(s)}})}function gR(n,e){return w(this,null,function*(){let t=te(n);try{let r=yield IB(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ae(o.va):i.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),yield Jc(t,r,e)}catch(r){yield Qc(r)}})}function TA(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=te(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&NI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WB(n,e,t){return w(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new ze(Y.comparator);o=o.insert(s,wn.newNoDocument(s,ie.min()));let a=ge().add(s),c=new bh(ie.min(),new Map,new ze(De),o,a);yield gR(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),PI(r)}else yield V_(r.localStore,e,!1).then(()=>rI(r,e,t)).catch(Qc)})}function KB(n,e){return w(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield _B(t.localStore,e);vR(t,r,null),yR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jc(t,i)}catch(i){yield Qc(i)}})}function QB(n,e,t){return w(this,null,function*(){let r=te(n);try{let i=yield function(o,a){let c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ae(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);vR(r,e,t),yR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jc(r,i)}catch(i){yield Qc(i)}})}function yR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function vR(n,e,t){let r=te(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||_R(n,r)})}function _R(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(CI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),PI(n))}function CA(n,e,t){for(let r of t)r instanceof Lh?(n.La.addReference(r.key,e),YB(n,r)):r instanceof Vh?(q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||_R(n,r.key)):X()}function YB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(q("SyncEngine","New document in limbo: "+t),n.xa.add(r),PI(n))}function PI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Y(et.fromString(e)),r=n.qa.next();n.Na.set(r,new tI(t)),n.Oa=n.Oa.insert(t,r),uR(n.remoteStore,new Bc(Hn(DI(t.path)),r,"TargetPurposeLimboResolution",NA.oe))}}function Jc(n,e,t){return w(this,null,function*(){let r=te(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=O_.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return w(this,null,function*(){let h=te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(l,g=>F.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>F.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Yc(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),E=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(g,A)}}})}(r.localStore,s))})}function ZB(n,e){return w(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield aR(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new Q(x.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jc(t,r.hs)}})}function JB(n,e){let t=te(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function IR(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WB.bind(null,e),e.Ca.d_=UB.bind(null,e.eventManager),e.Ca.$a=jB.bind(null,e.eventManager),e}function XB(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QB.bind(null,e),e}var SA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=Qh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return vB(this.persistence,new F_,t.initialUser,this.serializer)}Ga(t){return new N_(x_.Zr,this.serializer)}Wa(t){return new U_}terminate(){return w(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var e$=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZB.bind(null,this.syncEngine),yield FB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Y_}()}createDatastore(t){let r=Qh(t.databaseInfo.databaseId),i=function(o){return new $_(o)}(t.databaseInfo);return function(o,a,c,l){return new z_(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new W_(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>TA(this.syncEngine,r,0),function(){return Nh.D()?new Nh:new j_}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let g=new nI(s,o,a,c,l,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var t,r;yield function(s){return w(this,null,function*(){let o=te(s);q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Zc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var iI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var sI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>w(this,null,function*(){q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=MI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ov(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield aR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function AA(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield t$(n);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>EA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>EA(e.remoteStore,i)),n._onlineComponents=e})}function t$(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ov(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),yield Ov(n,new SA)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield Ov(n,new SA);return n._offlineComponents})}function wR(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield AA(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield AA(n,new e$))),n._onlineComponents})}function n$(n){return wR(n).then(e=>e.syncEngine)}function r$(n){return w(this,null,function*(){let e=yield wR(n),t=e.eventManager;return t.onListen=BB.bind(null,e.syncEngine),t.onUnlisten=qB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$B.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zB.bind(null,e.syncEngine),t})}function i$(n,e,t={}){let r=new Bn;return n.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,c,l){let h=new iI({next:g=>{h.Za(),o.enqueueAndForget(()=>VB(s,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new Q(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new Q(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new J_(DI(a.path),h,{includeMetadataChanges:!0,_a:!0});return LB(s,p)}(yield r$(n),n.asyncQueue,e,t,r)})),r.promise}function ER(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var RA=new Map;function s$(n,e,t){if(!t)throw new Q(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function o$(n,e,t,r){if(e===!0&&r===!0)throw new Q(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MA(n){if(!Y.isDocumentKey(n))throw new Q(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function ds(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xI(n);throw new Q(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Uh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ER((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kv;switch(r.type){case"firstParty":return new Uv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=RA.get(t);r&&(q("ComponentProvider","Removing Datastore"),RA.delete(t),r.terminate())}(this),Promise.resolve()}};function DR(n,e,t,r={}){var i;let s=(n=ds(n,qc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=lt.MOCK_USER;else{a=R0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Q(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new lt(l)}n._authCredentials=new Fv(new gh(a,c))}}var oI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},zc=class n extends oI{constructor(e,t,r){super(e,t,DI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xc(n,e,...t){if(n=mt(n),arguments.length===1&&(e=yh.newId()),s$("doc","path",e),n instanceof qc){let r=et.fromString(e,...t);return MA(r),new Kt(n,null,new Y(r))}{if(!(n instanceof Kt||n instanceof zc))throw new Q(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(et.fromString(e,...t));return MA(r),new Kt(n.firestore,n instanceof zc?n.converter:null,new Y(r))}}var jh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ph(this,"async_queue_retry"),this.Vu=()=>{let r=xv();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=xv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=xv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return w(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yc(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=K_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return w(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Qo=class extends qc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jh(e),this._firestoreClient=void 0,yield e}})}};function bR(n,e){let t=typeof n=="object"?n:ts(),r=typeof n=="string"?n:e||"(default)",i=Ac(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=A0("firestore");s&&DR(i,...s)}return i}function TR(n){if(n._terminated)throw new Q(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||a$(n),n._firestoreClient}function a$(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new qv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ER(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new sI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Gc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new Q(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zo=class{constructor(e){this._methodName=e}};var Wc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var Kc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var c$=/^__.*__$/,aI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}},Bh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var cI=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CR(this.Cu)&&c$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},uI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qh(e)}Qu(e,t,r,i=!1){return new cI({Cu:e,methodName:t,qu:r,path:Wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function SR(n){let e=n._freezeSettings(),t=Qh(n._databaseId);return new uI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function u$(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);OI("Data must be an object, but it was:",o,r);let a=AR(r,o),c,l;if(s.merge)c=new un(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=dI(e,p,t);if(!o.contains(g))throw new Q(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);MR(h,g)||h.push(g)}c=new un(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new aI(new Gt(a),c,l)}var $h=class n extends Zo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var lI=class n extends Zo{_toFieldTransform(e){return new i_(e.path,new as)}isEqual(e){return e instanceof n}};function l$(n,e,t,r){let i=n.Qu(1,e,t);OI("Data must be an object, but it was:",i,r);let s=[],o=Gt.empty();hs(r,(c,l)=>{let h=kI(e,c,t);l=mt(l);let p=i.Nu(h);if(l instanceof $h)s.push(h);else{let g=Jh(l,p);g!=null&&(s.push(h),o.set(h,g))}});let a=new un(s);return new Bh(o,a,i.fieldTransforms)}function d$(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[dI(e,r,t)],c=[i];if(s.length%2!=0)throw new Q(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(dI(e,s[g])),c.push(s[g+1]);let l=[],h=Gt.empty();for(let g=a.length-1;g>=0;--g)if(!MR(l,a[g])){let y=a[g],E=c[g];E=mt(E);let A=o.Nu(y);if(E instanceof $h)l.push(y);else{let M=Jh(E,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new un(l);return new Bh(h,p,o.fieldTransforms)}function Jh(n,e){if(RR(n=mt(n)))return OI("Unsupported field value:",e,n),AR(n,e);if(n instanceof Zo)return function(r,i){if(!CR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Jh(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=gt.fromDate(r);return{timestampValue:Ah(i.serializer,s)}}if(r instanceof gt){let s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(i.serializer,s)}}if(r instanceof Wc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gc)return{bytesValue:eR(i.serializer,r._byteString)};if(r instanceof Kt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:TI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return bI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xI(r)}`)}(n,e)}function AR(n,e){let t={};return PA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(n,(r,i)=>{let s=Jh(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function RR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Wc||n instanceof Gc||n instanceof Kt||n instanceof Zo||n instanceof Kc)}function OI(n,e,t){if(!RR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=xI(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function dI(n,e,t){if((e=mt(e))instanceof Yo)return e._internalPath;if(typeof e=="string")return kI(n,e);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,t)}var h$=new RegExp("[~\\*/\\[\\]]");function kI(n,e,t){if(e.search(h$)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yo(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(x.INVALID_ARGUMENT,a+n+c)}function MR(n,e){return n.some(t=>t.isEqual(e))}var qh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new hI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(NR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},hI=class extends qh{data(){return super.data()}};function NR(n,e){return typeof e=="string"?kI(n,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}var fI=class{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return hs(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Le(o.doubleValue));return new Kc(s)}convertGeoPoint(e){return new Wc(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_I(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){let t=Tr(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=et.fromString(e);Ae(oR(r));let i=new wh(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(t)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function f$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pI=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zh=class extends qh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new mI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(NR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},mI=class extends zh{data(e={}){return super.data(e)}};function FI(n){n=ds(n,Kt);let e=ds(n.firestore,Qo);return i$(TR(e),n._key).then(t=>p$(e,n,t))}var gI=class extends fI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}};function LI(n,e,t){n=ds(n,Kt);let r=ds(n.firestore,Qo),i=f$(n.converter,e,t);return PR(r,[u$(SR(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,li.none())])}function VI(n,e,t,...r){n=ds(n,Kt);let i=ds(n.firestore,Qo),s=SR(i),o;return o=typeof(e=mt(e))=="string"||e instanceof Yo?d$(s,"updateDoc",n._key,e,t,r):l$(s,"updateDoc",n._key,e),PR(i,[o.toMutation(n._key,li.exists(!0))])}function PR(n,e){return function(r,i){let s=new Bn;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return GB(yield n$(r),i,s)})),s.promise}(TR(n),e)}function p$(n,e,t){let r=t.docs.get(e._key),i=new gI(n);return new zh(n,i,e._key,r,new pI(t.hasPendingWrites,t.fromCache),e.converter)}function eu(){return new lI("serverTimestamp")}(function(e,t=!0){(function(i){Jo=i})(ci),ai(new cn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Qo(new Lv(r.getProvider("auth-internal")),new Bv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Q(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ze(tA,"4.7.3",e),Ze(tA,"4.7.3","esm2017")})();var g$="firebase",y$="10.14.1";Ze(g$,y$,"app");var ms=new lr("ANGULARFIRE2_VERSION");function ef(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var tu=(n,e)=>{let t=e?[e]:Rc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},tf=class{constructor(){return tu(_$)}},_$="app-check";function ea(){}var xR=class{zone;delegate;constructor(n,e=Qp){this.zone=n,this.delegate=e}now(){return this.delegate.now()}schedule(n,e,t){let r=this.zone,i=function(s){r.runGuarded(()=>{n.apply(this,[s])})};return this.delegate.schedule(i,e,t)}},I$=class{zone;task=null;constructor(n){this.zone=n}call(n,e){let t=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ea,{},ea,ea)),e.pipe(nt({next:t,complete:t,error:t})).subscribe(n).add(t)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ta=class Xh{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xR(Zone.current)),this.insideAngular=t.run(()=>new xR(Zone.current,Kp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||Xh)(H(ce))};static \u0275prov=U({token:Xh,factory:Xh.\u0275fac,providedIn:"root"})};function nf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function w$(n){return nf().ngZone.runOutsideAngular(()=>n())}function ps(n){return nf().ngZone.run(()=>n())}function E$(n){return D$(nf())(n)}function D$(n){return function(t){return t=t.lift(new I$(n.ngZone)),t.pipe(Br(n.outsideAngular),jr(n.insideAngular))}}var b$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ps(()=>n.apply(void 0,r))},Sr=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=ps(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ea,{},ea,ea))),r[s]=b$(r[s],t));let i=w$(()=>n.apply(this,r));if(!e)if(i instanceof ye){let s=nf();return i.pipe(Br(s.outsideAngular),jr(s.insideAngular))}else return ps(()=>i);return i instanceof ye?i.pipe(E$):i instanceof Promise?ps(()=>new Promise((s,o)=>i.then(a=>ps(()=>s(a)),a=>ps(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ps(()=>i)};var gs=class{constructor(n){return n}},nu=class{constructor(){return Rc()}};function T$(n){return n&&n.length===1?n[0]:new gs(ts())}var UI=new $("angularfire2._apps"),C$={provide:gs,useFactory:T$,deps:[[new Nt,UI]]},S$={provide:nu,deps:[[new Nt,UI]]};function A$(n){return(e,t)=>{let r=t.get(xn);Ze("angularfire",ms.full,"core"),Ze("angularfire",ms.full,"app"),Ze("angular",sS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new gs(i)}}function OR(n,...e){return Mn([C$,S$,{provide:UI,useFactory:A$(n),multi:!0,deps:[ce,Ue,ta,...e]}])}var kR=Sr(bv,!0);function JR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XR=JR,eM=new wr("auth","Firebase",JR());var uf=new si("@firebase/auth");function R$(n,...e){uf.logLevel<=me.WARN&&uf.warn(`Auth (${ci}): ${n}`,...e)}function sf(n,...e){uf.logLevel<=me.ERROR&&uf.error(`Auth (${ci}): ${n}`,...e)}function Qn(n,...e){throw cw(n,...e)}function ys(n,...e){return cw(n,...e)}function tM(n,e,t){let r=Object.assign(Object.assign({},XR()),{[e]:t});return new wr("auth","Firebase",r).create(e,{appName:n.name})}function Mr(n){return tM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eM.create(n,...e)}function Z(n,e,...t){if(!n)throw cw(e,...t)}function Ar(n){let e="INTERNAL ASSERTION FAILED: "+n;throw sf(e),new Error(e)}function mi(n,e){n||Ar(e)}function HI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function M$(){return FR()==="http:"||FR()==="https:"}function FR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function N$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M$()||P0()||"connection"in navigator)?navigator.onLine:!0}function P$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var vs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=M0()||x0()}get(){return N$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uw(n,e){mi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var lf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var x$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var O$=new vs(3e4,6e4);function gi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function yi(s,o,a,c){return w(this,arguments,function*(n,e,t,r,i={}){return nM(n,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Tc(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return N0()||(y.referrerPolicy="no-referrer"),lf.fetch()(rM(n,n.config.apiHost,t,p),y)}))})}function nM(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},x$),e);try{let i=new qI(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw rf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw rf(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tM(n,h,l);Qn(n,h)}}catch(i){if(i instanceof zt)throw i;Qn(n,"network-request-failed",{message:String(i)})}})}function lu(s,o,a,c){return w(this,arguments,function*(n,e,t,r,i={}){let l=yield yi(n,e,t,r,i);return"mfaPendingCredential"in l&&Qn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function rM(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?uw(n.config,i):`${n.config.apiScheme}://${i}`}function k$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var qI=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ys(this.auth,"network-request-failed")),O$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ys(n,e,r);return i.customData._tokenResponse=t,i}function LR(n){return n!==void 0&&n.enterprise!==void 0}var zI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function F$(n,e){return w(this,null,function*(){return yi(n,"GET","/v2/recaptchaConfig",gi(n,e))})}function L$(n,e){return w(this,null,function*(){return yi(n,"POST","/v1/accounts:delete",e)})}function iM(n,e){return w(this,null,function*(){return yi(n,"POST","/v1/accounts:lookup",e)})}function ru(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lw(n,e=!1){return w(this,null,function*(){let t=mt(n),r=yield t.getIdToken(e),i=dw(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ru(jI(i.auth_time)),issuedAtTime:ru(jI(i.iat)),expirationTime:ru(jI(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function jI(n){return Number(n)*1e3}function dw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{let i=sv(t);return i?JSON.parse(i):(sf("Failed to decode base64 JWT payload"),null)}catch(i){return sf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VR(n){let e=dw(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function su(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof zt&&V$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function V$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var GI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ou=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function df(n){return w(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield su(n,iM(t,{idToken:r}));Z(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?sM(s.providerUserInfo):[],a=U$(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ou(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function hw(n){return w(this,null,function*(){let e=mt(n);yield df(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function U$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sM(n){return n.map(e=>{var{providerId:t}=e,r=Yp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function j$(n,e){return w(this,null,function*(){let t=yield nM(n,{},()=>w(this,null,function*(){let r=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=rM(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function B$(n,e){return w(this,null,function*(){return yi(n,"POST","/v2/accounts:revokeToken",gi(n,e))})}var iu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=VR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield j$(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ar("not implemented")}};function pi(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var na=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ou(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield su(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return lw(this,e)}reload(){return hw(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield df(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(In(this.auth.app))return Promise.reject(Mr(this.auth));let e=yield this.getIdToken();return yield su(this,L$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,V=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:j,emailVerified:G,isAnonymous:Ce,providerData:K,stsTokenManager:D}=t;Z(j&&D,e,"internal-error");let v=iu.fromJSON(this.name,D);Z(typeof j=="string",e,"internal-error"),pi(p,e.name),pi(g,e.name),Z(typeof G=="boolean",e,"internal-error"),Z(typeof Ce=="boolean",e,"internal-error"),pi(y,e.name),pi(E,e.name),pi(A,e.name),pi(M,e.name),pi(k,e.name),pi(V,e.name);let _=new n({uid:j,auth:e,email:g,emailVerified:G,displayName:p,isAnonymous:Ce,photoURL:E,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:k,lastLoginAt:V});return K&&Array.isArray(K)&&(_.providerData=K.map(b=>Object.assign({},b))),M&&(_._redirectEventId=M),_}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new iu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield df(s),s})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?sM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new iu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ou(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var UR=new Map;function Rr(n){mi(n instanceof Function,"Expected a class definition");let e=UR.get(n);return e?(mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UR.set(n,e),e)}var $$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),WI=$$;function of(n,e,t){return`firebase:${n}:${e}:${t}`}var hf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=of(this.userKey,i.apiKey,s),this.fullPersistenceKey=of("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?na._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n(Rr(WI),e,r);let i=(yield Promise.all(t.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Rr(WI),o=of(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=na._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function jR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dM(e))return"Blackberry";if(hM(e))return"Webos";if(aM(e))return"Safari";if((e.includes("chrome/")||cM(e))&&!e.includes("edge/"))return"Chrome";if(lM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function oM(n=ut()){return/firefox\//i.test(n)}function aM(n=ut()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cM(n=ut()){return/crios\//i.test(n)}function uM(n=ut()){return/iemobile/i.test(n)}function lM(n=ut()){return/android/i.test(n)}function dM(n=ut()){return/blackberry/i.test(n)}function hM(n=ut()){return/webos/i.test(n)}function fw(n=ut()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function H$(n=ut()){var e;return fw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function q$(){return O0()&&document.documentMode===10}function fM(n=ut()){return fw(n)||lM(n)||hM(n)||dM(n)||/windows phone/i.test(n)||uM(n)}function pM(n,e=[]){let t;switch(n){case"Browser":t=jR(ut());break;case"Worker":t=`${jR(ut())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ci}/${r}`}var KI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function z$(t){return w(this,arguments,function*(n,e={}){return yi(n,"GET","/v2/passwordPolicy",gi(n,e))})}var G$=6,QI=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:G$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var YI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ff(this),this.idTokenSubscription=new ff(this),this.beforeStateQueue=new KI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield hf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield iM(this,{idToken:e}),r=yield na._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var t;if(In(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield df(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=P$()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(In(this.app))return Promise.reject(Mr(this));let t=e?mt(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return In(this.app)?Promise.reject(Mr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return In(this.app)?Promise.reject(Mr(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield z$(this),t=new QI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield B$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Rr(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield hf.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return w(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&R$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Is(n){return mt(n)}var ff=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=V0(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var If={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W$(n){If=n}function mM(n){return If.loadJS(n)}function K$(){return If.recaptchaEnterpriseScript}function Q$(){return If.gapiScript}function gM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Y$="recaptcha-enterprise",Z$="NO_RECAPTCHA",ZI=class{constructor(e){this.type=Y$,this.auth=Is(e)}verify(e="verify",t=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){F$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new zI(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;LR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Z$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&LR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=K$();c.length!==0&&(c+=a),mM(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function BR(n,e,t,r=!1){return w(this,null,function*(){let i=new ZI(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function JI(n,e,t,r){return w(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield BR(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield BR(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function pw(n,e){let t=Ac(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Xi(s,e??{}))return i;Qn(i,"already-initialized")}return t.initialize({options:e})}function J$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mw(n,e,t){let r=Is(n);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=yM(e),{host:o,port:a}=X$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||eH()}function yM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function X$(n){let e=yM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:$R(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:$R(o)}}}function $R(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function eH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var au=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}};function tH(n,e){return w(this,null,function*(){return yi(n,"POST","/v1/accounts:signUp",e)})}function nH(n,e){return w(this,null,function*(){return lu(n,"POST","/v1/accounts:signInWithPassword",gi(n,e))})}function rH(n,e){return w(this,null,function*(){return lu(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,e))})}function iH(n,e){return w(this,null,function*(){return lu(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,e))})}var cu=class n extends au{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JI(e,t,"signInWithPassword",nH);case"emailLink":return rH(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}})}_linkToIdToken(e,t){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JI(e,r,"signUpPassword",tH);case"emailLink":return iH(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function BI(n,e){return w(this,null,function*(){return lu(n,"POST","/v1/accounts:signInWithIdp",gi(n,e))})}function sH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oH(n){let e=Mo(No(n)).link,t=e?Mo(No(e)).deep_link_id:null,r=Mo(No(n)).deep_link_id;return(r?Mo(No(r)).link:null)||r||t||e||n}var pf=class n{constructor(e){var t,r,i,s,o,a;let c=Mo(No(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=sH((i=c.mode)!==null&&i!==void 0?i:null);Z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=oH(e);try{return new n(t)}catch{return null}}};var vM=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return cu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=pf.parseLink(r);return Z(i,"argument-error"),cu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),mf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var XI=class extends mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function aH(n,e){return w(this,null,function*(){return lu(n,"POST","/v1/accounts:signUp",gi(n,e))})}var ra=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return w(this,null,function*(){let s=yield na._fromIdTokenResponse(e,r,i),o=HR(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=HR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function HR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ew=class n extends zt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _M(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ew._fromErrorAndOperation(n,s,e,r):s})}function cH(n,e,t=!1){return w(this,null,function*(){let r=yield su(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ra._forOperation(n,"link",r)})}function uH(n,e,t=!1){return w(this,null,function*(){let{auth:r}=n;if(In(r.app))return Promise.reject(Mr(r));let i="reauthenticate";try{let s=yield su(n,_M(r,i,e,n),t);Z(s.idToken,r,"internal-error");let o=dw(s.idToken);Z(o,r,"internal-error");let{sub:a}=o;return Z(n.uid===a,r,"user-mismatch"),ra._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Qn(r,"user-mismatch"),s}})}function IM(n,e,t=!1){return w(this,null,function*(){if(In(n.app))return Promise.reject(Mr(n));let r="signIn",i=yield _M(n,r,e),s=yield ra._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function gw(n,e){return w(this,null,function*(){return IM(Is(n),e)})}function wM(n){return w(this,null,function*(){let e=Is(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function yw(n,e,t){return w(this,null,function*(){if(In(n.app))return Promise.reject(Mr(n));let r=Is(n),o=yield JI(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aH).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&wM(n),c}),a=yield ra._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function vw(n,e,t){return In(n.app)?Promise.reject(Mr(n)):gw(mt(n),vM.credential(e,t)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&wM(n),r}))}function _w(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function Iw(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function ww(n){return mt(n).signOut()}var gf="__sak";var yf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var lH=1e3,dH=10,hH=(()=>{class n extends yf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);q$()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,dH):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},lH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return w(this,null,function*(){yield Vr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return w(this,null,function*(){let r=yield Vr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return w(this,null,function*(){yield Vr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),EM=hH;var fH=(()=>{class n extends yf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ew=fH;function pH(n){return Promise.all(n.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var mH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return w(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield pH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function DM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=DM("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Kn(){return window}function gH(n){Kn().location.href=n}function bM(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}function yH(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _H(){return bM()?self:null}var TM="firebaseLocalStorageDb",IH=1,vf="firebaseLocalStorage",CM="fbase_key",_s=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wf(n,e){return n.transaction([vf],e?"readwrite":"readonly").objectStore(vf)}function wH(){let n=indexedDB.deleteDatabase(TM);return new _s(n).toPromise()}function nw(){let n=indexedDB.open(TM,IH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(vf,{keyPath:CM})}catch(i){t(i)}}),n.addEventListener("success",()=>w(this,null,function*(){let r=n.result;r.objectStoreNames.contains(vf)?e(r):(r.close(),yield wH(),e(yield nw()))}))})}function qR(n,e,t){return w(this,null,function*(){let r=wf(n,!0).put({[CM]:e,value:t});return new _s(r).toPromise()})}function EH(n,e){return w(this,null,function*(){let t=wf(n,!1).get(e),r=yield new _s(t).toPromise();return r===void 0?null:r.value})}function zR(n,e){let t=wf(n,!0).delete(e);return new _s(t).toPromise()}var DH=800,bH=3,TH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield nw(),this.db)})}_withRetries(t){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>bH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return bM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=mH._getInstance(_H()),this.receiver._subscribe("keyChanged",(t,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var t,r;if(this.activeServiceWorker=yield yH(),!this.activeServiceWorker)return;this.sender=new tw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nw();return yield qR(t,gf,"1"),yield zR(t,gf),!0}catch{}return!1})}_withPendingWrite(t){return w(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>qR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return w(this,null,function*(){let r=yield this._withRetries(i=>EH(i,t));return this.localCache[t]=r,r})}_remove(t){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>zR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return w(this,null,function*(){let t=yield this._withRetries(s=>{let o=wf(s,!1).getAll();return new _s(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),DH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SM=TH;var F7=gM("rcb"),L7=new vs(3e4,6e4);function CH(n,e){return e?Rr(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var uu=class extends au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return BI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return BI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return BI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function SH(n){return IM(n.auth,new uu(n),n.bypassAuthState)}function AH(n){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),uH(t,new uu(n),n.bypassAuthState)}function RH(n){return w(this,null,function*(){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),cH(t,new uu(n),n.bypassAuthState)})}var rw=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SH;case"linkViaPopup":case"linkViaRedirect":return RH;case"reauthViaPopup":case"reauthViaRedirect":return AH;default:Qn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var V7=new vs(2e3,1e4);var MH="pendingRedirect",af=new Map,iw=class n extends rw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=af.get(this.auth._key());if(!e){try{let r=(yield NH(this.resolver,this.auth))?yield Vr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return Vr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Vr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function NH(n,e){return w(this,null,function*(){let t=OH(e),r=xH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function PH(n,e){af.set(n._key(),e)}function xH(n){return Rr(n._redirectPersistence)}function OH(n){return of(MH,n.config.apiKey,n.name)}function kH(n,e,t=!1){return w(this,null,function*(){if(In(n.app))return Promise.reject(Mr(n));let r=Is(n),i=CH(r,e),o=yield new iw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var FH=10*60*1e3,sw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!AM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ys(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FH&&this.cachedEventUids.clear(),this.cachedEventUids.has(GR(e))}saveEventToCache(e){this.cachedEventUids.add(GR(e)),this.lastProcessedEventTime=Date.now()}};function GR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AM(n);default:return!1}}function VH(t){return w(this,arguments,function*(n,e={}){return yi(n,"GET","/v1/projects",e)})}var UH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jH=/^https?/;function BH(n){return w(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield VH(n);for(let t of e)try{if($H(t))return}catch{}Qn(n,"unauthorized-domain")})}function $H(n){let e=HI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!jH.test(t))return!1;if(UH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var HH=new vs(3e4,6e4);function WR(){let n=Kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qH(n){return new Promise((e,t)=>{var r,i,s;function o(){WR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WR(),t(ys(n,"network-request-failed"))},timeout:HH.get()})}if(!((i=(r=Kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Kn().gapi)===null||s===void 0)&&s.load)o();else{let a=gM("iframefcb");return Kn()[a]=()=>{gapi.load?o():t(ys(n,"network-request-failed"))},mM(`${Q$()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw cf=null,e})}var cf=null;function zH(n){return cf=cf||qH(n),cf}var GH=new vs(5e3,15e3),WH="__/auth/iframe",KH="emulator/auth/iframe",QH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZH(n){let e=n.config;Z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?uw(e,KH):`https://${n.config.authDomain}/${WH}`,r={apiKey:e.apiKey,appName:n.name,v:ci},i=YH.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Tc(r).slice(1)}`}function JH(n){return w(this,null,function*(){let e=yield zH(n),t=Kn().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:ZH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QH,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ys(n,"network-request-failed"),a=Kn().setTimeout(()=>{s(o)},GH.get());function c(){Kn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var XH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eq=500,tq=600,nq="_blank",rq="http://localhost",_f=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iq(n,e,t,r=eq,i=tq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},XH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ut().toLowerCase();t&&(a=cM(l)?nq:t),oM(l)&&(e=e||rq,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,E])=>`${g}${y}=${E},`,"");if(H$(l)&&a!=="_self")return sq(e||"",a),new _f(null);let p=window.open(e||"",a,h);Z(p,n,"popup-blocked");try{p.focus()}catch{}return new _f(p)}function sq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var oq="__/auth/handler",aq="emulator/auth/handler",cq=encodeURIComponent("fac");function KR(n,e,t,r,i,s){return w(this,null,function*(){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ci,eventId:i};if(e instanceof mf){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",L0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof XI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${cq}=${encodeURIComponent(c)}`:"";return`${uq(n)}?${Tc(a).slice(1)}${l}`})}function uq({config:n}){return n.emulator?uw(n,aq):`https://${n.authDomain}/${oq}`}var $I="webStorageSupport",ow=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=kH,this._overrideRedirectResult=PH}_openPopup(e,t,r,i){return w(this,null,function*(){var s;mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield KR(e,t,r,HI(),i);return iq(e,o,DM())})}_openRedirect(e,t,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield KR(e,t,r,HI(),i);return gH(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(mi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return w(this,null,function*(){let t=yield JH(e),r=new sw(e);return t.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($I,{type:$I},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[$I];o!==void 0&&t(!!o),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fM()||aM()||fw()}},RM=ow;var QR="@firebase/auth",YR="1.7.9";var aw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dq(n){ai(new cn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pM(n)},l=new YI(r,i,s,c);return J$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ai(new cn("auth-internal",e=>{let t=Is(e.getProvider("auth").getImmediate());return(r=>new aw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(QR,YR,lq(n)),Ze(QR,YR,"esm2017")}var hq=5*60,fq=cv("authIdTokenMaxAge")||hq,ZR=null,pq=n=>e=>w(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fq)return;let i=t?.token;ZR!==i&&(ZR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Dw(n=ts()){let e=Ac(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pw(n,{popupRedirectResolver:RM,persistence:[SM,EM,Ew]}),r=cv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=pq(s.toString());Iw(t,o,()=>o(t.currentUser)),_w(t,a=>o(a))}}let i=ov("auth");return i&&mw(t,`http://${i}`),t}function mq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}W$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ys("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dq("Browser");var MM="auth",du=class{constructor(n){return n}},bw=class{constructor(){return tu(MM)}};var Tw=new $("angularfire2.auth-instances");function oz(n,e){let t=ef(MM,n,e);return t&&new du(t)}function az(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new du(r)}}var cz={provide:bw,deps:[[new Nt,Tw]]},uz={provide:du,useFactory:oz,deps:[[new Nt,Tw],gs]};function NM(n,...e){return Ze("angularfire",ms.full,"auth"),Mn([uz,cz,{provide:Tw,useFactory:az(n),multi:!0,deps:[ce,Ue,ta,nu,[new Nt,tf],...e]}])}var PM=Sr(yw,!0);var xM=Sr(Dw,!0);var OM=Sr(vw,!0);var kM=Sr(ww,!0);var hu=class{constructor(n){return n}},FM="firestore",lz=class{constructor(){return tu(FM)}};var Cw=new $("angularfire2.firestore-instances");function dz(n,e){let t=ef(FM,n,e);return t&&new hu(t)}function hz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hu(r)}}var fz={provide:lz,deps:[[new Nt,Cw]]},pz={provide:hu,useFactory:dz,deps:[[new Nt,Cw],gs]};function LM(n,...e){return Ze("angularfire",ms.full,"fst"),Mn([pz,fz,{provide:Cw,useFactory:hz(n),multi:!0,deps:[ce,Ue,ta,nu,[new Nt,bw],[new Nt,tf],...e]}])}var VM=Sr(bR,!0);var vi=class n{static COLECCION_USUARIOS="usuarios";firestore=N(hu);fireAuth=N(du);registrar(e,t){return w(this,null,function*(){try{let r=yield PM(this.fireAuth,e,t),i=r.user.uid,s=Xc(this.firestore,n.COLECCION_USUARIOS,i);return yield LI(s,{FECHA_REGISTRO:eu(),ULTIMA_CONEXION:eu(),CORREO:e}),r}catch(r){throw r}})}iniciarSesion(e,t){return w(this,null,function*(){try{let r=yield OM(this.fireAuth,e,t),i=r.user.uid,s=Xc(this.firestore,n.COLECCION_USUARIOS,i);return yield VI(s,{ULTIMA_CONEXION:eu()}),r}catch(r){throw r}})}cerrarSesion(){return kM(this.fireAuth).then(()=>console.log("Sesi\xF3n cerrada con \xE9xito")).catch(e=>e)}obtenerDatosUsuario(){return w(this,null,function*(){let e=this.fireAuth.currentUser;if(!e)return Promise.reject("No hay un usuario autenticado.");let t=Xc(this.firestore,n.COLECCION_USUARIOS,e.uid),r=yield FI(t);return r.exists()?r.data():null})}obtenerUsuario(){return this.fireAuth.currentUser}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var se=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(se||{}),Yn="*";function UM(n,e){return{type:se.Trigger,name:n,definitions:e,options:{}}}function Sw(n,e=null){return{type:se.Animate,styles:e,timings:n}}function jM(n,e=null){return{type:se.Sequence,steps:n,options:e}}function ws(n){return{type:se.Style,styles:n,offset:null}}function Ef(n,e,t){return{type:se.State,name:n,styles:e,options:t}}function Aw(n,e,t=null){return{type:se.Transition,expr:n,animation:e,options:t}}var _i=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},fu=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Df="!";var BM=["toast-component",""];function mz(n,e){if(n&1){let t=mo();de(0,"button",5),ot("click",function(){Ui(t);let i=pt();return ji(i.remove())}),de(1,"span",6),Pe(2,"\xD7"),we()()}}function gz(n,e){if(n&1&&(Sd(0),Pe(1),Ad()),n&2){let t=pt(2);Se(),Fn("[",t.duplicatesCount+1,"]")}}function yz(n,e){if(n&1&&(de(0,"div"),Pe(1),ni(2,gz,2,1,"ng-container",4),we()),n&2){let t=pt();mr(t.options.titleClass),pr("aria-label",t.title),Se(),Fn(" ",t.title," "),Se(),st("ngIf",t.duplicatesCount)}}function vz(n,e){if(n&1&&wt(0,"div",7),n&2){let t=pt();mr(t.options.messageClass),st("innerHTML",t.message,Pg)}}function _z(n,e){if(n&1&&(de(0,"div",8),Pe(1),we()),n&2){let t=pt();mr(t.options.messageClass),pr("aria-label",t.message),Se(),Fn(" ",t.message," ")}}function Iz(n,e){if(n&1&&(de(0,"div"),wt(1,"div",9),we()),n&2){let t=pt();Se(),zi("width",t.width()+"%")}}function wz(n,e){if(n&1){let t=mo();de(0,"button",5),ot("click",function(){Ui(t);let i=pt();return ji(i.remove())}),de(1,"span",6),Pe(2,"\xD7"),we()()}}function Ez(n,e){if(n&1&&(Sd(0),Pe(1),Ad()),n&2){let t=pt(2);Se(),Fn("[",t.duplicatesCount+1,"]")}}function Dz(n,e){if(n&1&&(de(0,"div"),Pe(1),ni(2,Ez,2,1,"ng-container",4),we()),n&2){let t=pt();mr(t.options.titleClass),pr("aria-label",t.title),Se(),Fn(" ",t.title," "),Se(),st("ngIf",t.duplicatesCount)}}function bz(n,e){if(n&1&&wt(0,"div",7),n&2){let t=pt();mr(t.options.messageClass),st("innerHTML",t.message,Pg)}}function Tz(n,e){if(n&1&&(de(0,"div",8),Pe(1),we()),n&2){let t=pt();mr(t.options.messageClass),pr("aria-label",t.message),Se(),Fn(" ",t.message," ")}}function Cz(n,e){if(n&1&&(de(0,"div"),wt(1,"div",9),we()),n&2){let t=pt();Se(),zi("width",t.width()+"%")}}var Rw=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Mw=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},Nw=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Fe;_activate=new Fe;_manualClose=new Fe;_resetTimeout=new Fe;_countDuplicate=new Fe;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},ia=class{toastId;config;message;title;toastType;toastRef;_onTap=new Fe;_onAction=new Fe;constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},$M={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},HM=new $("ToastConfig"),Pw=class extends Mw{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},Sz=(()=>{class n{_document=N(Ye);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xw=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},Az=(()=>{class n{_overlayContainer=N(Sz);_componentFactoryResolver=N(Yr);_appRef=N(on);_document=N(Ye);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new Pw(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new xw(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sa=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=P(P({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=P(P({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}error(t,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}info(t,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}warning(t,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}clear(t){for(let r of this.toasts)if(t!==void 0){if(r.toastId===t){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(t){let r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let c=o&&a.title===t;if((!o||c)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(t={}){return P(P({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize(vn.HTML,r));let h=new Nw(c),p=new ia(this.index,s,l,i,t,h),g=[{provide:ia,useValue:p}],y=Ue.create({providers:g,parent:this._injector}),E=new Rw(s.toastComponent,y),A=c.attach(E,s.newestOnTop);h.componentInstance=A.instance;let M={toastId:this.index,title:i||"",message:r||"",toastRef:h,onShown:h.afterActivate(),onHidden:h.afterClosed(),onTap:p.onTap(),onAction:p.onAction(),portal:A};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{M.toastRef.activate()})),this.toasts.push(M),M}static \u0275fac=function(r){return new(r||n)(H(HM),H(Az),H(Ue),H(gy),H(ce))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rz=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=kn(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=kn({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>ne(P({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>ne(P({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>ne(P({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(be(sa),be(ia),be(ce))};static \u0275cmp=Bt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&ot("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Kg("@flyInOut",i._state),mr(i.toastClasses),zi("display",i.displayStyle))},standalone:!0,features:[Qa],attrs:BM,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ni(0,mz,3,0,"button",0)(1,yz,3,5,"div",1)(2,vz,1,3,"div",2)(3,_z,2,4,"div",3)(4,Iz,2,2,"div",4),r&2&&(st("ngIf",i.options.closeButton),Se(),st("ngIf",i.title),Se(),st("ngIf",i.message&&i.options.enableHtml),Se(),st("ngIf",i.message&&!i.options.enableHtml),Se(),st("ngIf",i.options.progressBar))},dependencies:[Xa],encapsulation:2,data:{animation:[UM("flyInOut",[Ef("inactive",ws({opacity:0})),Ef("active",ws({opacity:1})),Ef("removed",ws({opacity:0})),Aw("inactive => active",Sw("{{ easeTime }}ms {{ easing }}")),Aw("active => removed",Sw("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),Mz=ne(P({},$M),{toastComponent:Rz}),Nz=(n={})=>Mn([{provide:HM,useValue:{default:Mz,config:n}}]),qM=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Nz(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=rt({})}return n})();var Pz=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=kn(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=kn("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||n)(be(sa),be(ia),be(on))};static \u0275cmp=Bt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&ot("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(mr(i.toastClasses),zi("display",i.displayStyle))},standalone:!0,features:[Qa],attrs:BM,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ni(0,wz,3,0,"button",0)(1,Dz,3,5,"div",1)(2,bz,1,3,"div",2)(3,Tz,2,4,"div",3)(4,Cz,2,2,"div",4),r&2&&(st("ngIf",i.options.closeButton),Se(),st("ngIf",i.title),Se(),st("ngIf",i.message&&i.options.enableHtml),Se(),st("ngIf",i.message&&!i.options.enableHtml),Se(),st("ngIf",i.options.progressBar))},dependencies:[Xa],encapsulation:2,changeDetection:0})}return n})(),yJ=ne(P({},$M),{toastComponent:Pz});var XM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(be(fo),be(ei))}}static{this.\u0275dir=It({type:n})}}return n})(),xz=(()=>{class n extends XM{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lo(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,features:[fr]})}}return n})(),eN=new $("");var Oz={provide:eN,useExisting:Li(()=>la),multi:!0};function kz(){let n=Ln()?Ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Fz=new $(""),la=(()=>{class n extends XM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!kz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(be(fo),be(ei),be(Fz,8))}}static{this.\u0275dir=It({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ot("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ka([Oz]),fr]})}}return n})();function Lz(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var kw=new $(""),tN=new $("");function Vz(n){return Lz(n.value)?{required:!0}:null}function zM(n){return null}function nN(n){return n!=null}function rN(n){return Ki(n)?Ve(n):n}function iN(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function sN(n,e){return e.map(t=>t(n))}function Uz(n){return!n.validate}function oN(n){return n.map(e=>Uz(e)?e:t=>e.validate(t))}function jz(n){if(!n)return null;let e=n.filter(nN);return e.length==0?null:function(t){return iN(sN(t,e))}}function Fw(n){return n!=null?jz(oN(n)):null}function Bz(n){if(!n)return null;let e=n.filter(nN);return e.length==0?null:function(t){let r=sN(t,e).map(rN);return Jp(r).pipe(le(iN))}}function Lw(n){return n!=null?Bz(oN(n)):null}function GM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $z(n){return n._rawValidators}function Hz(n){return n._rawAsyncValidators}function Ow(n){return n?Array.isArray(n)?n:[n]:[]}function Tf(n,e){return Array.isArray(n)?n.includes(e):n===e}function WM(n,e){let t=Ow(e);return Ow(n).forEach(i=>{Tf(t,i)||t.push(i)}),t}function KM(n,e){return Ow(e).filter(t=>!Tf(n,t))}var Cf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Lw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ca=class extends Cf{get formDirective(){return null}get path(){return null}},_u=class extends Cf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Sf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},FJ=ne(P({},qz),{"[class.ng-submitted]":"isSubmitted"}),Nf=(()=>{class n extends Sf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(be(_u,2))}}static{this.\u0275dir=It({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Cd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[fr]})}}return n})(),Pf=(()=>{class n extends Sf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(be(ca,10))}}static{this.\u0275dir=It({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Cd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[fr]})}}return n})();var pu="VALID",bf="INVALID",oa="PENDING",mu="DISABLED",ua=class{},Af=class extends ua{constructor(e,t){super(),this.value=e,this.source=t}},yu=class extends ua{constructor(e,t){super(),this.pristine=e,this.source=t}},vu=class extends ua{constructor(e,t){super(),this.touched=e,this.source=t}},aa=class extends ua{constructor(e,t){super(),this.status=e,this.source=t}};function aN(n){return(xf(n)?n.validators:n)||null}function zz(n){return Array.isArray(n)?Fw(n):n||null}function cN(n,e){return(xf(e)?e.asyncValidators:n)||null}function Gz(n){return Array.isArray(n)?Lw(n):n||null}function xf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Wz(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new O(1e3,"");if(!r[t])throw new O(1001,"")}function Kz(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new O(1002,"")})}var Rf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ja(()=>this.statusReactive()),this.statusReactive=kn(void 0),this._pristine=Ja(()=>this.pristineReactive()),this.pristineReactive=kn(!0),this._touched=Ja(()=>this.touchedReactive()),this.touchedReactive=kn(!1),this._events=new Fe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gr(this.statusReactive)}set status(e){gr(()=>this.statusReactive.set(e))}get valid(){return this.status===pu}get invalid(){return this.status===bf}get pending(){return this.status==oa}get disabled(){return this.status===mu}get enabled(){return this.status!==mu}get pristine(){return gr(this.pristineReactive)}set pristine(e){gr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return gr(this.touchedReactive)}set touched(e){gr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KM(e,this._rawAsyncValidators))}hasValidator(e){return Tf(this._rawValidators,e)}hasAsyncValidator(e){return Tf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new vu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new vu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new yu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new yu(!0,r))}markAsPending(e={}){this.status=oa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=mu,this.errors=null,this._forEachChild(i=>{i.disable(ne(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,r)),this._events.next(new aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pu,this._forEachChild(r=>{r.enable(ne(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pu||this.status===oa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,t)),this._events.next(new aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mu:pu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=oa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=rN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?mu:this.errors?bf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oa)?oa:this._anyControlsHaveStatus(bf)?bf:pu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new yu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new vu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Gz(this._rawAsyncValidators)}},Mf=class extends Rf{constructor(e,t,r){super(aN(t),cN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Kz(this,!0,e),Object.keys(e).forEach(r=>{Wz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Of=new $("CallSetDisabledState",{providedIn:"root",factory:()=>kf}),kf="always";function Qz(n,e){return[...e.path,n]}function uN(n,e,t=kf){lN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Zz(n,e),Xz(n,e),Jz(n,e),Yz(n,e)}function QM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lN(n,e){let t=$z(n);e.validator!==null?n.setValidators(GM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Hz(n);e.asyncValidator!==null?n.setAsyncValidators(GM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();QM(e._rawValidators,i),QM(e._rawAsyncValidators,i)}function Zz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&dN(n,e)})}function Jz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&dN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function dN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Xz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function eG(n,e){n==null,lN(n,e)}function tG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function nG(n){return Object.getPrototypeOf(n.constructor)===xz}function rG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===la?t=s:nG(s)?r=s:i=s}),i||r||t||null}var sG={provide:ca,useExisting:Li(()=>Iu)},gu=Promise.resolve(),Iu=(()=>{class n extends ca{get submitted(){return gr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ja(()=>this.submittedReactive()),this.submittedReactive=kn(!1),this._directives=new Set,this.ngSubmit=new Qe,this.form=new Mf({},Fw(t),Lw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),uN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gu.then(()=>{let r=this._findContainer(t.path),i=new Mf({});eG(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),rG(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(be(kw,10),be(tN,10),be(Of,8))}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ot("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ka([sG]),fr]})}}return n})();function YM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var oG=class extends Rf{constructor(e=null,t,r){super(aN(t),cN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ZM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aG={provide:_u,useExisting:Li(()=>wu)},JM=Promise.resolve(),wu=(()=>{class n extends _u{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new oG,this._registered=!1,this.name="",this.update=new Qe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iG(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){JM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Za(r);JM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Qz(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(be(ca,9),be(kw,10),be(tN,10),be(eN,10),be(Qi,8),be(Of,8))}}static{this.\u0275dir=It({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ka([aG]),fr,Vi]})}}return n})(),Ff=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var cG=new $("");var uG=(()=>{class n{constructor(){this._validator=zM}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,features:[Vi]})}}return n})();var lG={provide:kw,useExisting:Li(()=>Eu),multi:!0};var Eu=(()=>{class n extends uG{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Za,this.createValidator=t=>Vz}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lo(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&pr("required",i._enabled?"":null)},inputs:{required:"required"},features:[Ka([lG]),fr]})}}return n})();var hN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();var fN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Of,useValue:t.callSetDisabledState??kf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({imports:[hN]})}}return n})(),pN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cG,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Of,useValue:t.callSetDisabledState??kf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({imports:[hN]})}}return n})();var Lf=class n{correo;clave;enProceso=!1;autenticacionServicio=N(vi);toastr=N(sa);router=N(qt);registrar(){return w(this,null,function*(){if(!this.enProceso){this.enProceso=!0;try{yield this.autenticacionServicio.registrar(this.correo,this.clave),this.mostrarTastr(!0,"Registro correcto; Iniciando sesi\xF3n!"),yield this.autenticacionServicio.iniciarSesion(this.correo,this.clave),console.log("Inicio de sesi\xF3n autom\xE1tico exitoso"),this.router.navigate(["/home"])}catch(e){console.error("(registro.component) Error en el proceso: ",e),this.manejarError(e)}finally{this.enProceso=!1}}})}manejarError(e){let r=new Map([["auth/email-already-in-use","El correo ingresado ya est\xE1 en uso."],["auth/weak-password","Ingrese un minimo de 6 caracteristicas para su contrase\xF1a"],["auth/invalid-email","Ingrese un correo val\xEDdo"],["auth/missing-email","El campo correo esta vacio"],["auth/missing-password","El campo clave esta vacio"],["auth/admin-restricted-operation","Los campos estan vacios!"]]).get(e.code)||"Ocurri\xF3 un error desconocido. Intente m\xE1s tarde.";this.mostrarTastr(!1,r),console.error("(Registro.Component.ts): Error en el registro:",e.code),console.error("(Registro.Component.ts): Detalles del error:",JSON.stringify(e))}mostrarTastr(e,t){e?this.toastr.success(t,"Registro"):this.toastr.error(t,"Registro")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-registro"]],decls:13,vars:2,consts:[[3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(t,r){t&1&&(de(0,"h2"),Pe(1,"Registro"),we(),de(2,"form",0),ot("ngSubmit",function(){return r.registrar()}),de(3,"label",1),Pe(4,"Correo Electr\xF3nico:"),we(),de(5,"input",2),Wi("ngModelChange",function(s){return go(r.correo,s)||(r.correo=s),s}),we(),wt(6,"br"),de(7,"label",3),Pe(8,"Contrase\xF1a:"),we(),de(9,"input",4),Wi("ngModelChange",function(s){return go(r.clave,s)||(r.clave=s),s}),we(),wt(10,"br"),de(11,"button",5),Pe(12,"Registrar"),we()()),t&2&&(Se(5),Gi("ngModel",r.correo),Se(4),Gi("ngModel",r.clave))},dependencies:[Ff,la,Nf,Pf,Eu,wu,Iu]})};var Vf=class n{correo;clave;enProceso=!1;autenticacionServicio=N(vi);toastr=N(sa);router=N(qt);iniciarSesion(){return w(this,null,function*(){if(!this.enProceso){this.enProceso=!0;try{yield this.autenticacionServicio.iniciarSesion(this.correo,this.clave),console.log("(inicio-sesion.component) Inicio sesion con exito; redirigiendo"),this.mostrarMensaje(!0,"Registro correcto; Iniciando sesi\xF3n!"),this.router.navigate(["/home"])}catch(e){console.log("error: ",e),this.mostrarError(e)}finally{this.enProceso=!1}}})}mostrarError(e){let r=new Map([["auth/email-already-in-use","El correo ingresado ya est\xE1 en uso."],["auth/weak-password","Ingrese un minimo de 6 caracteristicas para su contrase\xF1a"],["auth/invalid-email","Ingrese un correo val\xEDdo"],["auth/missing-email","El campo correo esta vacio"],["auth/missing-password","El campo clave esta vacio"],["auth/admin-restricted-operation","Los campos estan vacios!"]]).get(e.code)||"Ocurri\xF3 un error desconocido. Intente m\xE1s tarde.";this.mostrarMensaje(!1,r),console.error("(inicio-sesion.Component.ts): Error en el inicio-sesion:",e),console.error("(inicio-sesion.Component.ts): Detalles del error:",JSON.stringify(e))}mostrarMensaje(e,t){e?this.toastr.success(t,"Inicio de sesi\xF3n"):this.toastr.error(t,"Inicio de sesi\xF3n")}llenarDatosRapidos(){this.correo="becerraivan79@gmail.com",this.clave="1234567890"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-inicio-sesion"]],decls:15,vars:2,consts:[[3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["type","button",3,"click"]],template:function(t,r){t&1&&(de(0,"p"),Pe(1,"inicio-sesion works!"),we(),de(2,"form",0),ot("ngSubmit",function(){return r.iniciarSesion()}),de(3,"label",1),Pe(4,"Correo Electr\xF3nico:"),we(),de(5,"input",2),Wi("ngModelChange",function(s){return go(r.correo,s)||(r.correo=s),s}),we(),wt(6,"br"),de(7,"label",3),Pe(8,"Contrase\xF1a:"),we(),de(9,"input",4),Wi("ngModelChange",function(s){return go(r.clave,s)||(r.clave=s),s}),we(),wt(10,"br"),de(11,"button",5),Pe(12,"Registrar"),we(),de(13,"button",6),ot("click",function(){return r.llenarDatosRapidos()}),Pe(14,"Inicio r\xE1pido"),we()()),t&2&&(Se(5),Gi("ngModel",r.correo),Se(4),Gi("ngModel",r.clave))},dependencies:[Ff,la,Nf,Pf,Eu,wu,Iu]})};var Uf=class n{UID;FECHA_REGISTRO;ULTIMA_CONEXION;CORREO;static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function fG(n,e){if(n&1){let t=mo();de(0,"div")(1,"button",1),ot("click",function(){Ui(t);let i=pt();return ji(i.cerrarSesion())}),Pe(2,"Desloguearme"),we()()}}function pG(n,e){if(n&1){let t=mo();de(0,"div")(1,"button",1),ot("click",function(){Ui(t);let i=pt();return ji(i.iniciarSesion())}),Pe(2,"Iniciar Sesion"),we(),de(3,"button",1),ot("click",function(){Ui(t);let i=pt();return ji(i.registrarme())}),Pe(4,"Registrarme"),we()()}}var jf=class n{usuarioEncontrado;usuario=N(Uf);autenticacion=N(vi);router=N(qt);ngOnInit(){this.usuarioEncontrado=this.autenticacion.obtenerUsuario(),this.usuarioEncontrado&&(this.usuario.CORREO=this.usuarioEncontrado.email,this.usuario.UID=this.usuarioEncontrado.uid),this.autenticacion.obtenerDatosUsuario().then(e=>{console.log("(home.component.ts) DATOS USUARIO: ",JSON.stringify(e))}).catch(e=>{console.log("(home.component.ts) ERROR DATOS USUARIO: ",e)})}iniciarSesion(){this.router.navigate(["login"])}registrarme(){this.router.navigate(["registro"])}cerrarSesion(){if(!this.autenticacion.obtenerUsuario()){console.log("No hay sesion iniciada");return}this.autenticacion.cerrarSesion().then(e=>{this.usuario.CORREO="no sesi\xF3n iniciada",this.usuario.UID="",this.usuarioEncontrado=null}).catch(e=>{console.log("(homeComponent.ts) error : ",e)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-home"]],decls:8,vars:3,consts:[[4,"ngIf"],[3,"click"]],template:function(t,r){t&1&&(de(0,"p"),Pe(1,"home works!"),we(),de(2,"div"),Pe(3,"usuario logeado: "),we(),de(4,"h3"),Pe(5),we(),ni(6,fG,3,0,"div",0)(7,pG,5,0,"div",0)),t&2&&(Se(5),Fn("email: ",r.usuario.CORREO,""),Se(),st("ngIf",r.usuarioEncontrado),Se(),st("ngIf",!r.usuarioEncontrado))},dependencies:[Xa]})};var mG=[{path:"home",component:jf},{path:"registro",component:Lf},{path:"login",component:Vf},{path:"**",redirectTo:"home",pathMatch:"full"}],Bf=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=it({type:n});static \u0275inj=rt({imports:[tv.forRoot(mG),tv]})};var $f=class n{title="sala-juegos-tp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&wt(0,"router-outlet")},dependencies:[Qy]})};function gN(n){return new O(3e3,!1)}function gG(){return new O(3100,!1)}function yG(){return new O(3101,!1)}function vG(n){return new O(3001,!1)}function _G(n){return new O(3003,!1)}function IG(n){return new O(3004,!1)}function wG(n,e){return new O(3005,!1)}function EG(){return new O(3006,!1)}function DG(){return new O(3007,!1)}function bG(n,e){return new O(3008,!1)}function TG(n){return new O(3002,!1)}function CG(n,e,t,r,i){return new O(3010,!1)}function SG(){return new O(3011,!1)}function AG(){return new O(3012,!1)}function RG(){return new O(3200,!1)}function MG(){return new O(3202,!1)}function NG(){return new O(3013,!1)}function PG(n){return new O(3014,!1)}function xG(n){return new O(3015,!1)}function OG(n){return new O(3016,!1)}function kG(n,e){return new O(3404,!1)}function FG(n){return new O(3502,!1)}function LG(n){return new O(3503,!1)}function VG(){return new O(3300,!1)}function UG(n){return new O(3504,!1)}function jG(n){return new O(3301,!1)}function BG(n,e){return new O(3302,!1)}function $G(n){return new O(3303,!1)}function HG(n,e){return new O(3400,!1)}function qG(n){return new O(3401,!1)}function zG(n){return new O(3402,!1)}function GG(n,e){return new O(3505,!1)}function Ii(n){switch(n.length){case 0:return new _i;case 1:return n[0];default:return new fu(n)}}function MN(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),h=l==o,p=h&&a||new Map;c.forEach((g,y)=>{let E=y,A=g;if(y!=="offset")switch(E=n.normalizePropertyName(E,i),A){case Df:A=t.get(y);break;case Yn:A=r.get(y);break;default:A=n.normalizeStyleValue(y,E,A,i);break}p.set(E,A)}),h||s.push(p),a=p,o=l}),i.length)throw FG(i);return s}function aE(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Uw(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Uw(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Uw(t,"destroy",n)));break}}function Uw(n,e,t){let r=t.totalTime,i=!!t.disabled,s=cE(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function cE(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Yt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function yN(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var WG=typeof document>"u"?null:document.documentElement;function uE(n){let e=n.parentNode||n.host||null;return e===WG?null:e}function KG(n){return n.substring(1,6)=="ebkit"}var Es=null,vN=!1;function QG(n){Es||(Es=YG()||{},vN=Es.style?"WebkitAppearance"in Es.style:!1);let e=!0;return Es.style&&!KG(n)&&(e=n in Es.style,!e&&vN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Es.style)),e}function YG(){return typeof document<"u"?document.body:null}function NN(n,e){for(;e;){if(e===n)return!0;e=uE(e)}return!1}function PN(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var lE=(()=>{class n{validateStyleProperty(t){return QG(t)}containsElement(t,r){return NN(t,r)}getParentElement(t){return uE(t)}query(t,r,i){return PN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new _i(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Ts=class{static{this.NOOP=new lE}},Cs=class{};var ZG=1e3,xN="{{",JG="}}",ON="ng-enter",zw="ng-leave",Hf="ng-trigger",Kf=".ng-trigger",_N="ng-animating",Gw=".ng-animating";function Nr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ww(parseFloat(e[1]),e[2])}function Ww(n,e){switch(e){case"s":return n*ZG;default:return n}}function Qf(n,e,t){return n.hasOwnProperty("duration")?n:XG(n,e,t)}function XG(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(gN(n)),{duration:0,delay:0,easing:""};i=Ww(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=Ww(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(gG()),a=!0),s<0&&(e.push(yG()),a=!0),a&&e.splice(c,0,gN(n))}return{duration:i,delay:s,easing:o}}function e4(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Zn(n,e,t){e.forEach((r,i)=>{let s=dE(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function bs(n,e){e.forEach((t,r)=>{let i=dE(r);n.style[i]=""})}function Du(n){return Array.isArray(n)?n.length==1?n[0]:jM(n):n}function t4(n,e,t){let r=e.params||{},i=kN(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(vG(s))})}var Kw=new RegExp(`${xN}\\s*(.+?)\\s*${JG}`,"g");function kN(n){let e=[];if(typeof n=="string"){let t;for(;t=Kw.exec(n);)e.push(t[1]);Kw.lastIndex=0}return e}function Tu(n,e,t){let r=`${n}`,i=r.replace(Kw,(s,o)=>{let a=e[o];return a==null&&(t.push(_G(o)),a=""),a.toString()});return i==r?n:i}var n4=/-+([a-z0-9])/g;function dE(n){return n.replace(n4,(...e)=>e[1].toUpperCase())}function r4(n,e){return n===0||e===0}function i4(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,hE(n,a)))}}return e}function Qt(n,e,t){switch(e.type){case se.Trigger:return n.visitTrigger(e,t);case se.State:return n.visitState(e,t);case se.Transition:return n.visitTransition(e,t);case se.Sequence:return n.visitSequence(e,t);case se.Group:return n.visitGroup(e,t);case se.Animate:return n.visitAnimate(e,t);case se.Keyframes:return n.visitKeyframes(e,t);case se.Style:return n.visitStyle(e,t);case se.Reference:return n.visitReference(e,t);case se.AnimateChild:return n.visitAnimateChild(e,t);case se.AnimateRef:return n.visitAnimateRef(e,t);case se.Query:return n.visitQuery(e,t);case se.Stagger:return n.visitStagger(e,t);default:throw IG(e.type)}}function hE(n,e){return window.getComputedStyle(n)[e]}var s4=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Yf=class extends Cs{normalizePropertyName(e,t){return dE(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(s4.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(wG(e,r))}return o+s}};var Zf="*";function o4(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>a4(r,t,e)):t.push(n),t}function a4(n,e,t){if(n[0]==":"){let c=c4(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(xG(n)),e;let i=r[1],s=r[2],o=r[3];e.push(IN(i,o));let a=i==Zf&&o==Zf;s[0]=="<"&&!a&&e.push(IN(o,i))}function c4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(OG(n)),"* => *"}}var qf=new Set(["true","1"]),zf=new Set(["false","0"]);function IN(n,e){let t=qf.has(n)||zf.has(n),r=qf.has(e)||zf.has(e);return(i,s)=>{let o=n==Zf||n==i,a=e==Zf||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?qf.has(n):zf.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?qf.has(e):zf.has(e)),o&&a}}var FN=":self",u4=new RegExp(`s*${FN}s*,?`,"g");function LN(n,e,t,r){return new Qw(n).build(e,t,r)}var wN="",Qw=class{constructor(e){this._driver=e}build(e,t,r){let i=new Yw(t);return this._resetContextStyleTimingState(i),Qt(this,Du(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=wN,e.collectedStyles=new Map,e.collectedStyles.set(wN,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(EG()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==se.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==se.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(DG())}),{type:se.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{kN(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(bG(e.name,[...s.values()]))}return{type:se.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Qt(this,Du(e.animation),t),i=o4(e.expr,t.errors);return{type:se.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ds(e.options)}}visitSequence(e,t){return{type:se.Sequence,steps:e.steps.map(r=>Qt(this,r,t)),options:Ds(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Qt(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:se.Group,steps:s,options:Ds(e.options)}}visitAnimate(e,t){let r=f4(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:ws({});if(s.type==se.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=ws(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:se.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Yn?r.push(a):t.errors.push(TG(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(xN)>=0){s=!0;break}}}),{type:se.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c),p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(CG(c,h.startTime,h.endTime,s,i)),p=!1),s=h.startTime),p&&l.set(c,{startTime:s,endTime:i}),t.options&&t4(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:se.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(SG()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,h=e.steps.map(k=>{let V=this._makeStyleAst(k,t),j=V.offset!=null?V.offset:h4(V.styles),G=0;return j!=null&&(s++,G=V.offset=j),c=c||G<0||G>1,a=a||G<l,l=G,o.push(G),V});c&&t.errors.push(AG()),a&&t.errors.push(RG());let p=e.steps.length,g=0;s>0&&s<p?t.errors.push(MG()):s==0&&(g=i/(p-1));let y=p-1,E=t.currentTime,A=t.currentAnimateTimings,M=A.duration;return h.forEach((k,V)=>{let j=g>0?V==y?1:g*V:o[V],G=j*M;t.currentTime=E+A.delay+G,A.duration=G,this._validateStyleAst(k,t),k.offset=j,r.styles.push(k)}),r}visitReference(e,t){return{type:se.Reference,animation:Qt(this,Du(e.animation),t),options:Ds(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:se.AnimateChild,options:Ds(e.options)}}visitAnimateRef(e,t){return{type:se.AnimateRef,animation:this.visitReference(e.animation,t),options:Ds(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=l4(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Yt(t.collectedStyles,t.currentQuerySelector,new Map);let a=Qt(this,Du(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:se.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ds(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(NG());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Qf(e.timings,t.errors,!0);return{type:se.Stagger,animation:Qt(this,Du(e.animation),t),timings:r,options:null}}};function l4(n){let e=!!n.split(/\s*,\s*/).find(t=>t==FN);return e&&(n=n.replace(u4,"")),n=n.replace(/@\*/g,Kf).replace(/@\w+/g,t=>Kf+"-"+t.slice(1)).replace(/:animating/g,Gw),[n,e]}function d4(n){return n?P({},n):null}var Yw=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function h4(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function f4(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Qf(n,e).duration;return jw(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=jw(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Qf(t,e);return jw(i.duration,i.delay,i.easing)}function Ds(n){return n?(n=P({},n),n.params&&(n.params=d4(n.params))):n={},n}function jw(n,e,t){return{duration:n,delay:e,easing:t}}function fE(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Cu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},p4=1,m4=":enter",g4=new RegExp(m4,"g"),y4=":leave",v4=new RegExp(y4,"g");function VN(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new Zw().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var Zw=class{buildKeyframes(e,t,r,i,s,o,a,c,l,h=[]){l=l||new Cu;let p=new Jw(e,t,l,i,s,h,[]);p.options=c;let g=c.delay?Nr(c.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([o],null,p.errors,c),Qt(this,r,p);let y=p.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let A=y.length-1;A>=0;A--){let M=y[A];if(M.element===t){E=M;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,p.errors,c)}return y.length?y.map(E=>E.buildKeyframes()):[fE(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Nr(Tu(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Nr(r.duration):null,a=r.delay!=null?Nr(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Qt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==se.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Jf);let o=Nr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Qt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Nr(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Qt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Tu(r,t.params,t.errors):r;return Qf(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==se.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Nr(i.delay):0;s&&(t.previousNode.type===se.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Jf);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,l);s&&p.delayNextStep(s),l===t.element&&(c=p.currentTimeline),Qt(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let g=p.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let p=h.currentTime;Qt(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},Jf={},Jw=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Xf(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Nr(r.duration)),r.delay!=null&&(i.delay=Nr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Tu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Jf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Xw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(g4,"."+this._enterClassName),e=e.replace(v4,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(PG(t)),a}},Xf=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=p4,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yn),this._currentKeyframe.set(t,Yn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=_4(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Tu(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yn),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((h,p)=>{h===Df?e.add(p):h===Yn&&t.add(p)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return fE(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},Xw=class extends Xf{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",EN(a)),s.push(l);let h=e.length-1;for(let p=1;p<=h;p++){let g=new Map(e[p]),y=g.get("offset"),E=t+y*r;g.set("offset",EN(E/o)),s.push(g)}r=o,t=0,i="",e=s}return fE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function EN(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function _4(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Yn)}else for(let[s,o]of i)t.set(s,o)}),t}function DN(n,e,t,r,i,s,o,a,c,l,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:p,errors:g}}var Bw={},ep=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return I4(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,h){let p=[],g=this.ast.options&&this.ast.options.params||Bw,y=a&&a.params||Bw,E=this.buildStyles(r,y,p),A=c&&c.params||Bw,M=this.buildStyles(i,A,p),k=new Set,V=new Map,j=new Map,G=i==="void",Ce={params:UN(A,g),delay:this.ast.options?.delay},K=h?[]:VN(e,t,this.ast.animation,s,o,E,M,Ce,l,p),D=0;return K.forEach(v=>{D=Math.max(v.duration+v.delay,D)}),p.length?DN(t,this._triggerName,r,i,G,E,M,[],[],V,j,D,p):(K.forEach(v=>{let _=v.element,b=Yt(V,_,new Set);v.preStyleProps.forEach(S=>b.add(S));let T=Yt(j,_,new Set);v.postStyleProps.forEach(S=>T.add(S)),_!==t&&k.add(_)}),DN(t,this._triggerName,r,i,G,E,M,K,[...k.values()],V,j,D))}};function I4(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function UN(n,e){let t=P({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var eE=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=UN(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Tu(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function w4(n,e,t){return new tE(n,e,t)}var tE=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new eE(i.style,s,r))}),bN(this.states,"true","1"),bN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ep(e,i,this.states))}),this.fallbackTransition=E4(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function E4(n,e,t){let r=[(o,a)=>!0],i={type:se.Sequence,steps:[],options:null},s={type:se.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new ep(n,s,e)}function bN(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var D4=new Cu,nE=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=LN(this._driver,t,r,i);if(r.length)throw LG(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=MN(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=VN(this._driver,t,s,ON,zw,new Map,new Map,r,D4,i),o.forEach(h=>{let p=Yt(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(i.push(VG()),o=[]),i.length)throw UG(i);a.forEach((h,p)=>{h.forEach((g,y)=>{h.set(y,this._driver.computeStyle(p,y,Yn))})});let c=o.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),l=Ii(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw jG(e);return t}listen(e,t,r,i){let s=cE(t,"","","");return aE(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},TN="ng-animate-queued",b4=".ng-animate-queued",$w="ng-animate-disabled",T4=".ng-animate-disabled",C4="ng-star-inserted",S4=".ng-star-inserted",A4=[],jN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},R4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},En="__ng_removed",Su=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=N4(i),r){let s=e,{value:o}=s,a=yD(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},bu="void",Hw=new Su(bu),rE=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ln(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw BG(r,t);if(r==null||r.length==0)throw $G(t);if(!P4(r))throw HG(r,t);let s=Yt(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Yt(this._engine.statesByElement,e,new Map);return a.has(t)||(ln(e,Hf),ln(e,Hf+"-"+t),a.set(t,Hw)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw qG(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Au(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ln(e,Hf),ln(e,Hf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Su(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=Hw),!(l.value===bu)&&c.value===l.value){if(!k4(c.params,l.params)){let A=[],M=s.matchStyles(c.value,c.params,A),k=s.matchStyles(l.value,l.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{bs(e,M),Zn(e,k)})}return}let g=Yt(this._engine.playersByElement,e,[]);g.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let y=s.matchTransition(c.value,l.value,e,l.params),E=!1;if(!y){if(!i)return;y=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:l,player:o,isFallbackTransition:E}),E||(ln(e,TN),o.onStart(()=>{da(e,TN)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);let M=this._engine.playersByElement.get(e);if(M){let k=M.indexOf(o);k>=0&&M.splice(k,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Kf,!0);r.forEach(i=>{if(i[En])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let h=this.trigger(e,l,bu,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ii(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||Hw,h=new Su(bu),p=new Au(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[En];(!s||s===jN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ln(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=cE(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,aE(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},iE=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new rE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Gf(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Gf(t))return;let s=t[En];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ln(e,$w)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),da(e,$w))}removeNode(e,t,r){if(Gf(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[En]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Gf(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Kf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Gw,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ii(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[En];if(t&&t.setForRemoval){if(e[En]=jN,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains($w)&&this.markElementAsDisabled(e,!1),this.driver.query(e,T4,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ln(i,C4)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ii(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw zG(e)}_flushAnimations(e,t){let r=new Cu,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(B=>{h.add(B);let z=this.driver.query(B,b4,!0);for(let W=0;W<z.length;W++)h.add(z[W])});let p=this.bodyNode,g=Array.from(this.statesByElement.keys()),y=AN(g,this.collectedEnterElements),E=new Map,A=0;y.forEach((B,z)=>{let W=ON+A++;E.set(z,W),B.forEach(ue=>ln(ue,W))});let M=[],k=new Set,V=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){let z=this.collectedLeaveElements[B],W=z[En];W&&W.setForRemoval&&(M.push(z),k.add(z),W.hasAnimation?this.driver.query(z,S4,!0).forEach(ue=>k.add(ue)):V.add(z))}let j=new Map,G=AN(g,Array.from(k));G.forEach((B,z)=>{let W=zw+A++;j.set(z,W),B.forEach(ue=>ln(ue,W))}),e.push(()=>{y.forEach((B,z)=>{let W=E.get(z);B.forEach(ue=>da(ue,W))}),G.forEach((B,z)=>{let W=j.get(z);B.forEach(ue=>da(ue,W))}),M.forEach(B=>{this.processLeaveNode(B)})});let Ce=[],K=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(t).forEach(W=>{let ue=W.player,Ge=W.element;if(Ce.push(ue),this.collectedEnterElements.length){let Be=Ge[En];if(Be&&Be.setForMove){if(Be.previousTriggersValues&&Be.previousTriggersValues.has(W.triggerName)){let Jn=Be.previousTriggersValues.get(W.triggerName),xt=this.statesByElement.get(W.element);if(xt&&xt.has(W.triggerName)){let Xn=xt.get(W.triggerName);Xn.value=Jn,xt.set(W.triggerName,Xn)}}ue.destroy();return}}let Jt=!p||!this.driver.containsElement(p,Ge),je=j.get(Ge),xe=E.get(Ge),Oe=this._buildInstruction(W,r,xe,je,Jt);if(Oe.errors&&Oe.errors.length){K.push(Oe);return}if(Jt){ue.onStart(()=>bs(Ge,Oe.fromStyles)),ue.onDestroy(()=>Zn(Ge,Oe.toStyles)),i.push(ue);return}if(W.isFallbackTransition){ue.onStart(()=>bs(Ge,Oe.fromStyles)),ue.onDestroy(()=>Zn(Ge,Oe.toStyles)),i.push(ue);return}let xr=[];Oe.timelines.forEach(Be=>{Be.stretchStartingKeyframe=!0,this.disabledNodes.has(Be.element)||xr.push(Be)}),Oe.timelines=xr,r.append(Ge,Oe.timelines);let op={instruction:Oe,player:ue,element:Ge};o.push(op),Oe.queriedElements.forEach(Be=>Yt(a,Be,[]).push(ue)),Oe.preStyleProps.forEach((Be,Jn)=>{if(Be.size){let xt=c.get(Jn);xt||c.set(Jn,xt=new Set),Be.forEach((Xn,Or)=>xt.add(Or))}}),Oe.postStyleProps.forEach((Be,Jn)=>{let xt=l.get(Jn);xt||l.set(Jn,xt=new Set),Be.forEach((Xn,Or)=>xt.add(Or))})});if(K.length){let B=[];K.forEach(z=>{B.push(GG(z.triggerName,z.errors))}),Ce.forEach(z=>z.destroy()),this.reportError(B)}let D=new Map,v=new Map;o.forEach(B=>{let z=B.element;r.has(z)&&(v.set(z,z),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,D))}),i.forEach(B=>{let z=B.element;this._getPreviousPlayers(z,!1,B.namespaceId,B.triggerName,null).forEach(ue=>{Yt(D,z,[]).push(ue),ue.destroy()})});let _=M.filter(B=>RN(B,c,l)),b=new Map;SN(b,this.driver,V,l,Yn).forEach(B=>{RN(B,c,l)&&_.push(B)});let S=new Map;y.forEach((B,z)=>{SN(S,this.driver,new Set(B),c,Df)}),_.forEach(B=>{let z=b.get(B),W=S.get(B);b.set(B,new Map([...z?.entries()??[],...W?.entries()??[]]))});let I=[],Zt=[],Pr={};o.forEach(B=>{let{element:z,player:W,instruction:ue}=B;if(r.has(z)){if(h.has(z)){W.onDestroy(()=>Zn(z,ue.toStyles)),W.disabled=!0,W.overrideTotalTime(ue.totalTime),i.push(W);return}let Ge=Pr;if(v.size>1){let je=z,xe=[];for(;je=je.parentNode;){let Oe=v.get(je);if(Oe){Ge=Oe;break}xe.push(je)}xe.forEach(Oe=>v.set(Oe,Ge))}let Jt=this._buildAnimation(W.namespaceId,ue,D,s,S,b);if(W.setRealPlayer(Jt),Ge===Pr)I.push(W);else{let je=this.playersByElement.get(Ge);je&&je.length&&(W.parentPlayer=Ii(je)),i.push(W)}}else bs(z,ue.fromStyles),W.onDestroy(()=>Zn(z,ue.toStyles)),Zt.push(W),h.has(z)&&i.push(W)}),Zt.forEach(B=>{let z=s.get(B.element);if(z&&z.length){let W=Ii(z);B.setRealPlayer(W)}}),i.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<M.length;B++){let z=M[B],W=z[En];if(da(z,zw),W&&W.hasAnimation)continue;let ue=[];if(a.size){let Jt=a.get(z);Jt&&Jt.length&&ue.push(...Jt);let je=this.driver.query(z,Gw,!0);for(let xe=0;xe<je.length;xe++){let Oe=a.get(je[xe]);Oe&&Oe.length&&ue.push(...Oe)}}let Ge=ue.filter(Jt=>!Jt.destroyed);Ge.length?x4(this,z,Ge):this.processLeaveNode(z)}return M.length=0,I.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();let z=this.players.indexOf(B);this.players.splice(z,1)}),B.play()}),I}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==bu;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,h=l!==s,p=Yt(r,l,[]);this._getPreviousPlayers(l,h,o,a,t.toState).forEach(y=>{let E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),p.push(y)})}bs(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],h=new Set,p=new Set,g=t.timelines.map(E=>{let A=E.element;h.add(A);let M=A[En];if(M&&M.removedBeforeQueried)return new _i(E.duration,E.delay);let k=A!==c,V=O4((r.get(A)||A4).map(D=>D.getRealPlayer())).filter(D=>{let v=D;return v.element?v.element===A:!1}),j=s.get(A),G=o.get(A),Ce=MN(this._normalizer,E.keyframes,j,G),K=this._buildPlayer(E,Ce,V);if(E.subTimeline&&i&&p.add(A),k){let D=new Au(e,a,A);D.setRealPlayer(K),l.push(D)}return K});l.forEach(E=>{Yt(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>M4(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>ln(E,_N));let y=Ii(g);return y.onDestroy(()=>{h.forEach(E=>da(E,_N)),Zn(c,t.toStyles)}),p.forEach(E=>{Yt(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new _i(e.duration,e.delay)}},Au=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new _i,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>aE(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function M4(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function N4(n){return n??null}function Gf(n){return n&&n.nodeType===1}function P4(n){return n=="start"||n=="done"}function CN(n,e){let t=n.style.display;return n.style.display=e??"none",t}function SN(n,e,t,r,i){let s=[];t.forEach(c=>s.push(CN(c)));let o=[];r.forEach((c,l)=>{let h=new Map;c.forEach(p=>{let g=e.computeStyle(l,p,i);h.set(p,g),(!g||g.length==0)&&(l[En]=R4,o.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>CN(c,s[a++])),o}function AN(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function ln(n,e){n.classList?.add(e)}function da(n,e){n.classList?.remove(e)}function x4(n,e,t){Ii(t).onDone(()=>n.processLeaveNode(e))}function O4(n){let e=[];return BN(n,e),e}function BN(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof fu?BN(r.players,e):e.push(r)}}function k4(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function RN(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ha=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new iE(e.body,t,r),this._timelineEngine=new nE(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],h=LN(this._driver,s,c,l);if(c.length)throw kG(i,c);l.length&&void 0,a=w4(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=yN(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=yN(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function F4(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=qw(e[0]),e.length>1&&(r=qw(e[e.length-1]))):e instanceof Map&&(t=qw(e)),t||r?new sE(n,t,r):null}var sE=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Zn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zn(this._element,this._initialStyles),this._endStyles&&(Zn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bs(this._element,this._endStyles),this._endStyles=null),Zn(this._element,this._initialStyles),this._state=3)}};function qw(n){let e=null;return n.forEach((t,r)=>{L4(r)&&(e=e||new Map,e.set(r,t))}),e}function L4(n){return n==="display"||n==="position"}var tp=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:hE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},np=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return NN(e,t)}getParentElement(e){return uE(e)}query(e,t,r){return PN(e,t,r)}computeStyle(e,t,r){return hE(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,h=o.filter(y=>y instanceof tp);r4(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((E,A)=>l.set(A,E))});let p=e4(t).map(y=>new Map(y));p=i4(e,p,l);let g=F4(e,p);return new tp(e,p,c,g)}};var Wf="@",$N="@.disabled",rp=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Wf&&t==$N?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},oE=class extends rp{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Wf?t.charAt(1)=="."&&t==$N?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Wf){let i=V4(e),s=t.slice(1),o="";return s.charAt(0)!=Wf&&([s,o]=U4(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function V4(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function U4(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var ip=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,h=l.get(i);if(!h){let p=()=>l.delete(i);h=new rp(r,i,this.engine,p),l.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new oE(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var B4=(()=>{class n extends ha{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(H(Ye),H(Ts),H(Cs))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function $4(){return new Yf}function H4(n,e,t){return new ip(n,e,t)}var qN=[{provide:Cs,useFactory:$4},{provide:ha,useClass:B4},{provide:Zr,useFactory:H4,deps:[Ld,ha,ce]}],HN=[{provide:Ts,useFactory:()=>new np},{provide:Sg,useValue:"BrowserAnimations"},...qN],q4=[{provide:Ts,useClass:lE},{provide:Sg,useValue:"NoopAnimations"},...qN],zN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?q4:HN}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({providers:HN,imports:[Ud]})}}return n})();var sp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=it({type:n,bootstrap:[$f]});static \u0275inj=rt({providers:[OR(()=>kR({projectId:"utn-juegos-2025",appId:"1:791436188633:web:1b93df6350919f8b6817c8",storageBucket:"utn-juegos-2025.firebasestorage.app",apiKey:"AIzaSyB3igy4Iq4oE_ISio4Gp4P9cobka9I8S8c",authDomain:"utn-juegos-2025.firebaseapp.com",messagingSenderId:"791436188633"})),NM(()=>xM()),LM(()=>VM())],imports:[Ud,Bf,fN,pN,zN,qM.forRoot()]})};xS().bootstrapModule(sp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
